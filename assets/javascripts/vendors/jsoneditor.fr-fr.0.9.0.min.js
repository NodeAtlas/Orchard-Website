!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).JSONEditor=e()}}(function(){return function e(t,r,a){function i(s,n){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!n&&l)return l(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return i(r||e)},c,c.exports,e,t,r,a)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<a.length;s++)i(a[s]);return i}({1:[function(e,t,r){(function(e){!function(a){var i="object"==typeof r&&r&&!r.nodeType&&r,o="object"==typeof t&&t&&!t.nodeType&&t,s="object"==typeof e&&e;s.global!==s&&s.window!==s&&s.self!==s||(a=s);var n,l,h=2147483647,c=36,d=1,u=26,p=38,f=700,m=72,v=128,g="-",y=/^xn--/,b=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-d,P=Math.floor,_=String.fromCharCode;function S(e){throw new RangeError(x[e])}function j(e,t){for(var r=e.length,a=[];r--;)a[r]=t(e[r]);return a}function C(e,t){var r=e.split("@"),a="";return r.length>1&&(a=r[0]+"@",e=r[1]),a+j((e=e.replace(E,".")).split("."),t).join(".")}function N(e){for(var t,r,a=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?a.push(((1023&t)<<10)+(1023&r)+65536):(a.push(t),i--):a.push(t);return a}function k(e){return j(e,function(e){var t="";return e>65535&&(t+=_((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=_(e)}).join("")}function O(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function A(e,t,r){var a=0;for(e=r?P(e/f):e>>1,e+=P(e/t);e>w*u>>1;a+=c)e=P(e/w);return P(a+(w+1)*e/(e+p))}function T(e){var t,r,a,i,o,s,n,l,p,f,y,b=[],E=e.length,x=0,w=v,_=m;for((r=e.lastIndexOf(g))<0&&(r=0),a=0;a<r;++a)e.charCodeAt(a)>=128&&S("not-basic"),b.push(e.charCodeAt(a));for(i=r>0?r+1:0;i<E;){for(o=x,s=1,n=c;i>=E&&S("invalid-input"),((l=(y=e.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:c)>=c||l>P((h-x)/s))&&S("overflow"),x+=l*s,!(l<(p=n<=_?d:n>=_+u?u:n-_));n+=c)s>P(h/(f=c-p))&&S("overflow"),s*=f;_=A(x-o,t=b.length+1,0==o),P(x/t)>h-w&&S("overflow"),w+=P(x/t),x%=t,b.splice(x++,0,w)}return k(b)}function D(e){var t,r,a,i,o,s,n,l,p,f,y,b,E,x,w,j=[];for(b=(e=N(e)).length,t=v,r=0,o=m,s=0;s<b;++s)(y=e[s])<128&&j.push(_(y));for(a=i=j.length,i&&j.push(g);a<b;){for(n=h,s=0;s<b;++s)(y=e[s])>=t&&y<n&&(n=y);for(n-t>P((h-r)/(E=a+1))&&S("overflow"),r+=(n-t)*E,t=n,s=0;s<b;++s)if((y=e[s])<t&&++r>h&&S("overflow"),y==t){for(l=r,p=c;!(l<(f=p<=o?d:p>=o+u?u:p-o));p+=c)w=l-f,x=c-f,j.push(_(O(f+w%x,0))),l=P(w/x);j.push(_(O(l,0))),o=A(r,E,a==i),r=0,++a}++r,++t}return j.join("")}if(n={version:"1.4.1",ucs2:{decode:N,encode:k},decode:T,encode:D,toASCII:function(e){return C(e,function(e){return b.test(e)?"xn--"+D(e):e})},toUnicode:function(e){return C(e,function(e){return y.test(e)?T(e.slice(4).toLowerCase()):e})}},i&&o)if(t.exports==i)o.exports=n;else for(l in n)n.hasOwnProperty(l)&&(i[l]=n[l]);else a.punycode=n}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";t.exports=function(e,t,r,i){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var n=1e3;i&&"number"==typeof i.maxKeys&&(n=i.maxKeys);var l,h,c=e.length;n>0&&c>n&&(c=n);for(var d=0;d<c;++d){var u,p,f,m,v=e[d].replace(s,"%20"),g=v.indexOf(r);g>=0?(u=v.substr(0,g),p=v.substr(g+1)):(u=v,p=""),f=decodeURIComponent(u),m=decodeURIComponent(p),l=o,h=f,Object.prototype.hasOwnProperty.call(l,h)?a(o[f])?o[f].push(m):o[f]=[o[f],m]:o[f]=m}return o};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],3:[function(e,t,r){"use strict";var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?o(s(e),function(s){var n=encodeURIComponent(a(s))+r;return i(e[s])?o(e[s],function(e){return n+encodeURIComponent(a(e))}).join(t):n+encodeURIComponent(a(e[s]))}).join(t):n?encodeURIComponent(a(n))+r+encodeURIComponent(a(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var r=[],a=0;a<e.length;a++)r.push(t(e[a],a));return r}var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],4:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":2,"./encode":3}],5:[function(e,t,r){"use strict";var a=e("punycode"),i=e("./util");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=b,r.resolve=function(e,t){return b(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},r.format=function(e){i.isString(e)&&(e=b(e));return e instanceof o?e.format():o.prototype.format.call(e)},r.Url=o;var s=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(h),d=["%","/","?",";","#"].concat(c),u=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=e("querystring");function b(e,t,r){if(e&&i.isObject(e)&&e instanceof o)return e;var a=new o;return a.parse(e,t,r),a}o.prototype.parse=function(e,t,r){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),n=-1!==o&&o<e.indexOf("#")?"?":"#",h=e.split(n);h[0]=h[0].replace(/\\/g,"/");var b=e=h.join(n);if(b=b.trim(),!r&&1===e.split("#").length){var E=l.exec(b);if(E)return this.path=b,this.href=b,this.pathname=E[1],E[2]?(this.search=E[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=s.exec(b);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,b=b.substr(x.length)}if(r||x||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var P="//"===b.substr(0,2);!P||x&&v[x]||(b=b.substr(2),this.slashes=!0)}if(!v[x]&&(P||x&&!g[x])){for(var _,S,j=-1,C=0;C<u.length;C++){-1!==(N=b.indexOf(u[C]))&&(-1===j||N<j)&&(j=N)}-1!==(S=-1===j?b.lastIndexOf("@"):b.lastIndexOf("@",j))&&(_=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent(_)),j=-1;for(C=0;C<d.length;C++){var N;-1!==(N=b.indexOf(d[C]))&&(-1===j||N<j)&&(j=N)}-1===j&&(j=b.length),this.host=b.slice(0,j),b=b.slice(j),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var O=this.hostname.split(/\./),A=(C=0,O.length);C<A;C++){var T=O[C];if(T&&!T.match(p)){for(var D="",$=0,I=T.length;$<I;$++)T.charCodeAt($)>127?D+="x":D+=T[$];if(!D.match(p)){var R=O.slice(0,C),L=O.slice(C+1),F=T.match(f);F&&(R.push(F[1]),L.unshift(F[2])),L.length&&(b="/"+L.join(".")+b),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=a.toASCII(this.hostname));var M=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+M,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[w])for(C=0,A=c.length;C<A;C++){var B=c[C];if(-1!==b.indexOf(B)){var U=encodeURIComponent(B);U===B&&(U=escape(B)),b=b.split(B).join(U)}}var q=b.indexOf("#");-1!==q&&(this.hash=b.substr(q),b=b.slice(0,q));var H=b.indexOf("?");if(-1!==H?(this.search=b.substr(H),this.query=b.substr(H+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,H)):t&&(this.search="",this.query={}),b&&(this.pathname=b),g[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){M=this.pathname||"";var Q=this.search||"";this.path=M+Q}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",a=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var n=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),a&&"#"!==a.charAt(0)&&(a="#"+a),n&&"?"!==n.charAt(0)&&(n="?"+n),t+o+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(n=n.replace("#","%23"))+a},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var r=new o,a=Object.keys(this),s=0;s<a.length;s++){var n=a[s];r[n]=this[n]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),h=0;h<l.length;h++){var c=l[h];"protocol"!==c&&(r[c]=e[c])}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!g[e.protocol]){for(var d=Object.keys(e),u=0;u<d.length;u++){var p=d[u];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||v[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",y=r.search||"";r.path=m+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),E=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=E||b||r.host&&e.pathname,w=x,P=r.pathname&&r.pathname.split("/")||[],_=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(_&&(r.hostname="",r.port=null,r.host&&(""===P[0]?P[0]=r.host:P.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),x=x&&(""===f[0]||""===P[0])),E)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,P=f;else if(f.length)P||(P=[]),P.pop(),P=P.concat(f),r.search=e.search,r.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(_)r.hostname=r.host=P.shift(),(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift());return r.search=e.search,r.query=e.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!P.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=P.slice(-1)[0],j=(r.host||e.host||P.length>1)&&("."===S||".."===S)||""===S,C=0,N=P.length;N>=0;N--)"."===(S=P[N])?P.splice(N,1):".."===S?(P.splice(N,1),C++):C&&(P.splice(N,1),C--);if(!x&&!w)for(;C--;C)P.unshift("..");!x||""===P[0]||P[0]&&"/"===P[0].charAt(0)||P.unshift(""),j&&"/"!==P.join("/").substr(-1)&&P.push("");var k,O=""===P[0]||P[0]&&"/"===P[0].charAt(0);_&&(r.hostname=r.host=O?"":P.length?P.shift():"",(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift()));return(x=x||r.host&&P.length)&&!O&&P.unshift(""),P.length?r.pathname=P.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":6,punycode:1,querystring:4}],6:[function(e,t,r){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],7:[function(e,t,r){t.exports=e("./src/js/JSONEditor")},{"./src/js/JSONEditor":58}],8:[function(e,t,r){"use strict";var a=e("./compile"),i=e("./compile/resolve"),o=e("./cache"),s=e("./compile/schema_obj"),n=e("json-stable-stringify"),l=e("./compile/formats"),h=e("./compile/rules"),c=e("./v5"),d=e("./compile/util"),u=e("./async"),p=e("co");t.exports=b,b.prototype.compileAsync=u.compile;var f=e("./keyword");b.prototype.addKeyword=f.add,b.prototype.getKeyword=f.get,b.prototype.removeKeyword=f.remove,b.ValidationError=e("./compile/validation_error");var m="http://json-schema.org/draft-04/schema",v=/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i;function g(e){return v.test(e)}var y=["removeAdditional","useDefaults","coerceTypes"];function b(t){if(!(this instanceof b))return new b(t);var r=this;function f(e,t){var a;if("string"==typeof e){if(!(a=P(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var i=j(e);a=i.validate||C(i)}var o=a(t);return!0===a.$async?"*"==r._opts.async?p(o):o:(r.errors=a.errors,o)}function E(e,t,a,o){if(Array.isArray(e))for(var s=0;s<e.length;s++)E(e[s],void 0,a,o);else O(t=i.normalizeId(t||e.id)),r._schemas[t]=j(e,a,o,!0)}function x(e,t,r){E(e,t,r,!0)}function w(e,t){var a,i,o=e.$schema||r._opts.defaultMeta||(a=r._opts.meta,r._opts.defaultMeta="object"==typeof a?a.id||a:r._opts.v5?c.META_SCHEMA_ID:m,r._opts.defaultMeta),s=r._formats.uri;r._formats.uri="function"==typeof s?g:v;try{i=f(o,e)}finally{r._formats.uri=s}if(!i&&t){var n="schema is invalid: "+N();if("log"!=r._opts.validateSchema)throw new Error(n);console.error(n)}return i}function P(e){var t=_(e);switch(typeof t){case"object":return t.validate||C(t);case"string":return P(t);case"undefined":return function(e){var t=i.schema.call(r,{schema:{}},e);if(t){var o=t.schema,n=t.root,l=t.baseId,h=a.call(r,o,n,void 0,l);return r._fragments[e]=new s({ref:e,fragment:!0,schema:o,root:n,baseId:l,validate:h}),h}}(e)}}function _(e){return e=i.normalizeId(e),r._schemas[e]||r._refs[e]||r._fragments[e]}function S(e,t){for(var a in e){var i=e[a];i.meta||t&&!t.test(a)||(r._cache.del(i.jsonStr),delete e[a])}}function j(e,t,a,o){if("object"!=typeof e)throw new Error("schema should be object");var l=n(e),h=r._cache.get(l);if(h)return h;o=o||!1!==r._opts.addUsedSchema;var c=i.normalizeId(e.id);c&&o&&O(c);var d,u=!1!==r._opts.validateSchema&&!t;u&&!(d=e.id&&e.id==e.$schema)&&w(e,!0);var p=i.ids.call(r,e),f=new s({id:c,schema:e,localRefs:p,jsonStr:l,meta:a});return"#"!=c[0]&&o&&(r._refs[c]=f),r._cache.put(l,f),u&&d&&w(e,!0),f}function C(e,t){if(e.compiling)return e.validate=s,s.schema=e.schema,s.errors=null,s.root=t||s,!0===e.schema.$async&&(s.$async=!0),s;var i,o;e.compiling=!0,e.meta&&(i=r._opts,r._opts=r._metaOpts);try{o=a.call(r,e.schema,t,e.localRefs)}finally{e.compiling=!1,e.meta&&(r._opts=i)}return e.validate=o,e.refs=o.refs,e.refVal=o.refVal,e.root=o.root,o;function s(){var t=e.validate,r=t.apply(null,arguments);return s.errors=t.errors,r}}function N(e,t){if(!(e=e||r.errors))return"No errors";for(var a=void 0===(t=t||{}).separator?", ":t.separator,i=void 0===t.dataVar?"data":t.dataVar,o="",s=0;s<e.length;s++){var n=e[s];n&&(o+=i+n.dataPath+" "+n.message+a)}return o.slice(0,-a.length)}function k(e,t){"string"==typeof t&&(t=new RegExp(t)),r._formats[e]=t}function O(e){if(r._schemas[e]||r._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}t=this._opts=d.copy(t)||{},this._schemas={},this._refs={},this._fragments={},this._formats=l(t.format),this._cache=t.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=h(),this.validate=f,this.compile=function(e,t){var r=j(e,void 0,t);return r.validate||C(r)},this.addSchema=E,this.addMetaSchema=x,this.validateSchema=w,this.getSchema=P,this.removeSchema=function(e){if(e instanceof RegExp)return S(r._schemas,e),void S(r._refs,e);switch(typeof e){case"undefined":return S(r._schemas),S(r._refs),void r._cache.clear();case"string":var t=_(e);return t&&r._cache.del(t.jsonStr),delete r._schemas[e],void delete r._refs[e];case"object":var a=n(e);r._cache.del(a);var o=e.id;o&&(o=i.normalizeId(o),delete r._schemas[o],delete r._refs[o])}},this.addFormat=k,this.errorsText=N,this._addSchema=j,this._compile=C,t.loopRequired=t.loopRequired||1/0,(t.async||t.transpile)&&u.setup(t),!0===t.beautify&&(t.beautify={indent_size:2}),"property"==t.errorDataPath&&(t._errorDataPathProperty=!0),this._metaOpts=function(){for(var e=d.copy(r._opts),t=0;t<y.length;t++)delete e[y[t]];return e}(),t.formats&&function(){for(var e in r._opts.formats){var t=r._opts.formats[e];k(e,t)}}(),function(){if(!1!==r._opts.meta){var t=e("./refs/json-schema-draft-04.json");x(t,m,!0),r._refs["http://json-schema.org/schema"]=m}}(),t.v5&&c.enable(this),"object"==typeof t.meta&&x(t.meta),function(){var e=r._opts.schemas;if(!e)return;if(Array.isArray(e))E(e);else for(var t in e)E(e[t],t)}()}},{"./async":9,"./cache":10,"./compile":14,"./compile/formats":13,"./compile/resolve":15,"./compile/rules":16,"./compile/schema_obj":17,"./compile/util":19,"./compile/validation_error":20,"./keyword":45,"./refs/json-schema-draft-04.json":46,"./v5":48,co:49,"json-stable-stringify":51}],9:[function(e,t,r){"use strict";t.exports={setup:function e(t,r){!1!==r&&(r=!0);var a,i=t.async,h=t.transpile;switch(typeof h){case"string":var c=n[h];if(!c)throw new Error("bad transpiler: "+h);return t._transpileFunc=c(t,r);case"undefined":case"boolean":if("string"==typeof i){if(!(a=s[i]))throw new Error("bad async mode: "+i);return t.transpile=a(t,r)}for(var d=0;d<l.length;d++){var u=l[d];if(e(u,!1))return o.copy(u,t),t.transpile}throw new Error("generators, nodent and regenerator are not available");case"function":return t._transpileFunc=t.transpile;default:throw new Error("bad transpiler: "+h)}},compile:function(e,t){var r,a=this;try{r=this._addSchema(e)}catch(e){return void setTimeout(function(){t(e)})}if(r.validate)setTimeout(function(){t(null,r.validate)});else{if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");!function e(t,r,i){var o;try{o=a.compile(t)}catch(i){return void(i.missingSchema?function s(i){var o=i.missingSchema;if(a._refs[o]||a._schemas[o])return r(new Error("Schema "+o+" is loaded but "+i.missingRef+" cannot be resolved"));var s=a._loadingSchemas[o];s?"function"==typeof s?a._loadingSchemas[o]=[s,n]:s[s.length]=n:(a._loadingSchemas[o]=n,a._opts.loadSchema(o,function(e,t){var r=a._loadingSchemas[o];if(delete a._loadingSchemas[o],"function"==typeof r)r(e,t);else for(var i=0;i<r.length;i++)r[i](e,t)}));function n(i,s){if(i)return r(i);if(!a._refs[o]&&!a._schemas[o])try{a.addSchema(s,o)}catch(e){return void r(e)}!function(t,r,i){var o;try{o=a.compile(t)}catch(e){return void(e.missingSchema?s(e):n(e))}n(null,o);function s(i){var o=i.missingSchema;if(a._refs[o]||a._schemas[o])return r(new Error("Schema "+o+" is loaded but "+i.missingRef+" cannot be resolved"));var s=a._loadingSchemas[o];function n(i,s){if(i)return r(i);if(!a._refs[o]&&!a._schemas[o])try{a.addSchema(s,o)}catch(e){return void r(e)}e(t,r)}s?"function"==typeof s?a._loadingSchemas[o]=[s,n]:s[s.length]=n:(a._loadingSchemas[o]=n,a._opts.loadSchema(o,function(e,t){var r=a._loadingSchemas[o];if(delete a._loadingSchemas[o],"function"==typeof r)r(e,t);else for(var i=0;i<r.length;i++)r[i](e,t)}))}function n(e,t){if(!i)return r(e,t);setTimeout(function(){r(e,t)})}}(t,r)}}(i):n(i))}n(null,o);function s(i){var o=i.missingSchema;if(a._refs[o]||a._schemas[o])return r(new Error("Schema "+o+" is loaded but "+i.missingRef+" cannot be resolved"));var s=a._loadingSchemas[o];function n(i,s){if(i)return r(i);if(!a._refs[o]&&!a._schemas[o])try{a.addSchema(s,o)}catch(e){return void r(e)}e(t,r)}s?"function"==typeof s?a._loadingSchemas[o]=[s,n]:s[s.length]=n:(a._loadingSchemas[o]=n,a._opts.loadSchema(o,function(e,t){var r=a._loadingSchemas[o];if(delete a._loadingSchemas[o],"function"==typeof r)r(e,t);else for(var i=0;i<r.length;i++)r[i](e,t)}))}function n(e,t){if(!i)return r(e,t);setTimeout(function(){r(e,t)})}}(e,t,!0)}}};var a,i,o=e("./compile/util"),s={"*":h,"co*":h,es7:function(e,t){try{return new Function("(async function(){})()")(),!0}catch(e){if(t)throw new Error("es7 async functions not supported")}}},n={nodent:function(t,r){try{if(!i){i=e("nodent")({log:!1,dontInstallRequireHook:!0})}return"es7"!=t.async&&(t.async&&!0!==t.async&&console.warn("nodent transpiles only es7 async functions"),t.async="es7"),d}catch(e){if(r)throw new Error("nodent not available")}},regenerator:function(t,r){try{if(!a){(a=e("regenerator")).runtime()}return t.async&&!0!==t.async||(t.async="es7"),c}catch(e){if(r)throw new Error("regenerator not available")}}},l=[{async:"co*"},{async:"es7",transpile:"nodent"},{async:"co*",transpile:"regenerator"}];function h(e,t){try{return new Function("(function*(){})()")(),!0}catch(e){if(t)throw new Error("generators not supported")}}function c(e){return a.compile(e).code}function d(e){return i.compile(e,"",{promises:!0,sourcemap:!1}).code}},{"./compile/util":19}],10:[function(e,t,r){"use strict";var a=t.exports=function(){this._cache={}};a.prototype.put=function(e,t){this._cache[e]=t},a.prototype.get=function(e){return this._cache[e]},a.prototype.del=function(e){delete this._cache[e]},a.prototype.clear=function(){this._cache={}}},{}],11:[function(e,t,r){"use strict";t.exports={$ref:e("../dotjs/ref"),allOf:e("../dotjs/allOf"),anyOf:e("../dotjs/anyOf"),dependencies:e("../dotjs/dependencies"),enum:e("../dotjs/enum"),format:e("../dotjs/format"),items:e("../dotjs/items"),maximum:e("../dotjs/_limit"),minimum:e("../dotjs/_limit"),maxItems:e("../dotjs/_limitItems"),minItems:e("../dotjs/_limitItems"),maxLength:e("../dotjs/_limitLength"),minLength:e("../dotjs/_limitLength"),maxProperties:e("../dotjs/_limitProperties"),minProperties:e("../dotjs/_limitProperties"),multipleOf:e("../dotjs/multipleOf"),not:e("../dotjs/not"),oneOf:e("../dotjs/oneOf"),pattern:e("../dotjs/pattern"),properties:e("../dotjs/properties"),required:e("../dotjs/required"),uniqueItems:e("../dotjs/uniqueItems"),validate:e("../dotjs/validate")}},{"../dotjs/_limit":22,"../dotjs/_limitItems":23,"../dotjs/_limitLength":24,"../dotjs/_limitProperties":25,"../dotjs/allOf":26,"../dotjs/anyOf":27,"../dotjs/dependencies":30,"../dotjs/enum":31,"../dotjs/format":32,"../dotjs/items":33,"../dotjs/multipleOf":34,"../dotjs/not":35,"../dotjs/oneOf":36,"../dotjs/pattern":37,"../dotjs/properties":39,"../dotjs/ref":40,"../dotjs/required":41,"../dotjs/uniqueItems":43,"../dotjs/validate":44}],12:[function(e,t,r){"use strict";t.exports=function e(t,r){if(t===r)return!0;var a,i=Array.isArray(t),o=Array.isArray(r);if(i&&o){if(t.length!=r.length)return!1;for(a=0;a<t.length;a++)if(!e(t[a],r[a]))return!1;return!0}if(i!=o)return!1;if(t&&r&&"object"==typeof t&&"object"==typeof r){var s=Object.keys(t);if(s.length!==Object.keys(r).length)return!1;var n=t instanceof Date,l=r instanceof Date;if(n&&l)return t.getTime()==r.getTime();if(n!=l)return!1;var h=t instanceof RegExp,c=r instanceof RegExp;if(h&&c)return t.toString()==r.toString();if(h!=c)return!1;for(a=0;a<s.length;a++)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=0;a<s.length;a++)if(!e(t[s[a]],r[s[a]]))return!1;return!0}return!1}},{}],13:[function(e,t,r){"use strict";var a=e("./util"),i=/^\d\d\d\d-(\d\d)-(\d\d)$/,o=[0,31,29,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,n=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,l=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:\#(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,h=/^(?:urn\:uuid\:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,c=/^(?:\/(?:[^~\/]|~0|~1)*)*$|^\#(?:\/(?:[a-z0-9_\-\.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,d=/^(?:0|[1-9][0-9]*)(?:\#|(?:\/(?:[^~\/]|~0|~1)*)*)$/;function u(e){e="full"==e?"full":"fast";var t=a.copy(u[e]);for(var r in u.compare)t[r]={validate:t[r],compare:u.compare[r]};return t}function p(e){var t=e.match(i);if(!t)return!1;var r=+t[1],a=+t[2];return r>=1&&r<=12&&a>=1&&a<=o[r]}function f(e,t){var r=e.match(s);if(!r)return!1;var a=r[1],i=r[2],o=r[3],n=r[5];return a<=23&&i<=59&&o<=59&&(!t||n)}t.exports=u,u.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*)?(?:\:|\/)\/?[^\s]*$/i,email:/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:n,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:g,uuid:h,"json-pointer":c,"relative-json-pointer":d},u.full={date:p,time:f,"date-time":function(e){var t=e.split(m);return 2==t.length&&p(t[0])&&f(t[1],!0)},uri:function(e){return v.test(e)&&l.test(e)},email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&''*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function(e){return e.length<=255&&n.test(e)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:g,uuid:h,"json-pointer":c,"relative-json-pointer":d},u.compare={date:y,time:b,"date-time":function(e,t){if(!e||!t)return;e=e.split(m),t=t.split(m);var r=y(e[0],t[0]);if(void 0===r)return;return r||b(e[1],t[1])}};var m=/t|\s/i;var v=/\/|\:/;function g(e){try{return new RegExp(e),!0}catch(e){return!1}}function y(e,t){if(e&&t)return e>t?1:e<t?-1:e===t?0:void 0}function b(e,t){if(e&&t&&(e=e.match(s),t=t.match(s),e&&t))return(e=e[1]+e[2]+e[3]+(e[4]||""))>(t=t[1]+t[2]+t[3]+(t[4]||""))?1:e<t?-1:e===t?0:void 0}},{"./util":19}],14:[function(e,t,r){"use strict";var a,i=e("./resolve"),o=e("./util"),s=e("json-stable-stringify"),n=e("../async");var l=e("../dotjs/validate"),h=e("co"),c=o.ucs2length,d=e("./equal"),u=e("./validation_error");function p(e,t,r){for(var a=0;a<this._compilations.length;a++){var i=this._compilations[a];if(i.schema==e&&i.root==t&&i.baseId==r)return a}return-1}function f(e,t){return"var pattern"+e+" = new RegExp("+o.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function v(e,t){return t[e]?"var refVal"+e+" = refVal["+e+"];":""}function g(e){return"var customRule"+e+" = customRules["+e+"];"}function y(e,t){if(!e.length)return"";for(var r="",a=0;a<e.length;a++)r+=t(a,e);return r}t.exports=function t(r,b,E,x){var w=this,P=this._opts,_=[void 0],S={},j=[],C={},N=[],k={},O=[],A=!1!==P.sourceCode;b=b||{schema:r,refVal:_,refs:S};var T=function(e,t,r){var a=p.call(this,e,t,r);return a>=0?{index:a,compiling:!0}:(a=this._compilations.length,this._compilations[a]={schema:e,root:t,baseId:r},{index:a,compiling:!1})}.call(this,r,b,x);var D=this._compilations[T.index];if(T.compiling)return D.callValidate=function e(){var t=D.validate;var r=t.apply(null,arguments);e.errors=t.errors;return r};var $=this._formats;var I=this.RULES;try{var R=F(r,b,E,x);D.validate=R;var L=D.callValidate;return L&&(L.schema=R.schema,L.errors=null,L.refs=R.refs,L.refVal=R.refVal,L.root=R.root,L.$async=R.$async,A&&(L.sourceCode=R.sourceCode)),R}finally{(function(e,t,r){var a=p.call(this,e,t,r);a>=0&&this._compilations.splice(a,1)}).call(this,r,b,x)}function F(r,s,p,E){var x=!s||s&&s.schema==r;if(s.schema!=b.schema)return t.call(w,r,s,p,E);var C=!0===r.$async;C&&!P.transpile&&n.setup(P);var k=l({isTop:!0,schema:r,isRoot:x,baseId:E,root:s,schemaPath:"",errSchemaPath:"#",errorPath:'""',RULES:I,validate:l,util:o,resolve:i,resolveRef:M,usePattern:U,useDefault:q,useCustomRule:H,opts:P,formats:$,self:w});k=y(_,v)+y(j,f)+y(N,m)+y(O,g)+k,P.beautify&&(!function(){if(void 0===a)try{a=e("js-beautify").js_beautify}catch(e){a=!1}}(),a?k=a(k,P.beautify):console.error('"npm install js-beautify" to use beautify option'));var T,D,R=P._transpileFunc;try{D=C&&R?R(k):k;var L=new Function("self","RULES","formats","root","refVal","defaults","customRules","co","equal","ucs2length","ValidationError",D);T=L(w,I,$,b,_,N,O,h,d,c,u),_[0]=T}catch(e){throw console.error("Error compiling schema, function code:",D),e}return T.schema=r,T.errors=null,T.refs=S,T.refVal=_,T.root=x?T:s,C&&(T.$async=!0),A&&(T.sourceCode=k),!0===P.sourceCode&&(T.source={patterns:j,defaults:N}),T}function M(e,r,a){r=i.url(e,r);var o,s,n=S[r];if(void 0!==n)return B(o=_[n],s="refVal["+n+"]");if(!a&&b.refs){var l=b.refs[r];if(void 0!==l)return o=b.refVal[l],s=V(r,o),B(o,s)}s=V(r);var h,c,d=i.call(w,F,b,r);if(!d){var u=E&&E[r];u&&(d=i.inlineRef(u,P.inlineRefs)?u:t.call(w,u,b,E,e))}return d?(h=d,c=S[r],_[c]=h,B(d,s)):void 0}function V(e,t){var r=_.length;return _[r]=t,S[e]=r,"refVal"+r}function B(e,t){return"object"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&e.$async}}function U(e){var t=C[e];return void 0===t&&(t=C[e]=j.length,j[t]=e),"pattern"+t}function q(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return o.toQuotedString(e);case"object":if(null===e)return"null";var t=s(e),r=k[t];return void 0===r&&(r=k[t]=N.length,N[r]=e),"default"+r}}function H(e,t,r,a){var i=e.definition.validateSchema;if(i&&!1!==w._opts.validateSchema){var o=i(t);if(!o){var s="keyword schema is invalid: "+w.errorsText(i.errors);if("log"!=w._opts.validateSchema)throw new Error(s);console.error(s)}}var n,l=e.definition.compile,h=e.definition.inline,c=e.definition.macro;l?n=l.call(w,t,r,a):c?(n=c.call(w,t,r,a),!1!==P.validateSchema&&w.validateSchema(n,!0)):n=h?h.call(w,a,e.keyword,t,r):e.definition.validate;var d=O.length;return O[d]=n,{code:"customRule"+d,validate:n}}}},{"../async":9,"../dotjs/validate":44,"./equal":12,"./resolve":15,"./util":19,"./validation_error":20,co:49,"json-stable-stringify":51}],15:[function(e,t,r){"use strict";var a=e("url"),i=e("./equal"),o=e("./util"),s=e("./schema_obj");function n(e,t,r){var a=this._refs[r];if("string"==typeof a){if(!this._refs[a])return n.call(this,e,t,a);a=this._refs[a]}if((a=a||this._schemas[r])instanceof s)return u(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var i,o,h,c=l.call(this,t,r);return c&&(i=c.schema,t=c.root,h=c.baseId),i instanceof s?o=i.validate||e.call(this,i.schema,t,void 0,h):i&&(o=u(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,h)),o}function l(e,t){var r=a.parse(t,!1,!0),i=f(r),o=p(e.schema.id);if(i!==o){var n=v(i),h=this._refs[n];if("string"==typeof h)return function(e,t,r){var a=l.call(this,e,t);if(a){var i=a.schema,o=a.baseId;return e=a.root,i.id&&(o=g(o,i.id)),c.call(this,r,o,i,e)}}.call(this,e,h,r);if(h instanceof s)h.validate||this._compile(h),e=h;else{if(!((h=this._schemas[n])instanceof s))return;if(h.validate||this._compile(h),n==v(t))return{schema:h,root:e,baseId:o};e=h}if(!e.schema)return;o=p(e.schema.id)}return c.call(this,r,o,e.schema,e)}t.exports=n,n.normalizeId=v,n.fullPath=p,n.url=g,n.ids=function(e){var t=v(e.id),r={};return function e(t,s,n){if(Array.isArray(t))for(var l=0;l<t.length;l++)e.call(this,t[l],s+"/"+l,n);else if(t&&"object"==typeof t){if("string"==typeof t.id){var h=n=n?a.resolve(n,t.id):t.id;h=v(h);var c=this._refs[h];if("string"==typeof c&&(c=this._refs[c]),c&&c.schema){if(!i(t,c.schema))throw new Error('id "'+h+'" resolves to more than one schema')}else if(h!=v(s))if("#"==h[0]){if(r[h]&&!i(t,r[h]))throw new Error('id "'+h+'" resolves to more than one schema');r[h]=t}else this._refs[h]=s}for(var d in t)e.call(this,t[d],s+"/"+o.escapeFragment(d),n)}}.call(this,e,p(t,!1),t),r},n.inlineRef=u,n.schema=l;var h=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function c(e,t,r,a){if(e.hash=e.hash||"","#/"==e.hash.slice(0,2)){for(var i=e.hash.split("/"),s=1;s<i.length;s++){var n=i[s];if(n){if(!(r=r[n=o.unescapeFragment(n)]))break;if(r.id&&!h[n]&&(t=g(t,r.id)),r.$ref){var c=g(t,r.$ref),d=l.call(this,a,c);d&&(r=d.schema,a=d.root,t=d.baseId)}}}return r&&r!=a.schema?{schema:r,root:a,baseId:t}:void 0}}var d=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function u(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var a=0;a<t.length;a++)if("object"==typeof(r=t[a])&&!e(r))return!1}else for(var i in t){if("$ref"==i)return!1;if("object"==typeof(r=t[i])&&!e(r))return!1}return!0}(e):t?function e(t){var r,a=0;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(r=t[i])&&(a+=e(r)),a==1/0)return 1/0}else for(var o in t){if("$ref"==o)return 1/0;if(d[o])a++;else if("object"==typeof(r=t[o])&&(a+=e(r)+1),a==1/0)return 1/0}return a}(e)<=t:void 0)}function p(e,t){return!1!==t&&(e=v(e)),f(a.parse(e,!1,!0))}function f(e){var t=e.protocol||"//"==e.href.slice(0,2)?"//":"";return(e.protocol||"")+t+(e.host||"")+(e.path||"")+"#"}var m=/#\/?$/;function v(e){return e?e.replace(m,""):""}function g(e,t){return t=v(t),a.resolve(e,t)}},{"./equal":12,"./schema_obj":17,"./util":19,url:5}],16:[function(e,t,r){"use strict";var a=e("./_rules"),i=e("./util").toHash;t.exports=function(){var e=[{type:"number",rules:["maximum","minimum","multipleOf"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","uniqueItems","items"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","properties"]},{rules:["$ref","enum","not","anyOf","oneOf","allOf"]}],t=["type","additionalProperties","patternProperties"];return e.all=i(t),e.forEach(function(r){r.rules=r.rules.map(function(r){return t.push(r),e.all[r]={keyword:r,code:a[r]}})}),e.keywords=i(t.concat(["additionalItems","$schema","id","title","description","default"])),e.types=i(["number","integer","string","array","object","boolean","null"]),e.custom={},e}},{"./_rules":11,"./util":19}],17:[function(e,t,r){"use strict";var a=e("./util");t.exports=function(e){a.copy(e,this)}},{"./util":19}],18:[function(e,t,r){"use strict";t.exports=function(e){for(var t,r=0,a=e.length,i=0;i<a;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r}},{}],19:[function(e,t,r){"use strict";function a(e,t,r){var a=r?" !== ":" === ",i=r?" || ":" && ",o=r?"!":"",s=r?"":"!";switch(e){case"null":return t+a+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+i+"typeof "+t+a+'"object"'+i+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+a+'"number"'+i+s+"("+t+" % 1)"+i+t+a+t+")";default:return"typeof "+t+a+'"'+e+'"'}}t.exports={copy:function(e,t){t=t||{};for(var r in e)t[r]=e[r];return t},checkDataType:a,checkDataTypes:function(e,t){switch(e.length){case 1:return a(e[0],t,!0);default:var r="",i=o(e);i.array&&i.object&&(r=i.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer;for(var s in i)r+=(r?" && ":"")+a(s,t,!0);return r}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],a=0;a<t.length;a++){var o=t[a];i[o]?r[r.length]=o:"array"===e&&"array"===o&&(r[r.length]=o)}if(r.length)return r}else{if(i[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:o,getProperty:l,escapeQuotes:h,ucs2length:e("./ucs2length"),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function(e){return e.replace(c,"").replace(d,"").replace(u,"if (!($1))")},cleanUpVarErrors:function(e,t){var r=e.match(p);return r&&2===r.length?t?e.replace(m,"").replace(y,b):e.replace(f,"").replace(v,g):e},schemaHasRules:function(e,t){for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){for(var a in e)if(a!=r&&t[a])return!0},stableStringify:e("json-stable-stringify"),toQuotedString:E,getPathExpr:function(e,t,r,a){return P(e,r?"'/' + "+t+(a?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):a?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var a=E(r?"/"+_(t):l(t));return P(e,a)},getData:function(e,t,r){var a,i,o,s;if(""===e)return"rootData";if("/"==e[0]){if(!x.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,o="rootData"}else{if(!(s=e.match(w)))throw new Error("Invalid JSON-pointer: "+e);if(a=+s[1],"#"==(i=s[2])){if(a>=t)throw new Error("Cannot access property/index "+a+" levels up, current level is "+t);return r[t-a]}if(a>t)throw new Error("Cannot access data "+a+" levels up, current level is "+t);if(o="data"+(t-a||""),!i)return o}for(var n=o,h=i.split("/"),c=0;c<h.length;c++){var d=h[c];d&&(o+=l(S(d)),n+=" && "+o)}return n},unescapeFragment:function(e){return S(decodeURIComponent(e))},escapeFragment:function(e){return encodeURIComponent(_(e))},escapeJsonPointer:_};var i=o(["string","number","integer","boolean","null"]);function o(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var s=/^[a-z$_][a-z$_0-9]*$/i,n=/'|\\/g;function l(e){return"number"==typeof e?"["+e+"]":s.test(e)?"."+e:"['"+h(e)+"']"}function h(e){return e.replace(n,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var c=/else\s*{\s*}/g,d=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,u=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var p=/[^v\.]errors/g,f=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,m=/var errors = 0;|var vErrors = null;/g,v="return errors === 0;",g="validate.errors = null; return true;",y=/if \(errors === 0\) return true;\s*else throw new ValidationError\(vErrors\);/,b="return true;";function E(e){return"'"+h(e)+"'"}var x=/^\/(?:[^~]|~0|~1)*$/,w=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function P(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function _(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function S(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},{"./ucs2length":18,"json-stable-stringify":51}],20:[function(e,t,r){"use strict";function a(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}t.exports=a,a.prototype=Object.create(Error.prototype),a.prototype.constructor=a},{}],21:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(i||""),c="valid"+a;if(r+="var "+c+" = undefined;",!1===e.opts.format)return r+=" "+c+" = true; ";var d=e.schema.format,u=e.opts.v5&&d.$data,p="";if(u){var f=e.util.getData(d.$data,i,e.dataPathArr);r+=" var "+(m="format"+a)+" = formats["+f+"] , "+(v="compare"+a)+" = "+m+" && "+m+".compare;"}else{var m;if(!(m=e.formats[d])||!m.compare)return r+="  "+c+" = true; ";var v="formats"+e.util.getProperty(d)+".compare"}var g,y="formatMaximum"==t,b="formatExclusive"+(y?"Maximum":"Minimum"),E=e.schema[b],x=e.opts.v5&&E&&E.$data,w=y?"<":">",P="result"+a,_=e.opts.v5&&o&&o.$data;if(_?(r+=" var schema"+a+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; ",g="schema"+a):g=o,x){var S=e.util.getData(E.$data,i,e.dataPathArr),j="exclusive"+a,C="' + "+(O="op"+a)+" + '";r+=" var schemaExcl"+a+" = "+S+"; ",r+=" if (typeof "+(S="schemaExcl"+a)+" != 'boolean' && "+S+" !== undefined) { "+c+" = false; ";var N=b;(A=A||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: '"+(N||"_formatExclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: '"+b+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var k=r;r=A.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+k+"]); ":r+=" validate.errors = ["+k+"]; return false; ":r+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }  ",l&&(p+="}",r+=" else { "),_&&(r+=" if ("+g+" === undefined) "+c+" = true; else if (typeof "+g+" != 'string') "+c+" = false; else { ",p+="}"),u&&(r+=" if (!"+v+") "+c+" = true; else { ",p+="}"),r+=" var "+P+" = "+v+"("+h+",  ",r+=_?""+g:""+e.util.toQuotedString(o),r+=" ); if ("+P+" === undefined) "+c+" = false; var "+j+" = "+S+" === true; if ("+c+" === undefined) { "+c+" = "+j+" ? "+P+" "+w+" 0 : "+P+" "+w+"= 0; } if (!"+c+") var op"+a+" = "+j+" ? '"+w+"' : '"+w+"=';"}else{C=w;(j=!0===E)||(C+="=");var O="'"+C+"'";_&&(r+=" if ("+g+" === undefined) "+c+" = true; else if (typeof "+g+" != 'string') "+c+" = false; else { ",p+="}"),u&&(r+=" if (!"+v+") "+c+" = true; else { ",p+="}"),r+=" var "+P+" = "+v+"("+h+",  ",r+=_?""+g:""+e.util.toQuotedString(o),r+=" ); if ("+P+" === undefined) "+c+" = false; if ("+c+" === undefined) "+c+" = "+P+" "+w,j||(r+="="),r+=" 0;"}r+=p+"if (!"+c+") { ";var A;N=t;(A=A||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: '"+(N||"_formatLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { comparison: "+O+", limit:  ",r+=_?""+g:""+e.util.toQuotedString(o),r+=" , exclusive: "+j+" } ",!1!==e.opts.messages&&(r+=" , message: 'should be "+C+' "',r+=_?"' + "+g+" + '":""+e.util.escapeQuotes(o),r+="\"' "),e.opts.verbose&&(r+=" , schema:  ",r+=_?"validate.schema"+s:""+e.util.toQuotedString(o),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";k=r;return r=A.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+k+"]); ":r+=" validate.errors = ["+k+"]; return false; ":r+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="}"}},{}],22:[function(e,t,r){"use strict";t.exports=function(e,t){var r,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d=e.opts.v5&&s&&s.$data;d?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",r="schema"+i):r=s;var u="maximum"==t,p=u?"exclusiveMaximum":"exclusiveMinimum",f=e.schema[p],m=e.opts.v5&&f&&f.$data,v=u?"<":">",g=u?">":"<";if(m){var y=e.util.getData(f.$data,o,e.dataPathArr),b="exclusive"+i,E="' + "+(P="op"+i)+" + '";a+=" var schemaExcl"+i+" = "+y+"; ",a+=" var exclusive"+i+"; if (typeof "+(y="schemaExcl"+i)+" != 'boolean' && typeof "+y+" != 'undefined') { ";var x=p;(_=_||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(x||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(a+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),a+=" } "):a+=" {} ";var w=a;a=_.pop(),!e.compositeRule&&h?e.async?a+=" throw new ValidationError(["+w+"]); ":a+=" validate.errors = ["+w+"]; return false; ":a+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else if( ",d&&(a+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),a+=" ((exclusive"+i+" = "+y+" === true) ? "+c+" "+g+"= "+r+" : "+c+" "+g+" "+r+") || "+c+" !== "+c+") { var op"+i+" = exclusive"+i+" ? '"+v+"' : '"+v+"=';"}else{E=v;(b=!0===f)||(E+="=");var P="'"+E+"'";a+=" if ( ",d&&(a+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),a+=" "+c+" "+g,b&&(a+="="),a+=" "+r+" || "+c+" !== "+c+") {"}var _;x=t;(_=_||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(x||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+P+", limit: "+r+", exclusive: "+b+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be "+E+" ",a+=d?"' + "+r:s+"'"),e.opts.verbose&&(a+=" , schema:  ",a+=d?"validate.schema"+n:""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),a+=" } "):a+=" {} ";w=a;return a=_.pop(),!e.compositeRule&&h?e.async?a+=" throw new ValidationError(["+w+"]); ":a+=" validate.errors = ["+w+"]; return false; ":a+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",h&&(a+=" else { "),a}},{}],23:[function(e,t,r){"use strict";t.exports=function(e,t){var r,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d=e.opts.v5&&s&&s.$data;d?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",r="schema"+i):r=s,a+="if ( ",d&&(a+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),a+=" "+c+".length "+("maxItems"==t?">":"<")+" "+r+") { ";var u=t,p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(u||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxItems"==t?"more":"less",a+=" than ",a+=d?"' + "+r+" + '":""+s,a+=" items' "),e.opts.verbose&&(a+=" , schema:  ",a+=d?"validate.schema"+n:""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),a+=" } "):a+=" {} ";var f=a;return a=p.pop(),!e.compositeRule&&h?e.async?a+=" throw new ValidationError(["+f+"]); ":a+=" validate.errors = ["+f+"]; return false; ":a+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",h&&(a+=" else { "),a}},{}],24:[function(e,t,r){"use strict";t.exports=function(e,t){var r,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d=e.opts.v5&&s&&s.$data;d?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",r="schema"+i):r=s;var u="maxLength"==t?">":"<";a+="if ( ",d&&(a+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),!1===e.opts.unicode?a+=" "+c+".length ":a+=" ucs2length("+c+") ",a+=" "+u+" "+r+") { ";var p=t,f=f||[];f.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be ",a+="maxLength"==t?"longer":"shorter",a+=" than ",a+=d?"' + "+r+" + '":""+s,a+=" characters' "),e.opts.verbose&&(a+=" , schema:  ",a+=d?"validate.schema"+n:""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),a+=" } "):a+=" {} ";var m=a;return a=f.pop(),!e.compositeRule&&h?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",h&&(a+=" else { "),a}},{}],25:[function(e,t,r){"use strict";t.exports=function(e,t){var r,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d=e.opts.v5&&s&&s.$data;d?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",r="schema"+i):r=s,a+="if ( ",d&&(a+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),a+=" Object.keys("+c+").length "+("maxProperties"==t?">":"<")+" "+r+") { ";var u=t,p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(u||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxProperties"==t?"more":"less",a+=" than ",a+=d?"' + "+r+" + '":""+s,a+=" properties' "),e.opts.verbose&&(a+=" , schema:  ",a+=d?"validate.schema"+n:""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),a+=" } "):a+=" {} ";var f=a;return a=p.pop(),!e.compositeRule&&h?e.async?a+=" throw new ValidationError(["+f+"]); ":a+=" validate.errors = ["+f+"]; return false; ":a+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",h&&(a+=" else { "),a}},{}],26:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.schema[t],i=e.schemaPath+e.util.getProperty(t),o=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,n=e.util.copy(e),l="";n.level++;var h="valid"+n.level,c=n.baseId,d=!0,u=a;if(u)for(var p,f=-1,m=u.length-1;f<m;)p=u[f+=1],e.util.schemaHasRules(p,e.RULES.all)&&(d=!1,n.schema=p,n.schemaPath=i+"["+f+"]",n.errSchemaPath=o+"/"+f,r+="  "+e.validate(n)+" ",n.baseId=c,s&&(r+=" if ("+h+") { ",l+="}"));return s&&(r+=d?" if (true) { ":" "+l.slice(0,-1)+" "),r=e.util.cleanUpCode(r)}},{}],27:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(i||""),c="valid"+a,d="errs__"+a,u=e.util.copy(e),p="";u.level++;var f="valid"+u.level;if(o.every(function(t){return e.util.schemaHasRules(t,e.RULES.all)})){var m=u.baseId;r+=" var "+d+" = errors; var "+c+" = false;  ";var v=e.compositeRule;e.compositeRule=u.compositeRule=!0;var g=o;if(g)for(var y,b=-1,E=g.length-1;b<E;)y=g[b+=1],u.schema=y,u.schemaPath=s+"["+b+"]",u.errSchemaPath=n+"/"+b,r+="  "+e.validate(u)+" ",u.baseId=m,r+=" "+c+" = "+c+" || "+f+"; if (!"+c+") { ",p+="}";e.compositeRule=u.compositeRule=v,r+=" "+p+" if (!"+c+") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } "),r=e.util.cleanUpCode(r)}else l&&(r+=" if (true) { ");return r}},{}],28:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(i||""),c="valid"+a,d=e.opts.v5&&o&&o.$data;d&&(r+=" var schema"+a+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; "),d||(r+=" var schema"+a+" = validate.schema"+s+";"),r+="var "+c+" = equal("+h+", schema"+a+"); if (!"+c+") {   ";var u=u||[];u.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'constant' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var p=r;return r=u.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+p+"]); ":r+=" validate.errors = ["+p+"]; return false; ":r+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }"}},{}],29:[function(e,t,r){"use strict";t.exports=function(e,t){var r,a,i=" ",o=e.level,s=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(s||""),u="valid"+o,p="errs__"+o,f=e.opts.v5&&n&&n.$data;f?(i+=" var schema"+o+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ",a="schema"+o):a=n;var m,v,g,y,b,E=this,x="definition"+o,w=E.definition;if(f&&w.$data){b="keywordValidate"+o;var P=w.validateSchema;i+=" var "+x+" = RULES.custom['"+t+"'].definition; var "+b+" = "+x+".validate;"}else a="validate.schema"+l,b=(y=e.useCustomRule(E,n,e.schema,e)).code,m=w.compile,v=w.inline,g=w.macro;var _=b+".errors",S="i"+o,j="ruleErr"+o,C=w.async;if(C&&!e.async)throw new Error("async keyword in sync schema");if(v||g||(i+=_+" = null;"),i+="var "+p+" = errors;var "+u+";",P&&(i+=" "+u+" = "+x+".validateSchema("+a+"); if ("+u+") {"),v)w.statements?i+=" "+y.validate+" ":i+=" "+u+" = "+y.validate+"; ";else if(g){var N=e.util.copy(e);N.level++;var k="valid"+N.level;N.schema=y.validate,N.schemaPath="";var O=e.compositeRule;e.compositeRule=N.compositeRule=!0;var A=e.validate(N).replace(/validate\.schema/g,b);e.compositeRule=N.compositeRule=O,i+=" "+A}else{(I=I||[]).push(i),i="",i+="  "+b+".call( ",e.opts.passContext?i+="this":i+="self",m||!1===w.schema?i+=" , "+d+" ":i+=" , "+a+" , "+d+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var T=s?"data"+(s-1||""):"parentData",D=s?e.dataPathArr[s]:"parentDataProperty",$=i+=" , "+T+" , "+D+" , rootData )  ";i=I.pop(),!1===w.errors?(i+=" "+u+" = ",C&&(i+=""+e.yieldAwait),i+=$+"; "):i+=C?" var "+(_="customErrors"+o)+" = null; try { "+u+" = "+e.yieldAwait+$+"; } catch (e) { "+u+" = false; if (e instanceof ValidationError) "+_+" = e.errors; else throw e; } ":" "+_+" = null; "+u+" = "+$+"; "}if(w.modifying&&(i+=" "+d+" = "+T+"["+D+"];"),P&&(i+=" }"),w.valid)c&&(i+=" if (true) { ");else{var I;i+=" if ( ",void 0===w.valid?(i+=" !",i+=g?""+k:""+u):i+=" "+!w.valid+" ",i+=") { ",r=E.keyword,(I=I||[]).push(i),i="",(I=I||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { keyword: '"+E.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+E.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var R=i;i=I.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+R+"]); ":i+=" validate.errors = ["+R+"]; return false; ":i+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var L=i;i=I.pop(),v?w.errors?"full"!=w.errors&&(i+="  for (var "+S+"="+p+"; "+S+"<errors; "+S+"++) { var "+j+" = vErrors["+S+"]; if ("+j+".dataPath === undefined) "+j+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+j+".schemaPath === undefined) { "+j+'.schemaPath = "'+h+'"; } ',e.opts.verbose&&(i+=" "+j+".schema = "+a+"; "+j+".data = "+d+"; "),i+=" } "):!1===w.errors?i+=" "+L+" ":(i+=" if ("+p+" == errors) { "+L+" } else {  for (var "+S+"="+p+"; "+S+"<errors; "+S+"++) { var "+j+" = vErrors["+S+"]; if ("+j+".dataPath === undefined) "+j+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+j+".schemaPath === undefined) { "+j+'.schemaPath = "'+h+'"; } ',e.opts.verbose&&(i+=" "+j+".schema = "+a+"; "+j+".data = "+d+"; "),i+=" } } "):g?(i+="   var err =   ",!1!==e.createErrors?(i+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { keyword: '"+E.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+E.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):!1===w.errors?i+=" "+L+" ":(i+=" if (Array.isArray("+_+")) { if (vErrors === null) vErrors = "+_+"; else vErrors = vErrors.concat("+_+"); errors = vErrors.length;  for (var "+S+"="+p+"; "+S+"<errors; "+S+"++) { var "+j+" = vErrors["+S+"]; if ("+j+".dataPath === undefined) "+j+".dataPath = (dataPath || '') + "+e.errorPath+";  "+j+'.schemaPath = "'+h+'";  ',e.opts.verbose&&(i+=" "+j+".schema = "+a+"; "+j+".data = "+d+"; "),i+=" } } else { "+L+" } "),i+=" } ",c&&(i+=" else { ")}return i}},{}],30:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(i||""),c="errs__"+a,d=e.util.copy(e),u="";d.level++;var p="valid"+d.level,f={},m={};for(b in o){var v=o[b],g=Array.isArray(v)?m:f;g[b]=v}r+="var "+c+" = errors;";var y=e.errorPath;r+="var missing"+a+";";for(var b in m){if(g=m[b],r+=" if ("+h+e.util.getProperty(b)+" !== undefined ",l){r+=" && ( ";var E=g;if(E)for(var x,w=-1,P=E.length-1;w<P;){x=E[w+=1],w&&(r+=" || "),r+=" ( "+h+(T=e.util.getProperty(x))+" === undefined && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?x:T)+") ) "}r+=")) {  ";var _="missing"+a,S="' + "+_+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(y,_,!0):y+" + "+_);var j=j||[];j.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { property: '"+e.util.escapeQuotes(b)+"', missingProperty: '"+S+"', depsCount: "+g.length+", deps: '"+e.util.escapeQuotes(1==g.length?g[0]:g.join(", "))+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have ",1==g.length?r+="property "+e.util.escapeQuotes(g[0]):r+="properties "+e.util.escapeQuotes(g.join(", ")),r+=" when property "+e.util.escapeQuotes(b)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var C=r;r=j.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+C+"]); ":r+=" validate.errors = ["+C+"]; return false; ":r+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var N=g;if(N)for(var k,O=-1,A=N.length-1;O<A;){k=N[O+=1];var T=e.util.getProperty(k);S=e.util.escapeQuotes(k);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(y,k,e.opts.jsonPointers)),r+=" if ("+h+T+" === undefined) {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { property: '"+e.util.escapeQuotes(b)+"', missingProperty: '"+S+"', depsCount: "+g.length+", deps: '"+e.util.escapeQuotes(1==g.length?g[0]:g.join(", "))+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have ",1==g.length?r+="property "+e.util.escapeQuotes(g[0]):r+="properties "+e.util.escapeQuotes(g.join(", ")),r+=" when property "+e.util.escapeQuotes(b)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",l&&(u+="}",r+=" else { ")}e.errorPath=y;var D=d.baseId;for(var b in f){v=f[b];e.util.schemaHasRules(v,e.RULES.all)&&(r+=" "+p+" = true; if ("+h+e.util.getProperty(b)+" !== undefined) { ",d.schema=v,d.schemaPath=s+e.util.getProperty(b),d.errSchemaPath=n+"/"+e.util.escapeFragment(b),r+="  "+e.validate(d)+" ",d.baseId=D,r+=" }  ",l&&(r+=" if ("+p+") { ",u+="}"))}return l&&(r+="   "+u+" if ("+c+" == errors) {"),r=e.util.cleanUpCode(r)}},{}],31:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(i||""),c="valid"+a,d=e.opts.v5&&o&&o.$data;d&&(r+=" var schema"+a+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; ");var u="i"+a,p="schema"+a;d||(r+=" var "+p+" = validate.schema"+s+";"),r+="var "+c+";",d&&(r+=" if (schema"+a+" === undefined) "+c+" = true; else if (!Array.isArray(schema"+a+")) "+c+" = false; else {"),r+=c+" = false;for (var "+u+"=0; "+u+"<"+p+".length; "+u+"++) if (equal("+h+", "+p+"["+u+"])) { "+c+" = true; break; }",d&&(r+="  }  "),r+=" if (!"+c+") {   ";var f=f||[];f.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { allowedValues: schema"+a+" } ",!1!==e.opts.messages&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var m=r;return r=f.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+m+"]); ":r+=" validate.errors = ["+m+"]; return false; ":r+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",l&&(r+=" else { "),r}},{}],32:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(i||"");if(!1===e.opts.format)return l&&(r+=" if (true) { "),r;var c,d=e.opts.v5&&o&&o.$data;d?(r+=" var schema"+a+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; ",c="schema"+a):c=o;var u=e.opts.unknownFormats,p=Array.isArray(u);if(d){r+=" var "+(f="format"+a)+" = formats["+c+"]; var isObject"+a+" = typeof "+f+" == 'object' && !("+f+" instanceof RegExp) && "+f+".validate; if (isObject"+a+") { ",e.async&&(r+=" var async"+a+" = "+f+".async; "),r+=" "+f+" = "+f+".validate; } if (  ",d&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),r+=" (",(!0===u||p)&&(r+=" ("+c+" && !"+f+" ",p&&(r+=" && self._opts.unknownFormats.indexOf("+c+") == -1 "),r+=") || "),r+=" ("+f+" && !(typeof "+f+" == 'function' ? ",e.async?r+=" (async"+a+" ? "+e.yieldAwait+" "+f+"("+h+") : "+f+"("+h+")) ":r+=" "+f+"("+h+") ",r+=" : "+f+".test("+h+"))))) {"}else{var f;if(!(f=e.formats[o])){if(!0===u||p&&-1==u.indexOf(o))throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"');return p||(console.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),"ignore"!==u&&console.warn("In the next major version it will throw exception. See option unknownFormats for more information")),l&&(r+=" if (true) { "),r}var m="object"==typeof f&&!(f instanceof RegExp)&&f.validate;if(m){var v=!0===f.async;f=f.validate}if(v){if(!e.async)throw new Error("async format in sync schema");var g="formats"+e.util.getProperty(o)+".validate";r+=" if (!("+e.yieldAwait+" "+g+"("+h+"))) { "}else{r+=" if (! ";g="formats"+e.util.getProperty(o);m&&(g+=".validate"),r+="function"==typeof f?" "+g+"("+h+") ":" "+g+".test("+h+") ",r+=") { "}}var y=y||[];y.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { format:  ",r+=d?""+c:""+e.util.toQuotedString(o),r+="  } ",!1!==e.opts.messages&&(r+=" , message: 'should match format \"",r+=d?"' + "+c+" + '":""+e.util.escapeQuotes(o),r+="\"' "),e.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+s:""+e.util.toQuotedString(o),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var b=r;return r=y.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",l&&(r+=" else { "),r}},{}],33:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(i||""),c="valid"+a,d="errs__"+a,u=e.util.copy(e),p="";u.level++;var f="valid"+u.level,m="i"+a,v=u.dataLevel=e.dataLevel+1,g="data"+v,y=e.baseId;if(r+="var "+d+" = errors;var "+c+";",Array.isArray(o)){var b=e.schema.additionalItems;if(!1===b){r+=" "+c+" = "+h+".length <= "+o.length+"; ";var E=n;n=e.errSchemaPath+"/additionalItems",r+="  if (!"+c+") {   ";var x=x||[];x.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { limit: "+o.length+" } ",!1!==e.opts.messages&&(r+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var w=r;r=x.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",n=E,l&&(p+="}",r+=" else { ")}var P=o;if(P)for(var _,S=-1,j=P.length-1;S<j;)if(_=P[S+=1],e.util.schemaHasRules(_,e.RULES.all)){r+=" "+f+" = true; if ("+h+".length > "+S+") { ";var C=h+"["+S+"]";u.schema=_,u.schemaPath=s+"["+S+"]",u.errSchemaPath=n+"/"+S,u.errorPath=e.util.getPathExpr(e.errorPath,S,e.opts.jsonPointers,!0),u.dataPathArr[v]=S;var N=e.validate(u);u.baseId=y,e.util.varOccurences(N,g)<2?r+=" "+e.util.varReplace(N,g,C)+" ":r+=" var "+g+" = "+C+"; "+N+" ",r+=" }  ",l&&(r+=" if ("+f+") { ",p+="}")}if("object"==typeof b&&e.util.schemaHasRules(b,e.RULES.all)){u.schema=b,u.schemaPath=e.schemaPath+".additionalItems",u.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+f+" = true; if ("+h+".length > "+o.length+") {  for (var "+m+" = "+o.length+"; "+m+" < "+h+".length; "+m+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);C=h+"["+m+"]";u.dataPathArr[v]=m;N=e.validate(u);u.baseId=y,e.util.varOccurences(N,g)<2?r+=" "+e.util.varReplace(N,g,C)+" ":r+=" var "+g+" = "+C+"; "+N+" ",l&&(r+=" if (!"+f+") break; "),r+=" } }  ",l&&(r+=" if ("+f+") { ",p+="}")}}else if(e.util.schemaHasRules(o,e.RULES.all)){u.schema=o,u.schemaPath=s,u.errSchemaPath=n,r+="  for (var "+m+" = 0; "+m+" < "+h+".length; "+m+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);C=h+"["+m+"]";u.dataPathArr[v]=m;N=e.validate(u);u.baseId=y,e.util.varOccurences(N,g)<2?r+=" "+e.util.varReplace(N,g,C)+" ":r+=" var "+g+" = "+C+"; "+N+" ",l&&(r+=" if (!"+f+") break; "),r+=" }  ",l&&(r+=" if ("+f+") { ",p+="}")}return l&&(r+=" "+p+" if ("+d+" == errors) {"),r=e.util.cleanUpCode(r)}},{}],34:[function(e,t,r){"use strict";t.exports=function(e,t){var r,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d=e.opts.v5&&s&&s.$data;d?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",r="schema"+i):r=s,a+="var division"+i+";if (",d&&(a+=" "+r+" !== undefined && ( typeof "+r+" != 'number' || "),a+=" (division"+i+" = "+c+" / "+r+", ",e.opts.multipleOfPrecision?a+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+e.opts.multipleOfPrecision+" ":a+=" division"+i+" !== parseInt(division"+i+") ",a+=" ) ",d&&(a+="  )  "),a+=" ) {   ";var u=u||[];u.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+r+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be multiple of ",a+=d?"' + "+r:s+"'"),e.opts.verbose&&(a+=" , schema:  ",a+=d?"validate.schema"+n:""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),a+=" } "):a+=" {} ";var p=a;return a=u.pop(),!e.compositeRule&&h?e.async?a+=" throw new ValidationError(["+p+"]); ":a+=" validate.errors = ["+p+"]; return false; ":a+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",h&&(a+=" else { "),a}},{}],35:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(i||""),c="errs__"+a,d=e.util.copy(e);d.level++;var u="valid"+d.level;if(e.util.schemaHasRules(o,e.RULES.all)){d.schema=o,d.schemaPath=s,d.errSchemaPath=n,r+=" var "+c+" = errors;  ";var p,f=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(p=d.opts.allErrors,d.opts.allErrors=!1),r+=" "+e.validate(d)+" ",d.createErrors=!0,p&&(d.opts.allErrors=p),e.compositeRule=d.compositeRule=f,r+=" if ("+u+") {   ";var m=m||[];m.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var v=r;r=m.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(r+=" if (false) { ");return r}},{}],36:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(i||""),c="valid"+a,d="errs__"+a,u=e.util.copy(e),p="";u.level++;var f="valid"+u.level;r+="var "+d+" = errors;var prevValid"+a+" = false;var "+c+" = false;";var m=u.baseId,v=e.compositeRule;e.compositeRule=u.compositeRule=!0;var g=o;if(g)for(var y,b=-1,E=g.length-1;b<E;)y=g[b+=1],e.util.schemaHasRules(y,e.RULES.all)?(u.schema=y,u.schemaPath=s+"["+b+"]",u.errSchemaPath=n+"/"+b,r+="  "+e.validate(u)+" ",u.baseId=m):r+=" var "+f+" = true; ",b&&(r+=" if ("+f+" && prevValid"+a+") "+c+" = false; else { ",p+="}"),r+=" if ("+f+") "+c+" = prevValid"+a+" = true;";e.compositeRule=u.compositeRule=v,r+=p+"if (!"+c+") {   ";var x=x||[];x.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var w=r;return r=x.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r}},{}],37:[function(e,t,r){"use strict";t.exports=function(e,t){var r,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d=e.opts.v5&&s&&s.$data;d?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",r="schema"+i):r=s;var u=d?"(new RegExp("+r+"))":e.usePattern(s);a+="if ( ",d&&(a+=" ("+r+" !== undefined && typeof "+r+" != 'string') || "),a+=" !"+u+".test("+c+") ) {   ";var p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",a+=d?""+r:""+e.util.toQuotedString(s),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match pattern \"",a+=d?"' + "+r+" + '":""+e.util.escapeQuotes(s),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=d?"validate.schema"+n:""+e.util.toQuotedString(s),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),a+=" } "):a+=" {} ";var f=a;return a=p.pop(),!e.compositeRule&&h?e.async?a+=" throw new ValidationError(["+f+"]); ":a+=" validate.errors = ["+f+"]; return false; ":a+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",h&&(a+=" else { "),a}},{}],38:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(i||""),c="valid"+a,d="key"+a,u="patternMatched"+a,p="",f=e.opts.ownProperties;r+="var "+c+" = true;";var m=o;if(m)for(var v,g=-1,y=m.length-1;g<y;){v=m[g+=1],r+=" var "+u+" = false; for (var "+d+" in "+h+") {  ",f&&(r+=" if (!Object.prototype.hasOwnProperty.call("+h+", "+d+")) continue; "),r+=" "+u+" = "+e.usePattern(v)+".test("+d+"); if ("+u+") break; } ";var b=e.util.escapeQuotes(v);r+=" if (!"+u+") { "+c+" = false;  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'patternRequired' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { missingPattern: '"+b+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have property matching pattern \\'"+b+"\\'' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; }   ",l&&(p+="}",r+=" else { ")}return r+=""+p}},{}],39:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(i||""),c="valid"+a,d="errs__"+a,u=e.util.copy(e),p="";u.level++;var f="valid"+u.level,m="key"+a,v=u.dataLevel=e.dataLevel+1,g="data"+v,y=Object.keys(o||{}),b=e.schema.patternProperties||{},E=Object.keys(b),x=e.schema.additionalProperties,w=y.length||E.length,P=!1===x,_="object"==typeof x&&Object.keys(x).length,S=e.opts.removeAdditional,j=P||_||S,C=e.opts.ownProperties,N=e.baseId,k=e.schema.required;if(k&&(!e.opts.v5||!k.$data)&&k.length<e.opts.loopRequired)var O=e.util.toHash(k);if(e.opts.v5)var A=e.schema.patternGroups||{},T=Object.keys(A);if(r+="var "+d+" = errors;var "+f+" = true;",j){if(r+=" for (var "+m+" in "+h+") {  ",C&&(r+=" if (!Object.prototype.hasOwnProperty.call("+h+", "+m+")) continue; "),w){if(r+=" var isAdditional"+a+" = !(false ",y.length)if(y.length>5)r+=" || validate.schema"+s+"["+m+"] ";else{var D=y;if(D)for(var $=-1,I=D.length-1;$<I;)Y=D[$+=1],r+=" || "+m+" == "+e.util.toQuotedString(Y)+" "}if(E.length){var R=E;if(R)for(var L=-1,F=R.length-1;L<F;)oe=R[L+=1],r+=" || "+e.usePattern(oe)+".test("+m+") "}if(e.opts.v5&&T&&T.length){var M=T;if(M){L=-1;for(var V=M.length-1;L<V;)he=M[L+=1],r+=" || "+e.usePattern(he)+".test("+m+") "}}r+=" ); if (isAdditional"+a+") { "}if("all"==S)r+=" delete "+h+"["+m+"]; ";else{var B=e.errorPath,U="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),P)if(S)r+=" delete "+h+"["+m+"]; ";else{r+=" "+f+" = false; ";var q=n;n=e.errSchemaPath+"/additionalProperties",(ye=ye||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { additionalProperty: '"+U+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should NOT have additional properties' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var H=r;r=ye.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+H+"]); ":r+=" validate.errors = ["+H+"]; return false; ":r+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n=q,l&&(r+=" break; ")}else if(_)if("failing"==S){r+=" var "+d+" = errors;  ";var Q=e.compositeRule;e.compositeRule=u.compositeRule=!0,u.schema=x,u.schemaPath=e.schemaPath+".additionalProperties",u.errSchemaPath=e.errSchemaPath+"/additionalProperties",u.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var z=h+"["+m+"]";u.dataPathArr[v]=m;var J=e.validate(u);u.baseId=N,e.util.varOccurences(J,g)<2?r+=" "+e.util.varReplace(J,g,z)+" ":r+=" var "+g+" = "+z+"; "+J+" ",r+=" if (!"+f+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+h+"["+m+"]; }  ",e.compositeRule=u.compositeRule=Q}else{u.schema=x,u.schemaPath=e.schemaPath+".additionalProperties",u.errSchemaPath=e.errSchemaPath+"/additionalProperties",u.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);z=h+"["+m+"]";u.dataPathArr[v]=m;J=e.validate(u);u.baseId=N,e.util.varOccurences(J,g)<2?r+=" "+e.util.varReplace(J,g,z)+" ":r+=" var "+g+" = "+z+"; "+J+" ",l&&(r+=" if (!"+f+") break; ")}e.errorPath=B}w&&(r+=" } "),r+=" }  ",l&&(r+=" if ("+f+") { ",p+="}")}var K=e.opts.useDefaults&&!e.compositeRule;if(y.length){var G=y;if(G)for(var Y,X=-1,Z=G.length-1;X<Z;){var W=o[Y=G[X+=1]];if(e.util.schemaHasRules(W,e.RULES.all)){var ee=e.util.getProperty(Y),te=(z=h+ee,K&&void 0!==W.default);u.schema=W,u.schemaPath=s+ee,u.errSchemaPath=n+"/"+e.util.escapeFragment(Y),u.errorPath=e.util.getPath(e.errorPath,Y,e.opts.jsonPointers),u.dataPathArr[v]=e.util.toQuotedString(Y);J=e.validate(u);if(u.baseId=N,e.util.varOccurences(J,g)<2){J=e.util.varReplace(J,g,z);var re=z}else{re=g;r+=" var "+g+" = "+z+"; "}if(te)r+=" "+J+" ";else{if(O&&O[Y]){r+=" if ("+re+" === undefined) { "+f+" = false; ";B=e.errorPath,q=n;var ae=e.util.escapeQuotes(Y);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(B,Y,e.opts.jsonPointers)),n=e.errSchemaPath+"/required",(ye=ye||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { missingProperty: '"+ae+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+ae+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";H=r;r=ye.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+H+"]); ":r+=" validate.errors = ["+H+"]; return false; ":r+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n=q,e.errorPath=B,r+=" } else { "}else r+=l?" if ("+re+" === undefined) { "+f+" = true; } else { ":" if ("+re+" !== undefined) { ";r+=" "+J+" } "}}l&&(r+=" if ("+f+") { ",p+="}")}}var ie=E;if(ie)for(var oe,se=-1,ne=ie.length-1;se<ne;){W=b[oe=ie[se+=1]];if(e.util.schemaHasRules(W,e.RULES.all)){u.schema=W,u.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(oe),u.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(oe),r+=" for (var "+m+" in "+h+") {  ",C&&(r+=" if (!Object.prototype.hasOwnProperty.call("+h+", "+m+")) continue; "),r+=" if ("+e.usePattern(oe)+".test("+m+")) { ",u.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);z=h+"["+m+"]";u.dataPathArr[v]=m;J=e.validate(u);u.baseId=N,e.util.varOccurences(J,g)<2?r+=" "+e.util.varReplace(J,g,z)+" ":r+=" var "+g+" = "+z+"; "+J+" ",l&&(r+=" if (!"+f+") break; "),r+=" } ",l&&(r+=" else "+f+" = true; "),r+=" }  ",l&&(r+=" if ("+f+") { ",p+="}")}}if(e.opts.v5){var le=T;if(le)for(var he,ce=-1,de=le.length-1;ce<de;){var ue=A[he=le[ce+=1]];W=ue.schema;if(e.util.schemaHasRules(W,e.RULES.all)){u.schema=W,u.schemaPath=e.schemaPath+".patternGroups"+e.util.getProperty(he)+".schema",u.errSchemaPath=e.errSchemaPath+"/patternGroups/"+e.util.escapeFragment(he)+"/schema",r+=" var pgPropCount"+a+" = 0; for (var "+m+" in "+h+") {  ",C&&(r+=" if (!Object.prototype.hasOwnProperty.call("+h+", "+m+")) continue; "),r+=" if ("+e.usePattern(he)+".test("+m+")) { pgPropCount"+a+"++; ",u.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);z=h+"["+m+"]";u.dataPathArr[v]=m;J=e.validate(u);u.baseId=N,e.util.varOccurences(J,g)<2?r+=" "+e.util.varReplace(J,g,z)+" ":r+=" var "+g+" = "+z+"; "+J+" ",l&&(r+=" if (!"+f+") break; "),r+=" } ",l&&(r+=" else "+f+" = true; "),r+=" }  ",l&&(r+=" if ("+f+") { ",p+="}");var pe=ue.minimum,fe=ue.maximum;if(void 0!==pe||void 0!==fe){r+=" var "+c+" = true; ";q=n;if(void 0!==pe){var me=pe,ve="minimum",ge="less";r+=" "+c+" = pgPropCount"+a+" >= "+pe+"; ",n=e.errSchemaPath+"/patternGroups/minimum",r+="  if (!"+c+") {   ",(ye=ye||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'patternGroups' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { reason: '"+ve+"', limit: "+me+", pattern: '"+e.util.escapeQuotes(he)+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should NOT have "+ge+" than "+me+' properties matching pattern "'+e.util.escapeQuotes(he)+"\"' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";H=r;r=ye.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+H+"]); ":r+=" validate.errors = ["+H+"]; return false; ":r+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",void 0!==fe&&(r+=" else ")}if(void 0!==fe){var ye;me=fe,ve="maximum",ge="more";r+=" "+c+" = pgPropCount"+a+" <= "+fe+"; ",n=e.errSchemaPath+"/patternGroups/maximum",r+="  if (!"+c+") {   ",(ye=ye||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'patternGroups' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { reason: '"+ve+"', limit: "+me+", pattern: '"+e.util.escapeQuotes(he)+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should NOT have "+ge+" than "+me+' properties matching pattern "'+e.util.escapeQuotes(he)+"\"' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";H=r;r=ye.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+H+"]); ":r+=" validate.errors = ["+H+"]; return false; ":r+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}n=q,l&&(r+=" if ("+c+") { ",p+="}")}}}}return l&&(r+=" "+p+" if ("+d+" == errors) {"),r=e.util.cleanUpCode(r)}},{}],40:[function(e,t,r){"use strict";t.exports=function(e,t){var r,a,i=" ",o=e.level,s=e.dataLevel,n=e.schema[t],l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(s||""),d="valid"+o;if("#"==n||"#/"==n)e.isRoot?(r=e.async,a="validate"):(r=!0===e.root.schema.$async,a="root.refVal[0]");else{var u=e.resolveRef(e.baseId,n,e.isRoot);if(void 0===u){var p="can't resolve reference "+n+" from id "+e.baseId;if("fail"==e.opts.missingRefs){console.log(p),(y=y||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(n)+"' } ",!1!==e.opts.messages&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(n)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(n)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var f=i;i=y.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+f+"]); ":i+=" validate.errors = ["+f+"]; return false; ":i+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(i+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs){var m=new Error(p);throw m.missingRef=e.resolve.url(e.baseId,n),m.missingSchema=e.resolve.normalizeId(e.resolve.fullPath(m.missingRef)),m}console.log(p),h&&(i+=" if (true) { ")}}else if(u.inline){var v=e.util.copy(e);v.level++;var g="valid"+v.level;v.schema=u.schema,v.schemaPath="",v.errSchemaPath=n,i+=" "+e.validate(v).replace(/validate\.schema/g,u.code)+" ",h&&(i+=" if ("+g+") { ")}else r=!0===u.$async,a=u.code}if(a){var y;(y=y||[]).push(i),i="",e.opts.passContext?i+=" "+a+".call(this, ":i+=" "+a+"( ",i+=" "+c+", (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var b=i+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(i=y.pop(),r){if(!e.async)throw new Error("async schema referenced by sync schema");i+=" try { ",h&&(i+="var "+d+" ="),i+=" "+e.yieldAwait+" "+b+"; } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; } ",h&&(i+=" if ("+d+") { ")}else i+=" if (!"+b+") { if (vErrors === null) vErrors = "+a+".errors; else vErrors = vErrors.concat("+a+".errors); errors = vErrors.length; } ",h&&(i+=" else { ")}return i}},{}],41:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(i||""),c="valid"+a,d=e.opts.v5&&o&&o.$data;d&&(r+=" var schema"+a+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; ");var u="schema"+a;if(!d)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],f=o;if(f)for(var m,v=-1,g=f.length-1;v<g;){m=f[v+=1];var y=e.schema.properties[m];y&&e.util.schemaHasRules(y,e.RULES.all)||(p[p.length]=m)}}else p=o;if(d||p.length){var b=e.errorPath,E=d||p.length>=e.opts.loopRequired;if(l)if(r+=" var missing"+a+"; ",E){d||(r+=" var "+u+" = validate.schema"+s+"; ");var x="' + "+(N="schema"+a+"["+(S="i"+a)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,N,e.opts.jsonPointers)),r+=" var "+c+" = true; ",d&&(r+=" if (schema"+a+" === undefined) "+c+" = true; else if (!Array.isArray(schema"+a+")) "+c+" = false; else {"),r+=" for (var "+S+" = 0; "+S+" < "+u+".length; "+S+"++) { "+c+" = "+h+"["+u+"["+S+"]] !== undefined; if (!"+c+") break; } ",d&&(r+="  }  "),r+="  if (!"+c+") {   ",(C=C||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var w=r;r=C.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var P=p;if(P)for(var _,S=-1,j=P.length-1;S<j;){_=P[S+=1],S&&(r+=" || "),r+=" ( "+h+(D=e.util.getProperty(_))+" === undefined && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?_:D)+") ) "}r+=") {  ";var C;x="' + "+(N="missing"+a)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,N,!0):b+" + "+N),(C=C||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";w=r;r=C.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(E){d||(r+=" var "+u+" = validate.schema"+s+"; ");var N;x="' + "+(N="schema"+a+"["+(S="i"+a)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,N,e.opts.jsonPointers)),d&&(r+=" if ("+u+" && !Array.isArray("+u+")) {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+u+" !== undefined) { "),r+=" for (var "+S+" = 0; "+S+" < "+u+".length; "+S+"++) { if ("+h+"["+u+"["+S+"]] === undefined) {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(r+="  }  ")}else{var k=p;if(k)for(var O,A=-1,T=k.length-1;A<T;){O=k[A+=1];var D=e.util.getProperty(O);x=e.util.escapeQuotes(O);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,O,e.opts.jsonPointers)),r+=" if ("+h+D+" === undefined) {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=b}else l&&(r+=" if (true) {");return r}},{}],42:[function(e,t,r){"use strict";t.exports=function(e,t){var r=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(i||""),c="valid"+a,d="errs__"+a,u=e.util.copy(e),p="";u.level++;var f,m="valid"+u.level,v="ifPassed"+e.level,g=u.baseId;r+="var "+v+";";var y=o;if(y)for(var b,E=-1,x=y.length-1;E<x;){if(b=y[E+=1],E&&!f&&(r+=" if (!"+v+") { ",p+="}"),b.if&&e.util.schemaHasRules(b.if,e.RULES.all)){r+=" var "+d+" = errors;   ";var w=e.compositeRule;if(e.compositeRule=u.compositeRule=!0,u.createErrors=!1,u.schema=b.if,u.schemaPath=s+"["+E+"].if",u.errSchemaPath=n+"/"+E+"/if",r+="  "+e.validate(u)+" ",u.baseId=g,u.createErrors=!0,e.compositeRule=u.compositeRule=w,r+=" "+v+" = "+m+"; if ("+v+") {  ","boolean"==typeof b.then){if(!1===b.then){(_=_||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { caseIndex: "+E+" } ",!1!==e.opts.messages&&(r+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var P=r;r=_.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" var "+m+" = "+b.then+"; "}else u.schema=b.then,u.schemaPath=s+"["+E+"].then",u.errSchemaPath=n+"/"+E+"/then",r+="  "+e.validate(u)+" ",u.baseId=g;r+="  } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } } "}else if(r+=" "+v+" = true;  ","boolean"==typeof b.then){if(!1===b.then){var _;(_=_||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(n)+" , params: { caseIndex: "+E+" } ",!1!==e.opts.messages&&(r+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";P=r;r=_.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" var "+m+" = "+b.then+"; "}else u.schema=b.then,u.schemaPath=s+"["+E+"].then",u.errSchemaPath=n+"/"+E+"/then",r+="  "+e.validate(u)+" ",u.baseId=g;f=b.continue}return r+=p+"var "+c+" = "+m+"; ",r=e.util.cleanUpCode(r)}},{}],43:[function(e,t,r){"use strict";t.exports=function(e,t){var r,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),d="valid"+i,u=e.opts.v5&&s&&s.$data;if(u?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",r="schema"+i):r=s,(s||u)&&!1!==e.opts.uniqueItems){u&&(a+=" var "+d+"; if ("+r+" === false || "+r+" === undefined) "+d+" = true; else if (typeof "+r+" != 'boolean') "+d+" = false; else { "),a+=" var "+d+" = true; if ("+c+".length > 1) { var i = "+c+".length, j; outer: for (;i--;) { for (j = i; j--;) { if (equal("+c+"[i], "+c+"[j])) { "+d+" = false; break outer; } } } } ",u&&(a+="  }  "),a+=" if (!"+d+") {   ";var p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(a+=" , schema:  ",a+=u?"validate.schema"+n:""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),a+=" } "):a+=" {} ";var f=a;a=p.pop(),!e.compositeRule&&h?e.async?a+=" throw new ValidationError(["+f+"]); ":a+=" validate.errors = ["+f+"]; return false; ":a+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",h&&(a+=" else { ")}else h&&(a+=" if (true) { ");return a}},{}],44:[function(e,t,r){"use strict";t.exports=function(e,t){var r="",a=!0===e.schema.$async;if(e.isTop){var i=e.isTop,o=e.level=0,s=e.dataLevel=0,n="data";if(e.rootId=e.resolve.fullPath(e.root.schema.id),e.baseId=e.baseId||e.rootId,a){e.async=!0;var l="es7"==e.opts.async;e.yieldAwait=l?"await":"yield"}delete e.isTop,e.dataPathArr=[void 0],r+=" var validate = ",a?l?r+=" (async function ":("co*"==e.opts.async&&(r+="co.wrap"),r+="(function* "):r+=" (function ",r+=" (data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data;"}else{o=e.level,n="data"+((s=e.dataLevel)||"");if(e.schema.id&&(e.baseId=e.resolve.url(e.baseId,e.schema.id)),a&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+o+" = errors;"}var h,c="valid"+o,d=!e.opts.allErrors,u="",p="",f=e.schema.type,m=Array.isArray(f);if(f&&e.opts.coerceTypes){var v=e.util.coerceToTypes(e.opts.coerceTypes,f);if(v){var g=e.schemaPath+".type",y=e.errSchemaPath+"/type",b=m?"checkDataTypes":"checkDataType";r+=" if ("+e.util[b](f,n,!0)+") {  ";var E="dataType"+o,x="coerced"+o;r+=" var "+E+" = typeof "+n+"; ","array"==e.opts.coerceTypes&&(r+=" if ("+E+" == 'object' && Array.isArray("+n+")) "+E+" = 'array'; "),r+=" var "+x+" = undefined; ";var w="",P=v;if(P)for(var _,S=-1,j=P.length-1;S<j;)_=P[S+=1],S&&(r+=" if ("+x+" === undefined) { ",w+="}"),"array"==e.opts.coerceTypes&&"array"!=_&&(r+=" if ("+E+" == 'array' && "+n+".length == 1) { "+x+" = "+n+" = "+n+"[0]; "+E+" = typeof "+n+";  } "),"string"==_?r+=" if ("+E+" == 'number' || "+E+" == 'boolean') "+x+" = '' + "+n+"; else if ("+n+" === null) "+x+" = ''; ":"number"==_||"integer"==_?(r+=" if ("+E+" == 'boolean' || "+n+" === null || ("+E+" == 'string' && "+n+" && "+n+" == +"+n+" ","integer"==_&&(r+=" && !("+n+" % 1)"),r+=")) "+x+" = +"+n+"; "):"boolean"==_?r+=" if ("+n+" === 'false' || "+n+" === 0 || "+n+" === null) "+x+" = false; else if ("+n+" === 'true' || "+n+" === 1) "+x+" = true; ":"null"==_?r+=" if ("+n+" === '' || "+n+" === 0 || "+n+" === false) "+x+" = null; ":"array"==e.opts.coerceTypes&&"array"==_&&(r+=" if ("+E+" == 'string' || "+E+" == 'number' || "+E+" == 'boolean' || "+n+" == null) "+x+" = ["+n+"]; ");r+=" "+w+" if ("+x+" === undefined) {   ",(K=K||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",r+=m?""+f.join(","):""+f,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=m?""+f.join(","):""+f,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+g+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+n+" "),r+=" } "):r+=" {} ";var C=r;r=K.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+C+"]); ":r+=" validate.errors = ["+C+"]; return false; ":r+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  ";var N=s?"data"+(s-1||""):"parentData",k=s?e.dataPathArr[s]:"parentDataProperty";r+=" "+n+" = "+x+"; ",s||(r+="if ("+N+" !== undefined)"),r+=" "+N+"["+k+"] = "+x+"; } } "}}if(e.schema.$ref&&(h=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"))){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'"');"ignore"==e.opts.extendRefs?(h=!1,console.log('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"')):!0!==e.opts.extendRefs&&console.log('$ref: all keywords used in schema at path "'+e.errSchemaPath+'". It will change in the next major version, see issue #260. Use option { extendRefs: true } to keep current behaviour')}if(e.schema.$ref&&!h)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",d&&(r+=" } if (errors === ",r+=i?"0":"errs_"+o,r+=") { ",p+="}");else{var O=e.RULES;if(O)for(var A,T=-1,D=O.length-1;T<D;)if(G(A=O[T+=1])){if(A.type&&(r+=" if ("+e.util.checkDataType(A.type,n)+") { "),e.opts.useDefaults&&!e.compositeRule)if("object"==A.type&&e.schema.properties){var $=e.schema.properties,I=Object.keys($);if(I)for(var R,L=-1,F=I.length-1;L<F;){if(void 0!==(V=$[R=I[L+=1]]).default)r+="  if ("+(U=n+e.util.getProperty(R))+" === undefined) "+U+" = ","shared"==e.opts.useDefaults?r+=" "+e.useDefault(V.default)+" ":r+=" "+JSON.stringify(V.default)+" ",r+="; "}}else if("array"==A.type&&Array.isArray(e.schema.items)){var M=e.schema.items;if(M){S=-1;for(var V,B=M.length-1;S<B;){var U;if(void 0!==(V=M[S+=1]).default)r+="  if ("+(U=n+"["+S+"]")+" === undefined) "+U+" = ","shared"==e.opts.useDefaults?r+=" "+e.useDefault(V.default)+" ":r+=" "+JSON.stringify(V.default)+" ",r+="; "}}}var q=A.rules;if(q)for(var H,Q=-1,z=q.length-1;Q<z;)Y(H=q[Q+=1])&&(r+=" "+H.code(e,H.keyword)+" ",d&&(u+="}"));if(d&&(r+=" "+u+" ",u=""),A.type&&(r+=" } ",f&&f===A.type)){var J=!0;r+=" else { ";g=e.schemaPath+".type",y=e.errSchemaPath+"/type";(K=K||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",r+=m?""+f.join(","):""+f,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=m?""+f.join(","):""+f,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+g+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+n+" "),r+=" } "):r+=" {} ";C=r;r=K.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+C+"]); ":r+=" validate.errors = ["+C+"]; return false; ":r+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}d&&(r+=" if (errors === ",r+=i?"0":"errs_"+o,r+=") { ",p+="}")}}if(f&&!J&&(!e.opts.coerceTypes||!v)){var K;g=e.schemaPath+".type",y=e.errSchemaPath+"/type",b=m?"checkDataTypes":"checkDataType";r+=" if ("+e.util[b](f,n,!0)+") {   ",(K=K||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",r+=m?""+f.join(","):""+f,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=m?""+f.join(","):""+f,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+g+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+n+" "),r+=" } "):r+=" {} ";C=r;r=K.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+C+"]); ":r+=" validate.errors = ["+C+"]; return false; ":r+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }"}function G(e){for(var t=0;t<e.rules.length;t++)if(Y(e.rules[t]))return!0}function Y(t){return void 0!==e.schema[t.keyword]||"properties"==t.keyword&&(!1===e.schema.additionalProperties||"object"==typeof e.schema.additionalProperties||e.schema.patternProperties&&Object.keys(e.schema.patternProperties).length||e.opts.v5&&e.schema.patternGroups&&Object.keys(e.schema.patternGroups).length)}return d&&(r+=" "+p+" "),i?(a?(r+=" if (errors === 0) return true;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }); return validate;"):r+=" var "+c+" = errors === errs_"+o+";",r=e.util.cleanUpCode(r),i&&d&&(r=e.util.cleanUpVarErrors(r,a)),r}},{}],45:[function(e,t,r){"use strict";var a=/^[a-z_$][a-z0-9_$\-]*$/i,i=e("./dotjs/custom");t.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!a.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){if(t.macro&&void 0!==t.valid)throw new Error('"valid" option cannot be used with macro keywords');var o=t.type;if(Array.isArray(o)){var s,n=o.length;for(s=0;s<n;s++)d(o[s]);for(s=0;s<n;s++)c(e,o[s],t)}else o&&d(o),c(e,o,t);var l=!0===t.$data&&this._opts.v5;if(l&&!t.validate)throw new Error('$data support: "validate" function is not defined');var h=t.metaSchema;h&&(l&&(h={anyOf:[h,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/json-schema-v5.json#/definitions/$data"}]}),t.validateSchema=this.compile(h,!0))}function c(e,t,a){for(var o,s=0;s<r.length;s++){var n=r[s];if(n.type==t){o=n;break}}o||(o={type:t,rules:[]},r.push(o));var l={keyword:e,definition:a,custom:!0,code:i};o.rules.push(l),r.custom[e]=l}function d(e){if(!r.types[e])throw new Error("Unknown type "+e)}r.keywords[e]=r.all[e]=!0},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var a=t[r].rules,i=0;i<a.length;i++)if(a[i].keyword==e){a.splice(i,1);break}}}},{"./dotjs/custom":29}],46:[function(e,t,r){t.exports={id:"http://json-schema.org/draft-04/schema#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}}},{}],47:[function(e,t,r){t.exports={id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/json-schema-v5.json#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema (v5 proposals)",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},$data:{type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{anyOf:[{type:"number",minimum:0,exclusiveMinimum:!0},{$ref:"#/definitions/$data"}]},maximum:{anyOf:[{type:"number"},{$ref:"#/definitions/$data"}]},exclusiveMaximum:{anyOf:[{type:"boolean",default:!1},{$ref:"#/definitions/$data"}]},minimum:{anyOf:[{type:"number"},{$ref:"#/definitions/$data"}]},exclusiveMinimum:{anyOf:[{type:"boolean",default:!1},{$ref:"#/definitions/$data"}]},maxLength:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minLength:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},pattern:{anyOf:[{type:"string",format:"regex"},{$ref:"#/definitions/$data"}]},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"},{$ref:"#/definitions/$data"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minItems:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},uniqueItems:{anyOf:[{type:"boolean",default:!1},{$ref:"#/definitions/$data"}]},maxProperties:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minProperties:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},required:{anyOf:[{$ref:"#/definitions/stringArray"},{$ref:"#/definitions/$data"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"},{$ref:"#/definitions/$data"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{anyOf:[{type:"array",minItems:1,uniqueItems:!0},{$ref:"#/definitions/$data"}]},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"},format:{anyOf:[{type:"string"},{$ref:"#/definitions/$data"}]},formatMaximum:{anyOf:[{type:"string"},{$ref:"#/definitions/$data"}]},formatMinimum:{anyOf:[{type:"string"},{$ref:"#/definitions/$data"}]},formatExclusiveMaximum:{anyOf:[{type:"boolean",default:!1},{$ref:"#/definitions/$data"}]},formatExclusiveMinimum:{anyOf:[{type:"boolean",default:!1},{$ref:"#/definitions/$data"}]},constant:{anyOf:[{},{$ref:"#/definitions/$data"}]},contains:{$ref:"#"},patternGroups:{type:"object",additionalProperties:{type:"object",required:["schema"],properties:{maximum:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minimum:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},schema:{$ref:"#"}},additionalProperties:!1},default:{}},switch:{type:"array",items:{required:["then"],properties:{if:{$ref:"#"},then:{anyOf:[{type:"boolean"},{$ref:"#"}]},continue:{type:"boolean"}},additionalProperties:!1,dependencies:{continue:["if"]}}}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"],formatMaximum:["format"],formatMinimum:["format"],formatExclusiveMaximum:["formatMaximum"],formatExclusiveMinimum:["formatMinimum"]},default:{}}},{}],48:[function(e,t,r){"use strict";var a="https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/json-schema-v5.json";function i(e){return{not:{items:{not:e}}}}t.exports={enable:function(t){var r={switch:e("./dotjs/switch"),constant:e("./dotjs/constant"),_formatLimit:e("./dotjs/_formatLimit"),patternRequired:e("./dotjs/patternRequired")};if(!1!==t._opts.meta){var o=e("./refs/json-schema-v5.json");t.addMetaSchema(o,a)}function s(e,a,i){var o={inline:i||r[e],statements:!0,errors:"full"};a&&(o.type=a),t.addKeyword(e,o)}s("constant"),t.addKeyword("contains",{type:"array",macro:i}),s("formatMaximum","string",r._formatLimit),s("formatMinimum","string",r._formatLimit),t.addKeyword("formatExclusiveMaximum"),t.addKeyword("formatExclusiveMinimum"),t.addKeyword("patternGroups"),s("patternRequired","object"),s("switch")},META_SCHEMA_ID:a}},{"./dotjs/_formatLimit":21,"./dotjs/constant":28,"./dotjs/patternRequired":38,"./dotjs/switch":42,"./refs/json-schema-v5.json":47}],49:[function(e,t,r){var a=Array.prototype.slice;function i(e){var t=this,r=a.call(arguments,1);return new Promise(function(a,i){if("function"==typeof e&&(e=e.apply(t,r)),!e||"function"!=typeof e.next)return a(e);function n(t){var r;try{r=e.next(t)}catch(e){return i(e)}h(r)}function l(t){var r;try{r=e.throw(t)}catch(e){return i(e)}h(r)}function h(e){if(e.done)return a(e.value);var r=o.call(t,e.value);return r&&s(r)?r.then(n,l):l(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(e.value)+'"'))}n()})}function o(e){return e?s(e)?e:(t=e.constructor)&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||n(t.prototype))||n(e)?i.call(this,e):"function"==typeof e?function(e){var t=this;return new Promise(function(r,i){e.call(t,function(e,t){if(e)return i(e);arguments.length>2&&(t=a.call(arguments,1)),r(t)})})}.call(this,e):Array.isArray(e)?function(e){return Promise.all(e.map(o,this))}.call(this,e):Object==e.constructor?function(e){for(var t=new e.constructor,r=Object.keys(e),a=[],i=0;i<r.length;i++){var n=r[i],l=o.call(this,e[n]);l&&s(l)?h(l,n):t[n]=e[n]}return Promise.all(a).then(function(){return t});function h(e,r){t[r]=void 0,a.push(e.then(function(e){t[r]=e}))}}.call(this,e):e:e;var t}function s(e){return"function"==typeof e.then}function n(e){return"function"==typeof e.next&&"function"==typeof e.throw}t.exports=i.default=i.co=i,i.wrap=function(e){return t.__generatorFunction__=e,t;function t(){return i.call(this,e.apply(this,arguments))}}},{}],50:[function(e,t,r){t.exports=function e(t,r){"use strict";var a,i,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,n=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,h=/^0/,c=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},d=c(t).replace(s,"")||"",u=c(r).replace(s,"")||"",p=d.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=u.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(d.match(l),16)||1!==p.length&&d.match(n)&&Date.parse(d),v=parseInt(u.match(l),16)||m&&u.match(n)&&Date.parse(u)||null;if(v){if(m<v)return-1;if(m>v)return 1}for(var g=0,y=Math.max(p.length,f.length);g<y;g++){if(a=!(p[g]||"").match(h)&&parseFloat(p[g])||p[g]||0,i=!(f[g]||"").match(h)&&parseFloat(f[g])||f[g]||0,isNaN(a)!==isNaN(i))return isNaN(a)?1:-1;if(typeof a!=typeof i&&(a+="",i+=""),a<i)return-1;if(a>i)return 1}return 0}},{}],51:[function(e,t,r){var a="undefined"!=typeof JSON?JSON:e("jsonify");t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var s,n="boolean"==typeof t.cycles&&t.cycles,l=t.replacer||function(e,t){return t},h=t.cmp&&(s=t.cmp,function(e){return function(t,r){var a={key:t,value:e[t]},i={key:r,value:e[r]};return s(a,i)}}),c=[];return function e(t,s,d,u){var p=r?"\n"+new Array(u+1).join(r):"",f=r?": ":":";if(d&&d.toJSON&&"function"==typeof d.toJSON&&(d=d.toJSON()),void 0!==(d=l.call(t,s,d))){if("object"!=typeof d||null===d)return a.stringify(d);if(i(d)){for(var m=[],v=0;v<d.length;v++){var g=e(d,v,d[v],u+1)||a.stringify(null);m.push(p+r+g)}return"["+m.join(",")+p+"]"}if(-1!==c.indexOf(d)){if(n)return a.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(d);var y=o(d).sort(h&&h(d));for(m=[],v=0;v<y.length;v++){var b=e(d,s=y[v],d[s],u+1);if(b){var E=a.stringify(s)+f+b;m.push(p+r+E)}}return c.splice(c.indexOf(d),1),"{"+m.join(",")+p+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},o=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var a in e)t.call(e,a)&&r.push(a);return r}},{jsonify:52}],52:[function(e,t,r){r.parse=e("./lib/parse"),r.stringify=e("./lib/stringify")},{"./lib/parse":53,"./lib/stringify":54}],53:[function(e,t,r){var a,i,o,s,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},l=function(e){throw{name:"SyntaxError",message:e,at:a,text:o}},h=function(e){return e&&e!==i&&l("Expected '"+e+"' instead of '"+i+"'"),i=o.charAt(a),a+=1,i},c=function(){var e,t="";for("-"===i&&(t="-",h("-"));i>="0"&&i<="9";)t+=i,h();if("."===i)for(t+=".";h()&&i>="0"&&i<="9";)t+=i;if("e"===i||"E"===i)for(t+=i,h(),"-"!==i&&"+"!==i||(t+=i,h());i>="0"&&i<="9";)t+=i,h();if(e=+t,isFinite(e))return e;l("Bad number")},d=function(){var e,t,r,a="";if('"'===i)for(;h();){if('"'===i)return h(),a;if("\\"===i)if(h(),"u"===i){for(r=0,t=0;t<4&&(e=parseInt(h(),16),isFinite(e));t+=1)r=16*r+e;a+=String.fromCharCode(r)}else{if("string"!=typeof n[i])break;a+=n[i]}else a+=i}l("Bad string")},u=function(){for(;i&&i<=" ";)h()};s=function(){switch(u(),i){case"{":return function(){var e,t={};if("{"===i){if(h("{"),u(),"}"===i)return h("}"),t;for(;i;){if(e=d(),u(),h(":"),Object.hasOwnProperty.call(t,e)&&l('Duplicate key "'+e+'"'),t[e]=s(),u(),"}"===i)return h("}"),t;h(","),u()}}l("Bad object")}();case"[":return function(){var e=[];if("["===i){if(h("["),u(),"]"===i)return h("]"),e;for(;i;){if(e.push(s()),u(),"]"===i)return h("]"),e;h(","),u()}}l("Bad array")}();case'"':return d();case"-":return c();default:return i>="0"&&i<="9"?c():function(){switch(i){case"t":return h("t"),h("r"),h("u"),h("e"),!0;case"f":return h("f"),h("a"),h("l"),h("s"),h("e"),!1;case"n":return h("n"),h("u"),h("l"),h("l"),null}l("Unexpected '"+i+"'")}()}},t.exports=function(e,t){var r;return o=e,a=0,i=" ",r=s(),u(),i&&l("Syntax error"),"function"==typeof t?function e(r,a){var i,o,s=r[a];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(void 0!==(o=e(s,i))?s[i]=o:delete s[i]);return t.call(r,a,s)}({"":r},""):r}},{}],54:[function(e,t,r){var a,i,o,s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function l(e){return s.lastIndex=0,s.test(e)?'"'+e.replace(s,function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}t.exports=function(e,t,r){var s;if(a="",i="","number"==typeof r)for(s=0;s<r;s+=1)i+=" ";else"string"==typeof r&&(i=r);if(o=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return function e(t,r){var s,n,h,c,d,u=a,p=r[t];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(t)),"function"==typeof o&&(p=o.call(r,t,p)),typeof p){case"string":return l(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(a+=i,d=[],"[object Array]"===Object.prototype.toString.apply(p)){for(c=p.length,s=0;s<c;s+=1)d[s]=e(s,p)||"null";return h=0===d.length?"[]":a?"[\n"+a+d.join(",\n"+a)+"\n"+u+"]":"["+d.join(",")+"]",a=u,h}if(o&&"object"==typeof o)for(c=o.length,s=0;s<c;s+=1)"string"==typeof(n=o[s])&&(h=e(n,p))&&d.push(l(n)+(a?": ":":")+h);else for(n in p)Object.prototype.hasOwnProperty.call(p,n)&&(h=e(n,p))&&d.push(l(n)+(a?": ":":")+h);return h=0===d.length?"{}":a?"{\n"+a+d.join(",\n"+a)+"\n"+u+"}":"{"+d.join(",")+"}",a=u,h}}("",{"":e})}},{}],55:[function(e,t,r){"use strict";var a=e("./util");function i(e,t){this.dom={};var r=this,a=this.dom;this.anchor=void 0,this.items=e,this.eventListeners={},this.selection=void 0,this.onClose=t?t.close:void 0;var i=document.createElement("div");i.className="jsoneditor-contextmenu-root",a.root=i;var o=document.createElement("div");o.className="jsoneditor-contextmenu",a.menu=o,i.appendChild(o);var s=document.createElement("ul");s.className="jsoneditor-menu",o.appendChild(s),a.list=s,a.items=[];var n=document.createElement("button");n.type="button",a.focusButton=n;var l=document.createElement("li");l.style.overflow="hidden",l.style.height="0",l.appendChild(n),s.appendChild(l),function e(t,a,i){i.forEach(function(i){if("separator"==i.type){var o=document.createElement("div");o.className="jsoneditor-separator",(n=document.createElement("li")).appendChild(o),t.appendChild(n)}else{var s={},n=document.createElement("li");t.appendChild(n);var l=document.createElement("button");if(l.type="button",l.className=i.className,s.button=l,i.title&&(l.title=i.title),i.click&&(l.onclick=function(e){e.preventDefault(),r.hide(),i.click()}),n.appendChild(l),i.submenu){var h,c=document.createElement("div");if(c.className="jsoneditor-icon",l.appendChild(c),l.appendChild(document.createTextNode(i.text)),i.click){l.className+=" jsoneditor-default";var d=document.createElement("button");d.type="button",s.buttonExpand=d,d.className="jsoneditor-expand",d.innerHTML='<div class="jsoneditor-expand"></div>',n.appendChild(d),i.submenuTitle&&(d.title=i.submenuTitle),h=d}else{var u=document.createElement("div");u.className="jsoneditor-expand",l.appendChild(u),h=l}h.onclick=function(e){e.preventDefault(),r._onExpandItem(s),h.focus()};var p=[];s.subItems=p;var f=document.createElement("ul");s.ul=f,f.className="jsoneditor-menu",f.style.height="0",n.appendChild(f),e(f,p,i.submenu)}else l.innerHTML='<div class="jsoneditor-icon"></div>'+i.text;a.push(s)}})}(s,this.dom.items,e),this.maxHeight=0,e.forEach(function(t){var a=24*(e.length+(t.submenu?t.submenu.length:0));r.maxHeight=Math.max(r.maxHeight,a)})}i.prototype._getVisibleButtons=function(){var e=[],t=this;return this.dom.items.forEach(function(r){e.push(r.button),r.buttonExpand&&e.push(r.buttonExpand),r.subItems&&r==t.expandedItem&&r.subItems.forEach(function(t){e.push(t.button),t.buttonExpand&&e.push(t.buttonExpand)})}),e},i.visibleMenu=void 0,i.prototype.show=function(e,t){this.hide();var r=!0;if(t){var o=e.getBoundingClientRect(),s=t.getBoundingClientRect();o.bottom+this.maxHeight<s.bottom||o.top-this.maxHeight>s.top&&(r=!1)}if(r){var n=e.offsetHeight;this.dom.menu.style.left="0px",this.dom.menu.style.top=n+"px",this.dom.menu.style.bottom=""}else this.dom.menu.style.left="0px",this.dom.menu.style.top="",this.dom.menu.style.bottom="0px";var l=e.parentNode;l.insertBefore(this.dom.root,l.firstChild);var h=this,c=this.dom.list;this.eventListeners.mousedown=a.addEventListener(window,"mousedown",function(e){var t=e.target;t==c||h._isChildOf(t,c)||(h.hide(),e.stopPropagation(),e.preventDefault())}),this.eventListeners.keydown=a.addEventListener(window,"keydown",function(e){h._onKeyDown(e)}),this.selection=a.getSelection(),this.anchor=e,setTimeout(function(){h.dom.focusButton.focus()},0),i.visibleMenu&&i.visibleMenu.hide(),i.visibleMenu=this},i.prototype.hide=function(){this.dom.root.parentNode&&(this.dom.root.parentNode.removeChild(this.dom.root),this.onClose&&this.onClose());for(var e in this.eventListeners)if(this.eventListeners.hasOwnProperty(e)){var t=this.eventListeners[e];t&&a.removeEventListener(window,e,t),delete this.eventListeners[e]}i.visibleMenu==this&&(i.visibleMenu=void 0)},i.prototype._onExpandItem=function(e){var t=this,r=e==this.expandedItem,i=this.expandedItem;if(i&&(i.ul.style.height="0",i.ul.style.padding="",setTimeout(function(){t.expandedItem!=i&&(i.ul.style.display="",a.removeClassName(i.ul.parentNode,"jsoneditor-selected"))},300),this.expandedItem=void 0),!r){var o=e.ul;o.style.display="block";o.clientHeight;setTimeout(function(){t.expandedItem==e&&(o.style.height=24*o.childNodes.length+"px",o.style.padding="5px 10px")},0),a.addClassName(o.parentNode,"jsoneditor-selected"),this.expandedItem=e}},i.prototype._onKeyDown=function(e){var t,r,i,o,s=e.target,n=e.which,l=!1;27==n?(this.selection&&a.setSelection(this.selection),this.anchor&&this.anchor.focus(),this.hide(),l=!0):9==n?e.shiftKey?0==(r=(t=this._getVisibleButtons()).indexOf(s))&&(t[t.length-1].focus(),l=!0):(r=(t=this._getVisibleButtons()).indexOf(s))==t.length-1&&(t[0].focus(),l=!0):37==n?("jsoneditor-expand"==s.className&&(i=(t=this._getVisibleButtons())[(r=t.indexOf(s))-1])&&i.focus(),l=!0):38==n?((i=(t=this._getVisibleButtons())[(r=t.indexOf(s))-1])&&"jsoneditor-expand"==i.className&&(i=t[r-2]),i||(i=t[t.length-1]),i&&i.focus(),l=!0):39==n?((o=(t=this._getVisibleButtons())[(r=t.indexOf(s))+1])&&"jsoneditor-expand"==o.className&&o.focus(),l=!0):40==n&&((o=(t=this._getVisibleButtons())[(r=t.indexOf(s))+1])&&"jsoneditor-expand"==o.className&&(o=t[r+2]),o||(o=t[0]),o&&(o.focus(),l=!0),l=!0),l&&(e.stopPropagation(),e.preventDefault())},i.prototype._isChildOf=function(e,t){for(var r=e.parentNode;r;){if(r==t)return!0;r=r.parentNode}return!1},t.exports=i},{"./util":68}],56:[function(e,t,r){"use strict";function a(){this.locked=!1}a.prototype.highlight=function(e){this.locked||(this.node!=e&&(this.node&&this.node.setHighlight(!1),this.node=e,this.node.setHighlight(!0)),this._cancelUnhighlight())},a.prototype.unhighlight=function(){if(!this.locked){var e=this;this.node&&(this._cancelUnhighlight(),this.unhighlightTimer=setTimeout(function(){e.node.setHighlight(!1),e.node=void 0,e.unhighlightTimer=void 0},0))}},a.prototype._cancelUnhighlight=function(){this.unhighlightTimer&&(clearTimeout(this.unhighlightTimer),this.unhighlightTimer=void 0)},a.prototype.lock=function(){this.locked=!0},a.prototype.unlock=function(){this.locked=!1},t.exports=a},{}],57:[function(e,t,r){"use strict";e("./util");function a(e){this.editor=e,this.history=[],this.index=-1,this.clear(),this.actions={editField:{undo:function(e){e.node.updateField(e.oldValue)},redo:function(e){e.node.updateField(e.newValue)}},editValue:{undo:function(e){e.node.updateValue(e.oldValue)},redo:function(e){e.node.updateValue(e.newValue)}},changeType:{undo:function(e){e.node.changeType(e.oldType)},redo:function(e){e.node.changeType(e.newType)}},appendNodes:{undo:function(e){e.nodes.forEach(function(t){e.parent.removeChild(t)})},redo:function(e){e.nodes.forEach(function(t){e.parent.appendChild(t)})}},insertBeforeNodes:{undo:function(e){e.nodes.forEach(function(t){e.parent.removeChild(t)})},redo:function(e){e.nodes.forEach(function(t){e.parent.insertBefore(t,e.beforeNode)})}},insertAfterNodes:{undo:function(e){e.nodes.forEach(function(t){e.parent.removeChild(t)})},redo:function(e){var t=e.afterNode;e.nodes.forEach(function(r){e.parent.insertAfter(e.node,t),t=r})}},removeNodes:{undo:function(e){var t=e.parent,r=t.childs[e.index]||t.append;e.nodes.forEach(function(e){t.insertBefore(e,r)})},redo:function(e){e.nodes.forEach(function(t){e.parent.removeChild(t)})}},duplicateNodes:{undo:function(e){e.nodes.forEach(function(t){e.parent.removeChild(t)})},redo:function(e){var t=e.afterNode;e.nodes.forEach(function(r){e.parent.insertAfter(r,t),t=r})}},moveNodes:{undo:function(e){e.nodes.forEach(function(t){e.oldBeforeNode.parent.moveBefore(t,e.oldBeforeNode)})},redo:function(e){e.nodes.forEach(function(t){e.newBeforeNode.parent.moveBefore(t,e.newBeforeNode)})}},sort:{undo:function(e){var t=e.node;t.hideChilds(),t.sort=e.oldSort,t.childs=e.oldChilds,t.showChilds()},redo:function(e){var t=e.node;t.hideChilds(),t.sort=e.newSort,t.childs=e.newChilds,t.showChilds()}}}}a.prototype.onChange=function(){},a.prototype.add=function(e,t){this.index++,this.history[this.index]={action:e,params:t,timestamp:new Date},this.index<this.history.length-1&&this.history.splice(this.index+1,this.history.length-this.index-1),this.onChange()},a.prototype.clear=function(){this.history=[],this.index=-1,this.onChange()},a.prototype.canUndo=function(){return this.index>=0},a.prototype.canRedo=function(){return this.index<this.history.length-1},a.prototype.undo=function(){if(this.canUndo()){var e=this.history[this.index];if(e){var t=this.actions[e.action];t&&t.undo?(t.undo(e.params),e.params.oldSelection&&this.editor.setSelection(e.params.oldSelection)):console.error(new Error('unknown action "'+e.action+'"'))}this.index--,this.onChange()}},a.prototype.redo=function(){if(this.canRedo()){this.index++;var e=this.history[this.index];if(e){var t=this.actions[e.action];t&&t.redo?(t.redo(e.params),e.params.newSelection&&this.editor.setSelection(e.params.newSelection)):console.error(new Error('unknown action "'+e.action+'"'))}this.onChange()}},a.prototype.destroy=function(){this.editor=null,this.history=[],this.index=-1},t.exports=a},{"./util":68}],58:[function(e,t,r){"use strict";var a;try{a=e("ajv")}catch(e){}var i=e("./treemode"),o=e("./textmode"),s=e("./util");function n(e,t,r){if(!(this instanceof n))throw new Error('JSONEditor constructor called without "new".');var a=s.getInternetExplorerVersion();if(-1!=a&&a<9)throw new Error("Unsupported browser, IE9 or newer required. Please install the newest version of your browser.");if(t&&(t.error&&(console.warn('Option "error" has been renamed to "onError"'),t.onError=t.error,delete t.error),t.change&&(console.warn('Option "change" has been renamed to "onChange"'),t.onChange=t.change,delete t.change),t.editable&&(console.warn('Option "editable" has been renamed to "onEditable"'),t.onEditable=t.editable,delete t.editable),t)){var i=["ace","theme","ajv","schema","onChange","onEditable","onError","onModeChange","escapeUnicode","history","search","mode","modes","name","indentation","sortObjectKeys"];Object.keys(t).forEach(function(e){-1===i.indexOf(e)&&console.warn('Unknown option "'+e+'". This option will be ignored')})}arguments.length&&this._create(e,t,r)}n.modes={},n.prototype.DEBOUNCE_INTERVAL=150,n.prototype._create=function(e,t,r){this.container=e,this.options=t||{},this.json=r||{};var a=this.options.mode||"tree";this.setMode(a)},n.prototype.destroy=function(){},n.prototype.set=function(e){this.json=e},n.prototype.get=function(){return this.json},n.prototype.setText=function(e){this.json=s.parse(e)},n.prototype.getText=function(){return JSON.stringify(this.json)},n.prototype.setName=function(e){this.options||(this.options={}),this.options.name=e},n.prototype.getName=function(){return this.options&&this.options.name},n.prototype.setMode=function(e){var t,r,a=this.container,i=s.extend({},this.options),o=i.mode;i.mode=e;var l=n.modes[e];if(!l)throw new Error('Unknown mode "'+i.mode+'"');try{var h="text"==l.data;if(r=this.getName(),t=this[h?"getText":"get"](),this.destroy(),s.clear(this),s.extend(this,l.mixin),this.create(a,i),this.setName(r),this[h?"setText":"set"](t),"function"==typeof l.load)try{l.load.call(this)}catch(e){console.error(e)}if("function"==typeof i.onModeChange&&e!==o)try{i.onModeChange(e,o)}catch(e){console.error(e)}}catch(e){this._onError(e)}},n.prototype.getMode=function(){return this.options.mode},n.prototype._onError=function(e){if(!this.options||"function"!=typeof this.options.onError)throw e;this.options.onError(e)},n.prototype.setSchema=function(e){if(e){var t;try{t=this.options.ajv||a({allErrors:!0,verbose:!0})}catch(e){console.warn("Failed to create an instance of Ajv, JSON Schema validation is not available. Please use a JSONEditor bundle including Ajv, or pass an instance of Ajv as via the configuration option `ajv`.")}t&&(this.validateSchema=t.compile(e),this.options.schema=e,this.validate()),this.refresh()}else this.validateSchema=null,this.options.schema=null,this.validate(),this.refresh()},n.prototype.validate=function(){},n.prototype.refresh=function(){},n.registerMode=function(e){var t,r;if(s.isArray(e))for(t=0;t<e.length;t++)n.registerMode(e[t]);else{if(!("mode"in e))throw new Error('Property "mode" missing');if(!("mixin"in e))throw new Error('Property "mixin" missing');if(!("data"in e))throw new Error('Property "data" missing');var a=e.mode;if(a in n.modes)throw new Error('Mode "'+a+'" already registered');if("function"!=typeof e.mixin.create)throw new Error('Required function "create" missing on mixin');var i=["setMode","registerMode","modes"];for(t=0;t<i.length;t++)if((r=i[t])in e.mixin)throw new Error('Reserved property "'+r+'" not allowed in mixin');n.modes[a]=e}},n.registerMode(i),n.registerMode(o),t.exports=n},{"./textmode":66,"./treemode":67,"./util":68,ajv:8}],59:[function(e,t,r){"use strict";var a=e("./ContextMenu");function i(e,t,r,i){for(var o={code:{text:"Code",title:"Afficher sous forme de code",click:function(){i("code")}},form:{text:"Formulaire",title:"Afficher sous forme de formulaire",click:function(){i("form")}},text:{text:"Texte",title:"Afficher en texte brute",click:function(){i("text")}},tree:{text:"Arborescence",title:"Afficher sous une arborescence",click:function(){i("tree")}},view:{text:"Aperu",title:"Afficher l'aperu d'arborescence",click:function(){i("view")}}},s=[],n=0;n<t.length;n++){var l=t[n],h=o[l];if(!h)throw new Error('Unknown mode "'+l+'"');h.className="jsoneditor-type-modes"+(r==l?" jsoneditor-selected":""),s.push(h)}var c=o[r];if(!c)throw new Error('Unknown mode "'+r+'"');var d=c.text,u=document.createElement("button");u.type="button",u.className="jsoneditor-modes jsoneditor-separator",u.innerHTML=d+" &#x25BE;",u.title="Switch editor mode",u.onclick=function(){new a(s).show(u)};var p=document.createElement("div");p.className="jsoneditor-modes",p.style.position="relative",p.appendChild(u),e.appendChild(p),this.dom={container:e,box:u,frame:p}}i.prototype.focus=function(){this.dom.box.focus()},i.prototype.destroy=function(){this.dom&&this.dom.frame&&this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom=null},t.exports=i},{"./ContextMenu":55}],60:[function(e,t,r){"use strict";var a=e("javascript-natural-sort"),i=e("./ContextMenu"),o=e("./appendNodeFactory"),s=e("./util");function n(e,t){this.editor=e,this.dom={},this.expanded=!1,t&&t instanceof Object?(this.setField(t.field,t.fieldEditable),this.setValue(t.value,t.type)):(this.setField(""),this.setValue(null)),this._debouncedOnChangeValue=s.debounce(this._onChangeValue.bind(this),n.prototype.DEBOUNCE_INTERVAL),this._debouncedOnChangeField=s.debounce(this._onChangeField.bind(this),n.prototype.DEBOUNCE_INTERVAL)}n.prototype.DEBOUNCE_INTERVAL=150,n.prototype._updateEditability=function(){if(this.editable={field:!0,value:!0},this.editor&&(this.editable.field="tree"===this.editor.options.mode,this.editable.value="view"!==this.editor.options.mode,("tree"===this.editor.options.mode||"form"===this.editor.options.mode)&&"function"==typeof this.editor.options.onEditable)){var e=this.editor.options.onEditable({field:this.field,value:this.value,path:this.getPath()});"boolean"==typeof e?(this.editable.field=e,this.editable.value=e):("boolean"==typeof e.field&&(this.editable.field=e.field),"boolean"==typeof e.value&&(this.editable.value=e.value))}},n.prototype.getPath=function(){for(var e=this,t=[];e;){var r=e.parent?"array"!=e.parent.type?e.field:e.index:void 0;void 0!==r&&t.unshift(r),e=e.parent}return t},n.prototype.findNode=function(e){for(var t=s.parsePath(e),r=this;r&&t.length>0;){var a=t.shift();if("number"==typeof a){if("array"!==r.type)throw new Error("Cannot get child node at index "+a+": node is no array");r=r.childs[a]}else{if("object"!==r.type)throw new Error("Cannot get child node "+a+": node is no object");r=r.childs.filter(function(e){return e.field===a})[0]}}return r},n.prototype.findParents=function(){for(var e=[],t=this.parent;t;)e.unshift(t),t=t.parent;return e},n.prototype.setError=function(e,t){this.getDom(),this.error=e;var r=this.dom.tdError;if(e){r||(r=document.createElement("td"),this.dom.tdError=r,this.dom.tdValue.parentNode.appendChild(r));var a=document.createElement("div");a.className="jsoneditor-popover jsoneditor-right",a.appendChild(document.createTextNode(e.message));var i=document.createElement("button");for(i.type="button",i.className="jsoneditor-schema-error",i.appendChild(a),i.onmouseover=i.onfocus=function(){for(var e=["right","above","below","left"],t=0;t<e.length;t++){var r=e[t];a.className="jsoneditor-popover jsoneditor-"+r;var i=this.editor.content.getBoundingClientRect(),o=a.getBoundingClientRect();if(s.insideRect(i,o,20))break}}.bind(this),t&&(i.onclick=function(){t.findParents().forEach(function(e){e.expand(!1)}),t.scrollTo(function(){t.focus()})});r.firstChild;)r.removeChild(r.firstChild);r.appendChild(i)}else r&&(this.dom.tdError.parentNode.removeChild(this.dom.tdError),delete this.dom.tdError)},n.prototype.getIndex=function(){return this.parent?this.parent.childs.indexOf(this):-1},n.prototype.setParent=function(e){this.parent=e},n.prototype.setField=function(e,t){this.field=e,this.previousField=e,this.fieldEditable=!0===t},n.prototype.getField=function(){return void 0===this.field&&this._getDomField(),this.field},n.prototype.setValue=function(e,t){var r,a,i=this.childs;if(i)for(;i.length;)this.removeChild(i[0]);if(this.type=this._getType(e),t&&t!=this.type){if("string"!=t||"auto"!=this.type)throw new Error('Type mismatch: cannot cast value of type "'+this.type+' to the specified type "'+t+'"');this.type=t}if("array"==this.type){this.childs=[];for(var o=0,s=e.length;o<s;o++)void 0===(r=e[o])||r instanceof Function||(a=new n(this.editor,{value:r}),this.appendChild(a));this.value=""}else if("object"==this.type){this.childs=[];for(var l in e)e.hasOwnProperty(l)&&(void 0===(r=e[l])||r instanceof Function||(a=new n(this.editor,{field:l,value:r}),this.appendChild(a)));this.value="",!0===this.editor.options.sortObjectKeys&&this.sort("asc")}else this.childs=void 0,this.value=e;this.previousValue=this.value},n.prototype.getValue=function(){if("array"==this.type){var e=[];return this.childs.forEach(function(t){e.push(t.getValue())}),e}if("object"==this.type){var t={};return this.childs.forEach(function(e){t[e.getField()]=e.getValue()}),t}return void 0===this.value&&this._getDomValue(),this.value},n.prototype.getLevel=function(){return this.parent?this.parent.getLevel()+1:0},n.prototype.getNodePath=function(){var e=this.parent?this.parent.getNodePath():[];return e.push(this),e},n.prototype.clone=function(){var e=new n(this.editor);if(e.type=this.type,e.field=this.field,e.fieldInnerText=this.fieldInnerText,e.fieldEditable=this.fieldEditable,e.value=this.value,e.valueInnerText=this.valueInnerText,e.expanded=this.expanded,this.childs){var t=[];this.childs.forEach(function(r){var a=r.clone();a.setParent(e),t.push(a)}),e.childs=t}else e.childs=void 0;return e},n.prototype.expand=function(e){this.childs&&(this.expanded=!0,this.dom.expand&&(this.dom.expand.className="jsoneditor-expanded"),this.showChilds(),!1!==e&&this.childs.forEach(function(t){t.expand(e)}))},n.prototype.collapse=function(e){this.childs&&(this.hideChilds(),!1!==e&&this.childs.forEach(function(t){t.collapse(e)}),this.dom.expand&&(this.dom.expand.className="jsoneditor-collapsed"),this.expanded=!1)},n.prototype.showChilds=function(){if(this.childs&&this.expanded){var e=this.dom.tr,t=e?e.parentNode:void 0;if(t){var r=this.getAppend(),a=e.nextSibling;a?t.insertBefore(r,a):t.appendChild(r),this.childs.forEach(function(e){t.insertBefore(e.getDom(),r),e.showChilds()})}}},n.prototype.hide=function(){var e=this.dom.tr,t=e?e.parentNode:void 0;t&&t.removeChild(e),this.hideChilds()},n.prototype.hideChilds=function(){if(this.childs&&this.expanded){var e=this.getAppend();e.parentNode&&e.parentNode.removeChild(e),this.childs.forEach(function(e){e.hide()})}},n.prototype.appendChild=function(e){if(this._hasChilds()){if(e.setParent(this),e.fieldEditable="object"==this.type,"array"==this.type&&(e.index=this.childs.length),this.childs.push(e),this.expanded){var t=e.getDom(),r=this.getAppend(),a=r?r.parentNode:void 0;r&&a&&a.insertBefore(t,r),e.showChilds()}this.updateDom({updateIndexes:!0}),e.updateDom({recurse:!0})}},n.prototype.moveBefore=function(e,t){if(this._hasChilds()){var r=this.dom.tr?this.dom.tr.parentNode:void 0;if(r){var a=document.createElement("tr");a.style.height=r.clientHeight+"px",r.appendChild(a)}e.parent&&e.parent.removeChild(e),t instanceof l?this.appendChild(e):this.insertBefore(e,t),r&&r.removeChild(a)}},n.prototype.moveTo=function(e,t){e.parent==this&&(this.childs.indexOf(e)<t&&t++);var r=this.childs[t]||this.append;this.moveBefore(e,r)},n.prototype.insertBefore=function(e,t){if(this._hasChilds()){if(t==this.append)e.setParent(this),e.fieldEditable="object"==this.type,this.childs.push(e);else{var r=this.childs.indexOf(t);if(-1==r)throw new Error("Node not found");e.setParent(this),e.fieldEditable="object"==this.type,this.childs.splice(r,0,e)}if(this.expanded){var a=e.getDom(),i=t.getDom(),o=i?i.parentNode:void 0;i&&o&&o.insertBefore(a,i),e.showChilds()}this.updateDom({updateIndexes:!0}),e.updateDom({recurse:!0})}},n.prototype.insertAfter=function(e,t){if(this._hasChilds()){var r=this.childs.indexOf(t),a=this.childs[r+1];a?this.insertBefore(e,a):this.appendChild(e)}},n.prototype.search=function(e){var t=[],r=e?e.toLowerCase():void 0;(delete this.searchField,delete this.searchValue,void 0!=this.field)&&(-1!=String(this.field).toLowerCase().indexOf(r)&&(this.searchField=!0,t.push({node:this,elem:"field"})),this._updateDomField());if(this._hasChilds()){if(this.childs){var a=[];this.childs.forEach(function(t){a=a.concat(t.search(e))}),t=t.concat(a)}if(void 0!=r){0==a.length?this.collapse(!1):this.expand(!1)}}else{if(void 0!=this.value)-1!=String(this.value).toLowerCase().indexOf(r)&&(this.searchValue=!0,t.push({node:this,elem:"value"}));this._updateDomValue()}return t},n.prototype.scrollTo=function(e){if(!this.dom.tr||!this.dom.tr.parentNode)for(var t=this.parent;t;)t.expand(!1),t=t.parent;this.dom.tr&&this.dom.tr.parentNode&&this.editor.scrollTo(this.dom.tr.offsetTop,e)},n.focusElement=void 0,n.prototype.focus=function(e){if(n.focusElement=e,this.dom.tr&&this.dom.tr.parentNode){var t=this.dom;switch(e){case"drag":t.drag?t.drag.focus():t.menu.focus();break;case"menu":t.menu.focus();break;case"expand":this._hasChilds()?t.expand.focus():t.field&&this.fieldEditable?(t.field.focus(),s.selectContentEditable(t.field)):t.value&&!this._hasChilds()?(t.value.focus(),s.selectContentEditable(t.value)):t.menu.focus();break;case"field":t.field&&this.fieldEditable?(t.field.focus(),s.selectContentEditable(t.field)):t.value&&!this._hasChilds()?(t.value.focus(),s.selectContentEditable(t.value)):this._hasChilds()?t.expand.focus():t.menu.focus();break;case"value":default:t.select?t.select.focus():t.value&&!this._hasChilds()?(t.value.focus(),s.selectContentEditable(t.value)):t.field&&this.fieldEditable?(t.field.focus(),s.selectContentEditable(t.field)):this._hasChilds()?t.expand.focus():t.menu.focus()}}},n.select=function(e){setTimeout(function(){s.selectContentEditable(e)},0)},n.prototype.blur=function(){this._getDomValue(!1),this._getDomField(!1)},n.prototype.containsNode=function(e){if(this==e)return!0;var t=this.childs;if(t)for(var r=0,a=t.length;r<a;r++)if(t[r].containsNode(e))return!0;return!1},n.prototype._move=function(e,t){if(e!=t){if(e.containsNode(this))throw new Error("Cannot move a field into a child of itself");e.parent&&e.parent.removeChild(e);var r=e.clone();e.clearDom(),t?this.insertBefore(r,t):this.appendChild(r)}},n.prototype.removeChild=function(e){if(this.childs){var t=this.childs.indexOf(e);if(-1!=t){e.hide(),delete e.searchField,delete e.searchValue;var r=this.childs.splice(t,1)[0];return r.parent=null,this.updateDom({updateIndexes:!0}),r}}},n.prototype._remove=function(e){this.removeChild(e)},n.prototype.changeType=function(e){var t=this.type;if(t!=e){if("string"!=e&&"auto"!=e||"string"!=t&&"auto"!=t){var r,a=this.dom.tr?this.dom.tr.parentNode:void 0,i=(r=this.expanded?this.getAppend():this.getDom())&&r.parentNode?r.nextSibling:void 0;this.hide(),this.clearDom(),this.type=e,"object"==e?(this.childs||(this.childs=[]),this.childs.forEach(function(e,t){e.clearDom(),delete e.index,e.fieldEditable=!0,void 0==e.field&&(e.field="")}),"string"!=t&&"auto"!=t||(this.expanded=!0)):"array"==e?(this.childs||(this.childs=[]),this.childs.forEach(function(e,t){e.clearDom(),e.fieldEditable=!1,e.index=t}),"string"!=t&&"auto"!=t||(this.expanded=!0)):this.expanded=!1,a&&(i?a.insertBefore(this.getDom(),i):a.appendChild(this.getDom())),this.showChilds()}else this.type=e;"auto"!=e&&"string"!=e||(this.value="string"==e?String(this.value):this._stringCast(String(this.value)),this.focus()),this.updateDom({updateIndexes:!0})}},n.prototype._getDomValue=function(e){if(this.dom.value&&"array"!=this.type&&"object"!=this.type&&(this.valueInnerText=s.getInnerText(this.dom.value)),void 0!=this.valueInnerText)try{var t;if("string"==this.type)t=this._unescapeHTML(this.valueInnerText);else{var r=this._unescapeHTML(this.valueInnerText);t=this._stringCast(r)}t!==this.value&&(this.value=t,this._debouncedOnChangeValue())}catch(t){if(this.value=void 0,!0!==e)throw t}},n.prototype._onChangeValue=function(){var e=this.editor.getSelection();if(e.range){var t=s.textDiff(String(this.value),String(this.previousValue));e.range.startOffset=t.start,e.range.endOffset=t.end}var r=this.editor.getSelection();if(r.range){var a=s.textDiff(String(this.previousValue),String(this.value));r.range.startOffset=a.start,r.range.endOffset=a.end}this.editor._onAction("editValue",{node:this,oldValue:this.previousValue,newValue:this.value,oldSelection:e,newSelection:r}),this.previousValue=this.value},n.prototype._onChangeField=function(){var e=this.editor.getSelection();if(e.range){var t=s.textDiff(this.field,this.previousField);e.range.startOffset=t.start,e.range.endOffset=t.end}var r=this.editor.getSelection();if(r.range){var a=s.textDiff(this.previousField,this.field);r.range.startOffset=a.start,r.range.endOffset=a.end}this.editor._onAction("editField",{node:this,oldValue:this.previousField,newValue:this.field,oldSelection:e,newSelection:r}),this.previousField=this.field},n.prototype._updateDomValue=function(){var e=this.dom.value;if(e){var t=["jsoneditor-value"],r=this.value,a="auto"==this.type?s.type(r):this.type,i="string"==a&&s.isUrl(r);if(t.push("jsoneditor-"+a),i&&t.push("jsoneditor-url"),""==String(this.value)&&"array"!=this.type&&"object"!=this.type&&t.push("jsoneditor-empty"),this.searchValueActive&&t.push("jsoneditor-highlight-active"),this.searchValue&&t.push("jsoneditor-highlight"),e.className=t.join(" "),"array"==a||"object"==a){var o=this.childs?this.childs.length:0;e.title=this.type+" containing "+o+" items"}else i&&this.editable.value?e.title="Ctrl+Click or Ctrl+Enter to open url in new window":e.title="";if("boolean"===a&&this.editable.value?(this.dom.checkbox||(this.dom.checkbox=document.createElement("input"),this.dom.checkbox.type="checkbox",this.dom.tdCheckbox=document.createElement("td"),this.dom.tdCheckbox.className="jsoneditor-tree",this.dom.tdCheckbox.appendChild(this.dom.checkbox),this.dom.tdValue.parentNode.insertBefore(this.dom.tdCheckbox,this.dom.tdValue)),this.dom.checkbox.checked=this.value):this.dom.tdCheckbox&&(this.dom.tdCheckbox.parentNode.removeChild(this.dom.tdCheckbox),delete this.dom.tdCheckbox,delete this.dom.checkbox),this.enum&&this.editable.value){if(!this.dom.select){this.dom.select=document.createElement("select"),this.id=this.field+"_"+(new Date).getUTCMilliseconds(),this.dom.select.id=this.id,this.dom.select.name=this.dom.select.id,this.dom.select.option=document.createElement("option"),this.dom.select.option.value="",this.dom.select.option.innerHTML="--",this.dom.select.appendChild(this.dom.select.option);for(var n=0;n<this.enum.length;n++)this.dom.select.option=document.createElement("option"),this.dom.select.option.value=this.enum[n],this.dom.select.option.innerHTML=this.enum[n],this.dom.select.option.value==this.value&&(this.dom.select.option.selected=!0),this.dom.select.appendChild(this.dom.select.option);this.dom.tdSelect=document.createElement("td"),this.dom.tdSelect.className="jsoneditor-tree",this.dom.tdSelect.appendChild(this.dom.select),this.dom.tdValue.parentNode.insertBefore(this.dom.tdSelect,this.dom.tdValue)}!this.schema||this.schema.hasOwnProperty("oneOf")||this.schema.hasOwnProperty("anyOf")||this.schema.hasOwnProperty("allOf")?delete this.valueFieldHTML:(this.valueFieldHTML=this.dom.tdValue.innerHTML,this.dom.tdValue.style.visibility="hidden",this.dom.tdValue.innerHTML="")}else this.dom.tdSelect&&(this.dom.tdSelect.parentNode.removeChild(this.dom.tdSelect),delete this.dom.tdSelect,delete this.dom.select,this.dom.tdValue.innerHTML=this.valueFieldHTML,this.dom.tdValue.style.visibility="",delete this.valueFieldHTML);s.stripFormatting(e)}},n.prototype._updateDomField=function(){var e=this.dom.field;e&&(""==String(this.field)&&"array"!=this.parent.type?s.addClassName(e,"jsoneditor-empty"):s.removeClassName(e,"jsoneditor-empty"),this.searchFieldActive?s.addClassName(e,"jsoneditor-highlight-active"):s.removeClassName(e,"jsoneditor-highlight-active"),this.searchField?s.addClassName(e,"jsoneditor-highlight"):s.removeClassName(e,"jsoneditor-highlight"),s.stripFormatting(e))},n.prototype._getDomField=function(e){if(this.dom.field&&this.fieldEditable&&(this.fieldInnerText=s.getInnerText(this.dom.field)),void 0!=this.fieldInnerText)try{var t=this._unescapeHTML(this.fieldInnerText);t!==this.field&&(this.field=t,this._debouncedOnChangeField())}catch(t){if(this.field=void 0,!0!==e)throw t}},n.prototype.validate=function(){var e=[];if("object"===this.type){for(var t={},r=[],a=0;a<this.childs.length;a++){var i=this.childs[a];t.hasOwnProperty(i.field)&&r.push(i.field),t[i.field]=!0}r.length>0&&(e=this.childs.filter(function(e){return-1!==r.indexOf(e.field)}).map(function(e){return{node:e,error:{message:'duplicate key "'+e.field+'"'}}}))}if(this.childs)for(a=0;a<this.childs.length;a++){var o=this.childs[a].validate();o.length>0&&(e=e.concat(o))}return e},n.prototype.clearDom=function(){this.dom={}},n.prototype.getDom=function(){var e=this.dom;if(e.tr)return e.tr;if(this._updateEditability(),e.tr=document.createElement("tr"),e.tr.node=this,"tree"===this.editor.options.mode){var t=document.createElement("td");if(this.editable.field&&this.parent){var r=document.createElement("button");r.type="button",e.drag=r,r.className="jsoneditor-dragarea",r.title="Maintenir et dplacer le champ (Alt+Shift+Arrows)",t.appendChild(r)}e.tr.appendChild(t);var a=document.createElement("td"),i=document.createElement("button");i.type="button",e.menu=i,i.className="jsoneditor-contextmenu",i.title="Cliquer pour ouvrir le menu contextuel (Ctrl+M)",a.appendChild(e.menu),e.tr.appendChild(a)}var o=document.createElement("td");return e.tr.appendChild(o),e.tree=this._createDomTree(),o.appendChild(e.tree),this.updateDom({updateIndexes:!0}),e.tr},n.onDragStart=function(e,t){if(!Array.isArray(e))return n.onDragStart([e],t);if(0!==e.length){var r=e[0],a=e[e.length-1],i=n.getNodeFromTarget(t.target),o=a._nextSibling(),l=r.editor,h=s.getAbsoluteTop(i.dom.tr)-s.getAbsoluteTop(r.dom.tr);l.mousemove||(l.mousemove=s.addEventListener(window,"mousemove",function(t){n.onDrag(e,t)})),l.mouseup||(l.mouseup=s.addEventListener(window,"mouseup",function(t){n.onDragEnd(e,t)})),l.highlighter.lock(),l.drag={oldCursor:document.body.style.cursor,oldSelection:l.getSelection(),oldBeforeNode:o,mouseX:t.pageX,offsetY:h,level:r.getLevel()},document.body.style.cursor="move",t.preventDefault()}},n.onDrag=function(e,t){if(!Array.isArray(e))return n.onDrag([e],t);if(0!==e.length){var r,a,i,o,h,c,d,u,p,f,m,v,g,y,b=e[0].editor,E=t.pageY-b.drag.offsetY,x=t.pageX,w=!1,P=e[0];if(r=P.dom.tr,p=s.getAbsoluteTop(r),v=r.offsetHeight,E<p){a=r;do{a=a.previousSibling,d=n.getNodeFromTarget(a),f=a?s.getAbsoluteTop(a):0}while(a&&E<f);d&&!d.parent&&(d=void 0),d||(a=(c=r.parentNode.firstChild)?c.nextSibling:void 0,(d=n.getNodeFromTarget(a))==P&&(d=void 0)),d&&E>(f=(a=d.dom.tr)?s.getAbsoluteTop(a):0)+v&&(d=void 0),d&&(e.forEach(function(e){d.parent.moveBefore(e,d)}),w=!0)}else{var _=e[e.length-1];if(o=(h=_.expanded&&_.append?_.append.getDom():_.dom.tr)?h.nextSibling:void 0){m=s.getAbsoluteTop(o),i=o;do{u=n.getNodeFromTarget(i),i&&(g=i.nextSibling?s.getAbsoluteTop(i.nextSibling):0,y=i?g-m:0,u.parent.childs.length==e.length&&u.parent.childs[e.length-1]==_&&(p+=27)),i=i.nextSibling}while(i&&E>p+y);if(u&&u.parent){var S=x-b.drag.mouseX,j=Math.round(S/24/2),C=b.drag.level+j,N=u.getLevel();for(a=u.dom.tr.previousSibling;N<C&&a;){if(d=n.getNodeFromTarget(a),e.some(function(e){return e===d||d._isChildOf(e)}));else{if(!(d instanceof l))break;var k=d.parent.childs;if(k.length==e.length&&k[e.length-1]==_)break;N=(u=n.getNodeFromTarget(a)).getLevel()}a=a.previousSibling}h.nextSibling!=u.dom.tr&&(e.forEach(function(e){u.parent.moveBefore(e,u)}),w=!0)}}}w&&(b.drag.mouseX=x,b.drag.level=P.getLevel()),b.startAutoScroll(E),t.preventDefault()}},n.onDragEnd=function(e,t){if(!Array.isArray(e))return n.onDrag([e],t);if(0!==e.length){var r=e[0],a=r.editor,i=r.parent,o=i.childs.indexOf(r),l=i.childs[o+e.length]||i.append;e[0]&&e[0].dom.menu.focus();var h={nodes:e,oldSelection:a.drag.oldSelection,newSelection:a.getSelection(),oldBeforeNode:a.drag.oldBeforeNode,newBeforeNode:l};h.oldBeforeNode!=h.newBeforeNode&&a._onAction("moveNodes",h),document.body.style.cursor=a.drag.oldCursor,a.highlighter.unlock(),e.forEach(function(e){t.target!==e.dom.drag&&t.target!==e.dom.menu&&a.highlighter.unhighlight()}),delete a.drag,a.mousemove&&(s.removeEventListener(window,"mousemove",a.mousemove),delete a.mousemove),a.mouseup&&(s.removeEventListener(window,"mouseup",a.mouseup),delete a.mouseup),a.stopAutoScroll(),t.preventDefault()}},n.prototype._isChildOf=function(e){for(var t=this.parent;t;){if(t==e)return!0;t=t.parent}return!1},n.prototype._createDomField=function(){return document.createElement("div")},n.prototype.setHighlight=function(e){this.dom.tr&&(e?s.addClassName(this.dom.tr,"jsoneditor-highlight"):s.removeClassName(this.dom.tr,"jsoneditor-highlight"),this.append&&this.append.setHighlight(e),this.childs&&this.childs.forEach(function(t){t.setHighlight(e)}))},n.prototype.setSelected=function(e,t){this.selected=e,this.dom.tr&&(e?s.addClassName(this.dom.tr,"jsoneditor-selected"):s.removeClassName(this.dom.tr,"jsoneditor-selected"),t?s.addClassName(this.dom.tr,"jsoneditor-first"):s.removeClassName(this.dom.tr,"jsoneditor-first"),this.append&&this.append.setSelected(e),this.childs&&this.childs.forEach(function(t){t.setSelected(e)}))},n.prototype.updateValue=function(e){this.value=e,this.updateDom()},n.prototype.updateField=function(e){this.field=e,this.updateDom()},n.prototype.updateDom=function(e){var t=this.dom.tree;t&&(t.style.marginLeft=24*this.getLevel()+"px");var r,a=this.dom.field;a&&(this.fieldEditable?(a.contentEditable=this.editable.field,a.spellcheck=!1,a.className="jsoneditor-field"):a.className="jsoneditor-readonly",r=void 0!=this.index?this.index:void 0!=this.field?this.field:this._hasChilds()?this.type:"",a.innerHTML=this._escapeHTML(r),this._updateSchema());var i=this.dom.value;if(i){var o=this.childs?this.childs.length:0;"array"==this.type?(i.innerHTML="["+o+"]",s.addClassName(this.dom.tr,"jsoneditor-expandable")):"object"==this.type?(i.innerHTML="{"+o+"}",s.addClassName(this.dom.tr,"jsoneditor-expandable")):(i.innerHTML=this._escapeHTML(this.value),s.removeClassName(this.dom.tr,"jsoneditor-expandable"))}this._updateDomField(),this._updateDomValue(),e&&!0===e.updateIndexes&&this._updateDomIndexes(),e&&!0===e.recurse&&this.childs&&this.childs.forEach(function(t){t.updateDom(e)}),this.append&&this.append.updateDom()},n.prototype._updateSchema=function(){this.editor&&this.editor.options&&(this.schema=n._findSchema(this.editor.options.schema,this.getPath()),this.schema?this.enum=n._findEnum(this.schema):delete this.enum)},n._findEnum=function(e){if(e.enum)return e.enum;var t=e.oneOf||e.anyOf||e.allOf;if(t){var r=t.filter(function(e){return e.enum});if(r.length>0)return r[0].enum}return null},n._findSchema=function(e,t){for(var r=e,a=0;a<t.length&&r;a++){var i=t[a];"string"==typeof i&&r.properties?r=r.properties[i]||null:"number"==typeof i&&r.items&&(r=r.items)}return r},n.prototype._updateDomIndexes=function(){var e=this.dom.value,t=this.childs;e&&t&&("array"==this.type?t.forEach(function(e,t){e.index=t;var r=e.dom.field;r&&(r.innerHTML=t)}):"object"==this.type&&t.forEach(function(e){void 0!=e.index&&(delete e.index,void 0==e.field&&(e.field=""))}))},n.prototype._createDomValue=function(){var e;return"array"==this.type?(e=document.createElement("div")).innerHTML="[...]":"object"==this.type?(e=document.createElement("div")).innerHTML="{...}":!this.editable.value&&s.isUrl(this.value)?((e=document.createElement("a")).href=this.value,e.target="_blank",e.innerHTML=this._escapeHTML(this.value)):((e=document.createElement("div")).contentEditable=this.editable.value,e.spellcheck=!1,e.innerHTML=this._escapeHTML(this.value)),e},n.prototype._createDomExpandButton=function(){var e=document.createElement("button");return e.type="button",this._hasChilds()?(e.className=this.expanded?"jsoneditor-expanded":"jsoneditor-collapsed",e.title="Click to expand/collapse this field (Ctrl+E). \nCtrl+Click to expand/collapse including all childs."):(e.className="jsoneditor-invisible",e.title=""),e},n.prototype._createDomTree=function(){var e=this.dom,t=document.createElement("table"),r=document.createElement("tbody");t.style.borderCollapse="collapse",t.className="jsoneditor-values",t.appendChild(r);var a=document.createElement("tr");r.appendChild(a);var i=document.createElement("td");i.className="jsoneditor-tree",a.appendChild(i),e.expand=this._createDomExpandButton(),i.appendChild(e.expand),e.tdExpand=i;var o=document.createElement("td");o.className="jsoneditor-tree",a.appendChild(o),e.field=this._createDomField(),o.appendChild(e.field),e.tdField=o;var s=document.createElement("td");s.className="jsoneditor-tree",a.appendChild(s),"object"!=this.type&&"array"!=this.type&&(s.appendChild(document.createTextNode(":")),s.className="jsoneditor-separator"),e.tdSeparator=s;var n=document.createElement("td");return n.className="jsoneditor-tree",a.appendChild(n),e.value=this._createDomValue(),n.appendChild(e.value),e.tdValue=n,t},n.prototype.onEvent=function(e){var t=e.type,r=e.target||e.srcElement,a=this.dom,i=this,o=this._hasChilds();if(r!=a.drag&&r!=a.menu||("mouseover"==t?this.editor.highlighter.highlight(this):"mouseout"==t&&this.editor.highlighter.unhighlight()),"click"==t&&r==a.menu){var n=i.editor.highlighter;n.highlight(i),n.lock(),s.addClassName(a.menu,"jsoneditor-selected"),this.showContextMenu(a.menu,function(){s.removeClassName(a.menu,"jsoneditor-selected"),n.unlock(),n.unhighlight()})}if("click"==t&&(r==a.expand||("view"===i.editor.options.mode||"form"===i.editor.options.mode)&&"DIV"===r.nodeName)&&o){var l=e.ctrlKey;this._onExpand(l)}"change"==t&&r==a.checkbox&&(this.dom.value.innerHTML=!this.value,this._getDomValue()),"change"==t&&r==a.select&&(this.dom.value.innerHTML=a.select.value,this._getDomValue(),this._updateDomValue());var h=a.value;if(r==h)switch(t){case"blur":case"change":this._getDomValue(!0),this._updateDomValue(),this.value&&(h.innerHTML=this._escapeHTML(this.value));break;case"input":this._getDomValue(!0),this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getSelection();break;case"click":!e.ctrlKey&&this.editable.value||s.isUrl(this.value)&&window.open(this.value,"_blank");break;case"keyup":this._getDomValue(!0),this._updateDomValue();break;case"cut":case"paste":setTimeout(function(){i._getDomValue(!0),i._updateDomValue()},1)}var c=a.field;if(r==c)switch(t){case"blur":case"change":this._getDomField(!0),this._updateDomField(),this.field&&(c.innerHTML=this._escapeHTML(this.field));break;case"input":this._getDomField(!0),this._updateSchema(),this._updateDomField(),this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getSelection();break;case"keyup":this._getDomField(!0),this._updateDomField();break;case"cut":case"paste":setTimeout(function(){i._getDomField(!0),i._updateDomField()},1)}r!=a.tree.parentNode||"click"!=t||e.hasMoved||((void 0!=e.offsetX?e.offsetX<24*(this.getLevel()+1):e.pageX<s.getAbsoluteLeft(a.tdSeparator))||o?c&&(s.setEndOfContentEditable(c),c.focus()):h&&!this.enum&&(s.setEndOfContentEditable(h),h.focus()));(r!=a.tdExpand||o)&&r!=a.tdField&&r!=a.tdSeparator||"click"!=t||e.hasMoved||c&&(s.setEndOfContentEditable(c),c.focus()),"keydown"==t&&this.onKeyDown(e)},n.prototype.onKeyDown=function(e){var t,r,a,i,o,h,c,d,u=e.which||e.keyCode,p=e.target||e.srcElement,f=e.ctrlKey,m=e.shiftKey,v=e.altKey,g=!1,y="tree"===this.editor.options.mode,b=this.editor.multiselection.nodes.length>0?this.editor.multiselection.nodes:[this],E=b[0],x=b[b.length-1];if(13==u){if(p==this.dom.value)this.editable.value&&!e.ctrlKey||s.isUrl(this.value)&&(window.open(this.value,"_blank"),g=!0);else if(p==this.dom.expand){if(this._hasChilds()){var w=e.ctrlKey;this._onExpand(w),p.focus(),g=!0}}}else if(68==u)f&&y&&(n.onDuplicate(b),g=!0);else if(69==u)f&&(this._onExpand(m),p.focus(),g=!0);else if(77==u&&y)f&&(this.showContextMenu(p),g=!0);else if(46==u&&y)f&&(n.onRemove(b),g=!0);else if(45==u&&y)f&&!m?(this._onInsertBefore(),g=!0):f&&m&&(this._onInsertAfter(),g=!0);else if(35==u){if(v){var P=this._lastNode();P&&P.focus(n.focusElement||this._getElementName(p)),g=!0}}else if(36==u){if(v){var _=this._firstNode();_&&_.focus(n.focusElement||this._getElementName(p)),g=!0}}else if(37==u){if(v&&!m){var S=this._previousElement(p);S&&this.focus(this._getElementName(S)),g=!0}else if(v&&m&&y){if(x.expanded){var j=x.getAppend();a=j?j.nextSibling:void 0}else{var C=x.getDom();a=C.nextSibling}a&&(r=n.getNodeFromTarget(a),i=a.nextSibling,O=n.getNodeFromTarget(i),r&&r instanceof l&&1!=x.parent.childs.length&&O&&O.parent&&(o=this.editor.getSelection(),h=x._nextSibling(),b.forEach(function(e){O.parent.moveBefore(e,O)}),this.focus(n.focusElement||this._getElementName(p)),this.editor._onAction("moveNodes",{nodes:b,oldBeforeNode:h,newBeforeNode:O,oldSelection:o,newSelection:this.editor.getSelection()})))}}else if(38==u)v&&!m?((t=this._previousNode())&&(this.editor.deselect(!0),t.focus(n.focusElement||this._getElementName(p))),g=!0):!v&&f&&m&&y?((t=this._previousNode())&&((d=this.editor.multiselection).start=d.start||this,d.end=t,c=this.editor._findTopLevelNodes(d.start,d.end),this.editor.select(c),t.focus("field")),g=!0):v&&m&&y&&((t=E._previousNode())&&t.parent&&(o=this.editor.getSelection(),h=x._nextSibling(),b.forEach(function(e){t.parent.moveBefore(e,t)}),this.focus(n.focusElement||this._getElementName(p)),this.editor._onAction("moveNodes",{nodes:b,oldBeforeNode:h,newBeforeNode:t,oldSelection:o,newSelection:this.editor.getSelection()})),g=!0);else if(39==u){if(v&&!m){var N=this._nextElement(p);N&&this.focus(this._getElementName(N)),g=!0}else if(v&&m&&y){var k=(C=E.getDom()).previousSibling;k&&(t=n.getNodeFromTarget(k))&&t.parent&&t instanceof l&&!t.isVisible()&&(o=this.editor.getSelection(),h=x._nextSibling(),b.forEach(function(e){t.parent.moveBefore(e,t)}),this.focus(n.focusElement||this._getElementName(p)),this.editor._onAction("moveNodes",{nodes:b,oldBeforeNode:h,newBeforeNode:t,oldSelection:o,newSelection:this.editor.getSelection()}))}}else if(40==u)if(v&&!m)(r=this._nextNode())&&(this.editor.deselect(!0),r.focus(n.focusElement||this._getElementName(p))),g=!0;else if(!v&&f&&m&&y)(r=this._nextNode())&&((d=this.editor.multiselection).start=d.start||this,d.end=r,c=this.editor._findTopLevelNodes(d.start,d.end),this.editor.select(c),r.focus("field")),g=!0;else if(v&&m&&y){var O=(r=x.expanded?x.append?x.append._nextNode():void 0:x._nextNode())&&(r._nextNode()||r.parent.append);O&&O.parent&&(o=this.editor.getSelection(),h=x._nextSibling(),b.forEach(function(e){O.parent.moveBefore(e,O)}),this.focus(n.focusElement||this._getElementName(p)),this.editor._onAction("moveNodes",{nodes:b,oldBeforeNode:h,newBeforeNode:O,oldSelection:o,newSelection:this.editor.getSelection()})),g=!0}g&&(e.preventDefault(),e.stopPropagation())},n.prototype._onExpand=function(e){if(e){var t=this.dom.tr.parentNode,r=t.parentNode,a=r.scrollTop;r.removeChild(t)}this.expanded?this.collapse(e):this.expand(e),e&&(r.appendChild(t),r.scrollTop=a)},n.onRemove=function(e){if(!Array.isArray(e))return n.onRemove([e]);if(e&&e.length>0){var t=e[0],r=t.parent,a=t.editor,i=t.getIndex();a.highlighter.unhighlight();var o=a.getSelection();n.blurNodes(e);var s=a.getSelection();e.forEach(function(e){e.parent._remove(e)}),a._onAction("removeNodes",{nodes:e.slice(0),parent:r,index:i,oldSelection:o,newSelection:s})}},n.onDuplicate=function(e){if(!Array.isArray(e))return n.onDuplicate([e]);if(e&&e.length>0){var t=e[e.length-1],r=t.parent,a=t.editor;a.deselect(a.multiselection.nodes);var i=a.getSelection(),o=t,s=e.map(function(e){var t=e.clone();return r.insertAfter(t,o),o=t,t});1===e.length?s[0].focus():a.select(s);var l=a.getSelection();a._onAction("duplicateNodes",{afterNode:t,nodes:s,parent:r,oldSelection:i,newSelection:l})}},n.prototype._onInsertBefore=function(e,t,r){var a=this.editor.getSelection(),i=new n(this.editor,{field:void 0!=e?e:"",value:void 0!=t?t:"",type:r});i.expand(!0),this.parent.insertBefore(i,this),this.editor.highlighter.unhighlight(),i.focus("field");var o=this.editor.getSelection();this.editor._onAction("insertBeforeNodes",{nodes:[i],beforeNode:this,parent:this.parent,oldSelection:a,newSelection:o})},n.prototype._onInsertAfter=function(e,t,r){var a=this.editor.getSelection(),i=new n(this.editor,{field:void 0!=e?e:"",value:void 0!=t?t:"",type:r});i.expand(!0),this.parent.insertAfter(i,this),this.editor.highlighter.unhighlight(),i.focus("field");var o=this.editor.getSelection();this.editor._onAction("insertAfterNodes",{nodes:[i],afterNode:this,parent:this.parent,oldSelection:a,newSelection:o})},n.prototype._onAppend=function(e,t,r){var a=this.editor.getSelection(),i=new n(this.editor,{field:void 0!=e?e:"",value:void 0!=t?t:"",type:r});i.expand(!0),this.parent.appendChild(i),this.editor.highlighter.unhighlight(),i.focus("field");var o=this.editor.getSelection();this.editor._onAction("appendNodes",{nodes:[i],parent:this.parent,oldSelection:a,newSelection:o})},n.prototype._onChangeType=function(e){var t=this.type;if(e!=t){var r=this.editor.getSelection();this.changeType(e);var a=this.editor.getSelection();this.editor._onAction("changeType",{node:this,oldType:t,newType:e,oldSelection:r,newSelection:a})}},n.prototype.sort=function(e){if(this._hasChilds()){var t="desc"==e?-1:1,r="array"==this.type?"value":"field";this.hideChilds();var i=this.childs,o=this.sortOrder;this.childs=this.childs.concat(),this.childs.sort(function(e,i){return t*a(e[r],i[r])}),this.sortOrder=1==t?"asc":"desc",this.editor._onAction("sort",{node:this,oldChilds:i,oldSort:o,newChilds:this.childs,newSort:this.sortOrder}),this.showChilds()}},n.prototype.getAppend=function(){return this.append||(this.append=new l(this.editor),this.append.setParent(this)),this.append.getDom()},n.getNodeFromTarget=function(e){for(;e;){if(e.node)return e.node;e=e.parentNode}},n.blurNodes=function(e){if(Array.isArray(e)){var t=e[0],r=t.parent,a=t.getIndex();r.childs[a+e.length]?r.childs[a+e.length].focus():r.childs[a-1]?r.childs[a-1].focus():r.focus()}else n.blurNodes([e])},n.prototype._nextSibling=function(){var e=this.parent.childs.indexOf(this);return this.parent.childs[e+1]||this.parent.append},n.prototype._previousNode=function(){var e=null,t=this.getDom();if(t&&t.parentNode){var r=t;do{r=r.previousSibling,e=n.getNodeFromTarget(r)}while(r&&e instanceof l&&!e.isVisible())}return e},n.prototype._nextNode=function(){var e=null,t=this.getDom();if(t&&t.parentNode){var r=t;do{r=r.nextSibling,e=n.getNodeFromTarget(r)}while(r&&e instanceof l&&!e.isVisible())}return e},n.prototype._firstNode=function(){var e=null,t=this.getDom();if(t&&t.parentNode){var r=t.parentNode.firstChild;e=n.getNodeFromTarget(r)}return e},n.prototype._lastNode=function(){var e=null,t=this.getDom();if(t&&t.parentNode){var r=t.parentNode.lastChild;for(e=n.getNodeFromTarget(r);r&&e instanceof l&&!e.isVisible();)r=r.previousSibling,e=n.getNodeFromTarget(r)}return e},n.prototype._previousElement=function(e){var t=this.dom;switch(e){case t.value:if(this.fieldEditable)return t.field;case t.field:if(this._hasChilds())return t.expand;case t.expand:return t.menu;case t.menu:if(t.drag)return t.drag;default:return null}},n.prototype._nextElement=function(e){var t=this.dom;switch(e){case t.drag:return t.menu;case t.menu:if(this._hasChilds())return t.expand;case t.expand:if(this.fieldEditable)return t.field;case t.field:if(!this._hasChilds())return t.value;default:return null}},n.prototype._getElementName=function(e){var t=this.dom;for(var r in t)if(t.hasOwnProperty(r)&&t[r]==e)return r;return null},n.prototype._hasChilds=function(){return"array"==this.type||"object"==this.type},n.TYPE_TITLES={auto:'Champ de type "auto". Le type de ce champ est automatiquement dtermin d\'aprs sa valeur et peut tre des caractres, un nombre, un boolen, ou nul.',object:'Champ de type "objet". Un objet contient des paires non ordonne de cl/valeur.',array:'Champ de type "tableau". Un tableau contient une collection de valeurs ordonnes.',string:'Champ de type "caractres". Le type du champ n\'est pas dtermin en fonction de sa valeur, mais est toujours de type chane de caractres.'},n.prototype.showContextMenu=function(e,t){var r=this,a=n.TYPE_TITLES,o=[];if(this.editable.value&&o.push({text:"Type",title:"Changer le type du champ",className:"jsoneditor-type-"+this.type,submenu:[{text:"Auto",className:"jsoneditor-type-auto"+("auto"==this.type?" jsoneditor-selected":""),title:a.auto,click:function(){r._onChangeType("auto")}},{text:"Tableau",className:"jsoneditor-type-array"+("array"==this.type?" jsoneditor-selected":""),title:a.array,click:function(){r._onChangeType("array")}},{text:"Objet",className:"jsoneditor-type-object"+("object"==this.type?" jsoneditor-selected":""),title:a.object,click:function(){r._onChangeType("object")}},{text:"Caractres",className:"jsoneditor-type-string"+("string"==this.type?" jsoneditor-selected":""),title:a.string,click:function(){r._onChangeType("string")}}]}),this._hasChilds()){var s="asc"==this.sortOrder?"desc":"asc";o.push({text:"Trier",title:"Trier les enfants par "+this.type,className:"jsoneditor-sort-"+s,click:function(){r.sort(s)},submenu:[{text:"Ascendant",className:"jsoneditor-sort-asc",title:"Trier les enfants par "+this.type+" dans un ordre ascendant",click:function(){r.sort("asc")}},{text:"Descendant",className:"jsoneditor-sort-desc",title:"Trier les enfants par "+this.type+" dans un ordre descendant",click:function(){r.sort("desc")}}]})}if(this.parent&&this.parent._hasChilds()){o.length&&o.push({type:"separator"});var l=r.parent.childs;r==l[l.length-1]&&o.push({text:"Postjouter",title:"Ajouter un nouveau champ de type 'auto' aprs ce champ (Ctrl+Shift+Ins)",submenuTitle:"Slectionner le type du champ  ajouter",className:"jsoneditor-append",click:function(){r._onAppend("","","auto")},submenu:[{text:"Auto",className:"jsoneditor-type-auto",title:a.auto,click:function(){r._onAppend("","","auto")}},{text:"Tableau",className:"jsoneditor-type-array",title:a.array,click:function(){r._onAppend("",[])}},{text:"Objet",className:"jsoneditor-type-object",title:a.object,click:function(){r._onAppend("",{})}},{text:"Caractres",className:"jsoneditor-type-string",title:a.string,click:function(){r._onAppend("","","string")}}]}),o.push({text:"Ajouter",title:"Ajouter un nouveau champ de type 'auto' avant ce champ (Ctrl+Ins)",submenuTitle:"Slectionner le type du champ  ajouter",className:"jsoneditor-insert",click:function(){r._onInsertBefore("","","auto")},submenu:[{text:"Auto",className:"jsoneditor-type-auto",title:a.auto,click:function(){r._onInsertBefore("","","auto")}},{text:"Tableau",className:"jsoneditor-type-array",title:a.array,click:function(){r._onInsertBefore("",[])}},{text:"Objet",className:"jsoneditor-type-object",title:a.object,click:function(){r._onInsertBefore("",{})}},{text:"Caractres",className:"jsoneditor-type-string",title:a.string,click:function(){r._onInsertBefore("","","string")}}]}),this.editable.field&&(o.push({text:"Dupliquer",title:"Dupliquer ce champ (Ctrl+D)",className:"jsoneditor-duplicate",click:function(){n.onDuplicate(r)}}),o.push({text:"Supprimer",title:"Supprimer ce champ (Ctrl+Del)",className:"jsoneditor-remove",click:function(){n.onRemove(r)}}))}new i(o,{close:t}).show(e,this.editor.content)},n.prototype._getType=function(e){return e instanceof Array?"array":e instanceof Object?"object":"string"==typeof e&&"string"!=typeof this._stringCast(e)?"string":"auto"},n.prototype._stringCast=function(e){var t=e.toLowerCase(),r=Number(e),a=parseFloat(e);return""==e?"":"null"==t?null:"true"==t||"false"!=t&&(isNaN(r)||isNaN(a)?e:r)},n.prototype._escapeHTML=function(e){if("string"!=typeof e)return String(e);var t=String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;").replace(/^ /,"&nbsp;").replace(/ $/,"&nbsp;"),r=JSON.stringify(t),a=r.substring(1,r.length-1);return!0===this.editor.options.escapeUnicode&&(a=s.escapeUnicodeChars(a)),a},n.prototype._unescapeHTML=function(e){var t='"'+this._escapeJSON(e)+'"';return s.parse(t).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;|\u00A0/g," ").replace(/&amp;/g,"&")},n.prototype._escapeJSON=function(e){for(var t="",r=0;r<e.length;){var a=e.charAt(r);"\n"==a?t+="\\n":"\\"==a?(t+=a,r++,""!==(a=e.charAt(r))&&-1!='"\\/bfnrtu'.indexOf(a)||(t+="\\"),t+=a):t+='"'==a?'\\"':a,r++}return t};var l=o(n);t.exports=n},{"./ContextMenu":55,"./appendNodeFactory":64,"./util":68,"javascript-natural-sort":50}],61:[function(e,t,r){"use strict";function a(e,t){var r=this;this.editor=e,this.timeout=void 0,this.delay=200,this.lastText=void 0,this.dom={},this.dom.container=t;var a=document.createElement("table");this.dom.table=a,a.className="jsoneditor-search",t.appendChild(a);var i=document.createElement("tbody");this.dom.tbody=i,a.appendChild(i);var o=document.createElement("tr");i.appendChild(o);var s=document.createElement("td");o.appendChild(s);var n=document.createElement("div");this.dom.results=n,n.className="jsoneditor-results",s.appendChild(n),s=document.createElement("td"),o.appendChild(s);var l=document.createElement("div");this.dom.input=l,l.className="jsoneditor-frame",l.title="Chercher dans les champs et les valeurs",s.appendChild(l);var h=document.createElement("table");l.appendChild(h);var c=document.createElement("tbody");h.appendChild(c),o=document.createElement("tr"),c.appendChild(o);var d=document.createElement("button");d.type="button",d.className="jsoneditor-refresh",(s=document.createElement("td")).appendChild(d),o.appendChild(s);var u=document.createElement("input");this.dom.search=u,u.oninput=function(e){r._onDelayedSearch(e)},u.onchange=function(e){r._onSearch()},u.onkeydown=function(e){r._onKeyDown(e)},u.onkeyup=function(e){r._onKeyUp(e)},d.onclick=function(e){u.select()},(s=document.createElement("td")).appendChild(u),o.appendChild(s);var p=document.createElement("button");p.type="button",p.title="Rsultat suivant (Entrer)",p.className="jsoneditor-next",p.onclick=function(){r.next()},(s=document.createElement("td")).appendChild(p),o.appendChild(s);var f=document.createElement("button");f.type="button",f.title="Rsultat prcdent (Shift+Entrer)",f.className="jsoneditor-previous",f.onclick=function(){r.previous()},(s=document.createElement("td")).appendChild(f),o.appendChild(s)}a.prototype.next=function(e){if(void 0!=this.results){var t=void 0!=this.resultIndex?this.resultIndex+1:0;t>this.results.length-1&&(t=0),this._setActiveResult(t,e)}},a.prototype.previous=function(e){if(void 0!=this.results){var t=this.results.length-1,r=void 0!=this.resultIndex?this.resultIndex-1:t;r<0&&(r=t),this._setActiveResult(r,e)}},a.prototype._setActiveResult=function(e,t){if(this.activeResult){var r=this.activeResult.node;"field"==this.activeResult.elem?delete r.searchFieldActive:delete r.searchValueActive,r.updateDom()}if(!this.results||!this.results[e])return this.resultIndex=void 0,void(this.activeResult=void 0);this.resultIndex=e;var a=this.results[this.resultIndex].node,i=this.results[this.resultIndex].elem;"field"==i?a.searchFieldActive=!0:a.searchValueActive=!0,this.activeResult=this.results[this.resultIndex],a.updateDom(),a.scrollTo(function(){t&&a.focus(i)})},a.prototype._clearDelay=function(){void 0!=this.timeout&&(clearTimeout(this.timeout),delete this.timeout)},a.prototype._onDelayedSearch=function(e){this._clearDelay();var t=this;this.timeout=setTimeout(function(e){t._onSearch()},this.delay)},a.prototype._onSearch=function(e){this._clearDelay();var t=this.dom.search.value,r=t.length>0?t:void 0;if(r!=this.lastText||e)if(this.lastText=r,this.results=this.editor.search(r),this._setActiveResult(void 0),void 0!=r){var a=this.results.length;switch(a){case 0:this.dom.results.innerHTML="no&nbsp;results";break;case 1:this.dom.results.innerHTML="1&nbsp;result";break;default:this.dom.results.innerHTML=a+"&nbsp;results"}}else this.dom.results.innerHTML=""},a.prototype._onKeyDown=function(e){var t=e.which;27==t?(this.dom.search.value="",this._onSearch(),e.preventDefault(),e.stopPropagation()):13==t&&(e.ctrlKey?this._onSearch(!0):e.shiftKey?this.previous():this.next(),e.preventDefault(),e.stopPropagation())},a.prototype._onKeyUp=function(e){var t=e.keyCode;27!=t&&13!=t&&this._onDelayedSearch(e)},a.prototype.clear=function(){this.dom.search.value="",this._onSearch()},a.prototype.destroy=function(){this.editor=null,this.dom.container.removeChild(this.dom.table),this.dom=null,this.results=null,this.activeResult=null,this._clearDelay()},t.exports=a},{}],62:[function(e,t,r){var a;if(window.ace)a=window.ace;else try{a=e("brace"),e("brace/mode/json"),e("brace/ext/searchbox")}catch(e){}t.exports=a},{brace:"brace","brace/ext/searchbox":"brace/ext/searchbox","brace/mode/json":"brace/mode/json"}],63:[function(e,t,r){ace.define("ace/theme/jsoneditor",["require","exports","module","ace/lib/dom"],function(e,t,r){t.isDark=!1,t.cssClass="ace-jsoneditor",t.cssText='.ace-jsoneditor .ace_gutter {background: #ebebeb;color: #333}.ace-jsoneditor.ace_editor {font-family: droid sans mono, consolas, monospace, courier new, courier, sans-serif;line-height: 1.3;background-color: #fff;}.ace-jsoneditor .ace_print-margin {width: 1px;background: #e8e8e8}.ace-jsoneditor .ace_scroller {background-color: #FFFFFF}.ace-jsoneditor .ace_text-layer {color: gray}.ace-jsoneditor .ace_variable {color: #1a1a1a}.ace-jsoneditor .ace_cursor {border-left: 2px solid #000000}.ace-jsoneditor .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #000000}.ace-jsoneditor .ace_marker-layer .ace_selection {background: lightgray}.ace-jsoneditor.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #FFFFFF;border-radius: 2px}.ace-jsoneditor .ace_marker-layer .ace_step {background: rgb(255, 255, 0)}.ace-jsoneditor .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #BFBFBF}.ace-jsoneditor .ace_marker-layer .ace_active-line {background: #FFFBD1}.ace-jsoneditor .ace_gutter-active-line {background-color : #dcdcdc}.ace-jsoneditor .ace_marker-layer .ace_selected-word {border: 1px solid lightgray}.ace-jsoneditor .ace_invisible {color: #BFBFBF}.ace-jsoneditor .ace_keyword,.ace-jsoneditor .ace_meta,.ace-jsoneditor .ace_support.ace_constant.ace_property-value {color: #AF956F}.ace-jsoneditor .ace_keyword.ace_operator {color: #484848}.ace-jsoneditor .ace_keyword.ace_other.ace_unit {color: #96DC5F}.ace-jsoneditor .ace_constant.ace_language {color: darkorange}.ace-jsoneditor .ace_constant.ace_numeric {color: red}.ace-jsoneditor .ace_constant.ace_character.ace_entity {color: #BF78CC}.ace-jsoneditor .ace_invalid {color: #FFFFFF;background-color: #FF002A;}.ace-jsoneditor .ace_fold {background-color: #AF956F;border-color: #000000}.ace-jsoneditor .ace_storage,.ace-jsoneditor .ace_support.ace_class,.ace-jsoneditor .ace_support.ace_function,.ace-jsoneditor .ace_support.ace_other,.ace-jsoneditor .ace_support.ace_type {color: #C52727}.ace-jsoneditor .ace_string {color: green}.ace-jsoneditor .ace_comment {color: #BCC8BA}.ace-jsoneditor .ace_entity.ace_name.ace_tag,.ace-jsoneditor .ace_entity.ace_other.ace_attribute-name {color: #606060}.ace-jsoneditor .ace_markup.ace_underline {text-decoration: underline}.ace-jsoneditor .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y}',e("../lib/dom").importCssString(t.cssText,t.cssClass)})},{}],64:[function(e,t,r){"use strict";var a=e("./util"),i=e("./ContextMenu");t.exports=function(e){function t(e){this.editor=e,this.dom={}}return t.prototype=new e,t.prototype.getDom=function(){var e=this.dom;if(e.tr)return e.tr;this._updateEditability();var t=document.createElement("tr");if(t.node=this,e.tr=t,"tree"===this.editor.options.mode){e.tdDrag=document.createElement("td");var r=document.createElement("td");e.tdMenu=r;var a=document.createElement("button");a.type="button",a.className="jsoneditor-contextmenu",a.title="Click to open the actions menu (Ctrl+M)",e.menu=a,r.appendChild(e.menu)}var i=document.createElement("td"),o=document.createElement("div");return o.innerHTML="(empty)",o.className="jsoneditor-readonly",i.appendChild(o),e.td=i,e.text=o,this.updateDom(),t},t.prototype.updateDom=function(){var e=this.dom,t=e.td;t&&(t.style.paddingLeft=24*this.getLevel()+26+"px");var r=e.text;r&&(r.innerHTML="(empty "+this.parent.type+")");var a=e.tr;this.isVisible()?e.tr.firstChild||(e.tdDrag&&a.appendChild(e.tdDrag),e.tdMenu&&a.appendChild(e.tdMenu),a.appendChild(t)):e.tr.firstChild&&(e.tdDrag&&a.removeChild(e.tdDrag),e.tdMenu&&a.removeChild(e.tdMenu),a.removeChild(t))},t.prototype.isVisible=function(){return 0==this.parent.childs.length},t.prototype.showContextMenu=function(t,r){var a=this,o=e.TYPE_TITLES,s=[{text:"Append",title:"Append a new field with type 'auto' (Ctrl+Shift+Ins)",submenuTitle:"Select the type of the field to be appended",className:"jsoneditor-insert",click:function(){a._onAppend("","","auto")},submenu:[{text:"Auto",className:"jsoneditor-type-auto",title:o.auto,click:function(){a._onAppend("","","auto")}},{text:"Array",className:"jsoneditor-type-array",title:o.array,click:function(){a._onAppend("",[])}},{text:"Object",className:"jsoneditor-type-object",title:o.object,click:function(){a._onAppend("",{})}},{text:"String",className:"jsoneditor-type-string",title:o.string,click:function(){a._onAppend("","","string")}}]}];new i(s,{close:r}).show(t,this.editor.content)},t.prototype.onEvent=function(e){var t=e.type,r=e.target||e.srcElement,i=this.dom;if(r==i.menu&&("mouseover"==t?this.editor.highlighter.highlight(this.parent):"mouseout"==t&&this.editor.highlighter.unhighlight()),"click"==t&&r==i.menu){var o=this.editor.highlighter;o.highlight(this.parent),o.lock(),a.addClassName(i.menu,"jsoneditor-selected"),this.showContextMenu(i.menu,function(){a.removeClassName(i.menu,"jsoneditor-selected"),o.unlock(),o.unhighlight()})}"keydown"==t&&this.onKeyDown(e)},t}},{"./ContextMenu":55,"./util":68}],65:[function(e,t,r){var a,i=((a={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,r,a,i,o,s){var n=o.length-1;switch(i){case 1:this.$=e.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(e);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=o[n-1];case 13:this.$={};break;case 14:this.$=o[n-1];break;case 15:this.$=[o[n-2],o[n]];break;case 16:this.$={},this.$[o[n][0]]=o[n][1];break;case 17:this.$=o[n-2],o[n-2][o[n][0]]=o[n][1];break;case 18:this.$=[];break;case 19:this.$=o[n-1];break;case 20:this.$=[o[n]];break;case 21:this.$=o[n-2],o[n-2].push(o[n])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,r=[0],a=[null],i=[],o=this.table,s="",n=0,l=0,h=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;function d(){var e;return"number"!=typeof(e=t.lexer.lex()||1)&&(e=t.symbols_[e]||e),e}i.push(c),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var u,p,f,m,v,g,y,b,E,x,w={};;){if(f=r[r.length-1],this.defaultActions[f]?m=this.defaultActions[f]:(null==u&&(u=d()),m=o[f]&&o[f][u]),void 0===m||!m.length||!m[0]){if(!h){E=[];for(g in o[f])this.terminals_[g]&&g>2&&E.push("'"+this.terminals_[g]+"'");var P="";P=this.lexer.showPosition?"Parse error on line "+(n+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+E.join(", ")+", got '"+this.terminals_[u]+"'":"Parse error on line "+(n+1)+": Unexpected "+(1==u?"end of input":"'"+(this.terminals_[u]||u)+"'"),this.parseError(P,{text:this.lexer.match,token:this.terminals_[u]||u,line:this.lexer.yylineno,loc:c,expected:E})}if(3==h){if(1==u)throw new Error(P||"Parsing halted.");l=this.lexer.yyleng,s=this.lexer.yytext,n=this.lexer.yylineno,c=this.lexer.yylloc,u=d()}for(;!(2..toString()in o[f]);){if(0==f)throw new Error(P||"Parsing halted.");x=1,r.length=r.length-2*x,a.length=a.length-x,i.length=i.length-x,f=r[r.length-1]}p=u,u=2,m=o[f=r[r.length-1]]&&o[f][2],h=3}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+u);switch(m[0]){case 1:r.push(u),a.push(this.lexer.yytext),i.push(this.lexer.yylloc),r.push(m[1]),u=null,p?(u=p,p=null):(l=this.lexer.yyleng,s=this.lexer.yytext,n=this.lexer.yylineno,c=this.lexer.yylloc,h>0&&h--);break;case 2:if(y=this.productions_[m[1]][1],w.$=a[a.length-y],w._$={first_line:i[i.length-(y||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(y||1)].first_column,last_column:i[i.length-1].last_column},void 0!==(v=this.performAction.call(w,s,l,n,this.yy,m[1],a,i)))return v;y&&(r=r.slice(0,-1*y*2),a=a.slice(0,-1*y),i=i.slice(0,-1*y)),r.push(this.productions_[m[1]][0]),a.push(w.$),i.push(w._$),b=o[r[r.length-2]][r[r.length-1]],r.push(b);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(e,t){if(!this.yy.parseError)throw new Error(e);this.yy.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e,e.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},less:function(e){this._input=this.match.slice(e)+this._input},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,r,a,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),s=0;s<o.length&&(!(r=this._input.match(this.rules[o[s]]))||t&&!(r[0].length>t[0].length)||(t=r,a=s,this.options.flex));s++);return t?((i=t[0].match(/\n.*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[a],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,r,a){switch(r){case 0:break;case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},a);void 0!==e&&void 0!==r&&(r.parser=i,r.parse=i.parse.bind(i))},{}],66:[function(e,t,r){"use strict";var a=e("./ace"),i=e("./ModeSwitcher"),o=e("./util"),s={},n="ace/theme/jsoneditor";s.create=function(t,r){r=r||{},this.options=r,r.indentation?this.indentation=Number(r.indentation):this.indentation=2;var s=r.ace?r.ace:a;if(this.mode="code"==r.mode?"code":"text","code"==this.mode&&void 0===s&&(this.mode="text",console.warn("Failed to load Ace editor, falling back to plain text mode. Please use a JSONEditor bundle including Ace, or pass Ace as via the configuration option `ace`.")),this.theme=r.theme||n,this.theme===n&&s)try{e("./ace/theme-jsoneditor")}catch(e){console.error(e)}var l=this;this.container=t,this.dom={},this.aceEditor=void 0,this.textarea=void 0,this.validateSchema=null,this._debouncedValidate=o.debounce(this.validate.bind(this),this.DEBOUNCE_INTERVAL),this.width=t.clientWidth,this.height=t.clientHeight,this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode,this.frame.onclick=function(e){e.preventDefault()},this.frame.onkeydown=function(e){l._onKeyDown(e)},this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu);var h=document.createElement("button");h.type="button",h.className="jsoneditor-format",h.title="Format JSON data, with proper indentation and line feeds (Ctrl+\\)",this.menu.appendChild(h),h.onclick=function(){try{l.format(),l._onChange()}catch(e){l._onError(e)}};var c=document.createElement("button");c.type="button",c.className="jsoneditor-compact",c.title="Compact JSON data, remove all whitespaces (Ctrl+Shift+\\)",this.menu.appendChild(c),c.onclick=function(){try{l.compact(),l._onChange()}catch(e){l._onError(e)}},this.options&&this.options.modes&&this.options.modes.length&&(this.modeSwitcher=new i(this.menu,this.options.modes,this.options.mode,function(e){l.setMode(e),l.modeSwitcher.focus()}));var d=this.options.onEditable&&typeof("function"===this.options.onEditable)&&!this.options.onEditable({});if(this.content=document.createElement("div"),this.content.className="jsoneditor-outer",this.frame.appendChild(this.content),this.container.appendChild(this.frame),"code"==this.mode){this.editorDom=document.createElement("div"),this.editorDom.style.height="100%",this.editorDom.style.width="100%",this.content.appendChild(this.editorDom);var u=s.edit(this.editorDom);u.$blockScrolling=1/0,u.setTheme(this.theme),u.setOptions({readOnly:d}),u.setShowPrintMargin(!1),u.setFontSize(13),u.getSession().setMode("ace/mode/json"),u.getSession().setTabSize(this.indentation),u.getSession().setUseSoftTabs(!0),u.getSession().setUseWrapMode(!0),u.commands.bindKey("Ctrl-L",null),u.commands.bindKey("Command-L",null),this.aceEditor=u,this.hasOwnProperty("editor")||Object.defineProperty(this,"editor",{get:function(){return console.warn('Property "editor" has been renamed to "aceEditor".'),l.aceEditor},set:function(e){console.warn('Property "editor" has been renamed to "aceEditor".'),l.aceEditor=e}});var p=document.createElement("a");p.appendChild(document.createTextNode("powered by ace")),p.href="http://ace.ajax.org",p.target="_blank",p.className="jsoneditor-poweredBy",p.onclick=function(){window.open(p.href,p.target)},this.menu.appendChild(p),u.on("change",this._onChange.bind(this))}else{var f=document.createElement("textarea");f.className="jsoneditor-text",f.spellcheck=!1,this.content.appendChild(f),this.textarea=f,this.textarea.readOnly=d,null===this.textarea.oninput?this.textarea.oninput=this._onChange.bind(this):this.textarea.onchange=this._onChange.bind(this)}this.setSchema(this.options.schema)},s._onChange=function(){if(this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(e){console.error("Error in onChange callback: ",e)}},s._onKeyDown=function(e){var t=!1;220==(e.which||e.keyCode)&&e.ctrlKey&&(e.shiftKey?(this.compact(),this._onChange()):(this.format(),this._onChange()),t=!0),t&&(e.preventDefault(),e.stopPropagation())},s.destroy=function(){this.aceEditor&&(this.aceEditor.destroy(),this.aceEditor=null),this.frame&&this.container&&this.frame.parentNode==this.container&&this.container.removeChild(this.frame),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this.textarea=null,this._debouncedValidate=null},s.compact=function(){var e=this.get(),t=JSON.stringify(e);this.setText(t)},s.format=function(){var e=this.get(),t=JSON.stringify(e,null,this.indentation);this.setText(t)},s.focus=function(){this.textarea&&this.textarea.focus(),this.aceEditor&&this.aceEditor.focus()},s.resize=function(){if(this.aceEditor){this.aceEditor.resize(!1)}},s.set=function(e){this.setText(JSON.stringify(e,null,this.indentation))},s.get=function(){var e,t=this.getText();try{e=o.parse(t)}catch(r){t=o.sanitize(t),e=o.parse(t)}return e},s.getText=function(){return this.textarea?this.textarea.value:this.aceEditor?this.aceEditor.getValue():""},s.setText=function(e){var t;if(t=!0===this.options.escapeUnicode?o.escapeUnicodeChars(e):e,this.textarea&&(this.textarea.value=t),this.aceEditor){var r=this.options.onChange;this.options.onChange=null,this.aceEditor.setValue(t,-1),this.options.onChange=r}this.validate()},s.validate=function(){this.dom.validationErrors&&(this.dom.validationErrors.parentNode.removeChild(this.dom.validationErrors),this.dom.validationErrors=null,this.content.style.marginBottom="",this.content.style.paddingBottom="");var e,t=!1,r=[];try{e=this.get(),t=!0}catch(e){}t&&this.validateSchema&&(this.validateSchema(e)||(r=this.validateSchema.errors.map(function(e){return o.improveSchemaError(e)})));if(r.length>0){if(r.length>3){r=r.slice(0,3);var a=this.validateSchema.errors.length-3;r.push("("+a+" more errors...)")}var i=document.createElement("div");i.innerHTML='<table class="jsoneditor-text-errors"><tbody>'+r.map(function(e){return'<tr><td><button class="jsoneditor-schema-error"></button></td>'+("string"==typeof e?'<td colspan="2"><pre>'+e+"</pre></td>":"<td>"+e.dataPath+"</td><td>"+e.message+"</td>")+"</tr>"}).join("")+"</tbody></table>",this.dom.validationErrors=i,this.frame.appendChild(i);var s=i.clientHeight;this.content.style.marginBottom=-s+"px",this.content.style.paddingBottom=s+"px"}if(this.aceEditor){this.aceEditor.resize(!1)}},t.exports=[{mode:"text",mixin:s,data:"text",load:s.format},{mode:"code",mixin:s,data:"text",load:s.format}]},{"./ModeSwitcher":59,"./ace":62,"./ace/theme-jsoneditor":63,"./util":68}],67:[function(e,t,r){"use strict";var a=e("./Highlighter"),i=e("./History"),o=e("./SearchBox"),s=e("./ContextMenu"),n=e("./Node"),l=e("./ModeSwitcher"),h=e("./util"),c={create:function(e,t){if(!e)throw new Error("No container element provided.");this.container=e,this.dom={},this.highlighter=new a,this.selection=void 0,this.multiselection={nodes:[]},this.validateSchema=null,this.errorNodes=[],this.node=null,this.focusTarget=null,this._setOptions(t),this.options.history&&"view"!==this.options.mode&&(this.history=new i(this)),this._createFrame(),this._createTable()},destroy:function(){this.frame&&this.container&&this.frame.parentNode==this.container&&(this.container.removeChild(this.frame),this.frame=null),this.container=null,this.dom=null,this.clear(),this.node=null,this.focusTarget=null,this.selection=null,this.multiselection=null,this.errorNodes=null,this.validateSchema=null,this._debouncedValidate=null,this.history&&(this.history.destroy(),this.history=null),this.searchBox&&(this.searchBox.destroy(),this.searchBox=null),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null)},_setOptions:function(e){if(this.options={search:!0,history:!0,mode:"tree",name:void 0,schema:null},e)for(var t in e)e.hasOwnProperty(t)&&(this.options[t]=e[t]);this.setSchema(this.options.schema),this._debouncedValidate=h.debounce(this.validate.bind(this),this.DEBOUNCE_INTERVAL)},set:function(e,t){if(t&&(console.warn('Second parameter "name" is deprecated. Use setName(name) instead.'),this.options.name=t),e instanceof Function||void 0===e)this.clear();else{this.content.removeChild(this.table);var r={field:this.options.name,value:e},a=new n(this,r);this._setRoot(a),this.validate();this.node.expand(!1),this.content.appendChild(this.table)}this.history&&this.history.clear(),this.searchBox&&this.searchBox.clear()},get:function(){if(this.focusTarget){var e=n.getNodeFromTarget(this.focusTarget);e&&e.blur()}return this.node?this.node.getValue():void 0},getText:function(){return JSON.stringify(this.get())},setText:function(e){this.set(h.parse(e))},setName:function(e){this.options.name=e,this.node&&this.node.updateField(this.options.name)},getName:function(){return this.options.name},focus:function(){var e=this.content.querySelector("[contenteditable=true]");e?e.focus():this.node.dom.expand?this.node.dom.expand.focus():this.node.dom.menu?this.node.dom.menu.focus():(e=this.frame.querySelector("button"))&&e.focus()},clear:function(){this.node&&(this.node.collapse(),this.tbody.removeChild(this.node.getDom()),delete this.node)},_setRoot:function(e){this.clear(),this.node=e,this.tbody.appendChild(e.getDom())},search:function(e){var t;return this.node?(this.content.removeChild(this.table),t=this.node.search(e),this.content.appendChild(this.table)):t=[],t},expandAll:function(){this.node&&(this.content.removeChild(this.table),this.node.expand(),this.content.appendChild(this.table))},collapseAll:function(){this.node&&(this.content.removeChild(this.table),this.node.collapse(),this.content.appendChild(this.table))},_onAction:function(e,t){this.history&&this.history.add(e,t),this._onChange()},_onChange:function(){if(this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(e){console.error("Error in onChange callback: ",e)}},validate:function(){this.errorNodes&&this.errorNodes.forEach(function(e){e.setError(null)});var e=this.node;if(e){var t=e.validate(),r=[];if(this.validateSchema)this.validateSchema(e.getValue())||(r=this.validateSchema.errors.map(function(e){return h.improveSchemaError(e)}).map(function(t){return{node:e.findNode(t.dataPath),error:t}}).filter(function(e){return null!=e.node}));this.errorNodes=t.concat(r).reduce(function(e,t){return t.node.findParents().map(function(e){return{node:e,child:t.node,error:{message:"object"===e.type?"Contains invalid properties":"Contains invalid items"}}}).concat(e,[t])},[]).map(function(e){return e.node.setError(e.error,e.child),e.node})}},refresh:function(){this.node&&this.node.updateDom({recurse:!0})},startAutoScroll:function(e){var t=this,r=this.content,a=h.getAbsoluteTop(r),i=r.clientHeight,o=a+i;e<a+24&&r.scrollTop>0?this.autoScrollStep=(a+24-e)/3:e>o-24&&i+r.scrollTop<r.scrollHeight?this.autoScrollStep=(o-24-e)/3:this.autoScrollStep=void 0,this.autoScrollStep?this.autoScrollTimer||(this.autoScrollTimer=setInterval(function(){t.autoScrollStep?r.scrollTop-=t.autoScrollStep:t.stopAutoScroll()},50)):this.stopAutoScroll()},stopAutoScroll:function(){this.autoScrollTimer&&(clearTimeout(this.autoScrollTimer),delete this.autoScrollTimer),this.autoScrollStep&&delete this.autoScrollStep},setSelection:function(e){e&&("scrollTop"in e&&this.content&&(this.content.scrollTop=e.scrollTop),e.nodes&&this.select(e.nodes),e.range&&h.setSelectionOffset(e.range),e.dom&&e.dom.focus())},getSelection:function(){var e=h.getSelectionOffset();return e&&"DIV"!==e.container.nodeName&&(e=null),{dom:this.focusTarget,range:e,nodes:this.multiselection.nodes.slice(0),scrollTop:this.content?this.content.scrollTop:0}},scrollTo:function(e,t){var r=this.content;if(r){var a=this;a.animateTimeout&&(clearTimeout(a.animateTimeout),delete a.animateTimeout),a.animateCallback&&(a.animateCallback(!1),delete a.animateCallback);var i=r.clientHeight,o=r.scrollHeight-i,s=Math.min(Math.max(e-i/4,0),o),n=function(){var e=r.scrollTop,i=s-e;Math.abs(i)>3?(r.scrollTop+=i/3,a.animateCallback=t,a.animateTimeout=setTimeout(n,50)):(t&&t(!0),r.scrollTop=s,delete a.animateTimeout,delete a.animateCallback)};n()}else t&&t(!1)},_createFrame:function(){this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode,this.container.appendChild(this.frame);var e=this;function t(t){e._onEvent&&e._onEvent(t)}this.frame.onclick=function(e){var r=e.target;t(e),"BUTTON"==r.nodeName&&e.preventDefault()},this.frame.oninput=t,this.frame.onchange=t,this.frame.onkeydown=t,this.frame.onkeyup=t,this.frame.oncut=t,this.frame.onpaste=t,this.frame.onmousedown=t,this.frame.onmouseup=t,this.frame.onmouseover=t,this.frame.onmouseout=t,h.addEventListener(this.frame,"focus",t,!0),h.addEventListener(this.frame,"blur",t,!0),this.frame.onfocusin=t,this.frame.onfocusout=t,this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu);var r=document.createElement("button");r.type="button",r.className="jsoneditor-expand-all",r.title="Ouvrir tous les champs",r.onclick=function(){e.expandAll()},this.menu.appendChild(r);var a=document.createElement("button");if(a.type="button",a.title="Fermer tous les champs",a.className="jsoneditor-collapse-all",a.onclick=function(){e.collapseAll()},this.menu.appendChild(a),this.history){var i=document.createElement("button");i.type="button",i.className="jsoneditor-undo jsoneditor-separator",i.title="Annuler la dernire action (Ctrl+Z)",i.onclick=function(){e._onUndo()},this.menu.appendChild(i),this.dom.undo=i;var s=document.createElement("button");s.type="button",s.className="jsoneditor-redo",s.title="Refaire la dernire annulation (Ctrl+Shift+Z)",s.onclick=function(){e._onRedo()},this.menu.appendChild(s),this.dom.redo=s,this.history.onChange=function(){i.disabled=!e.history.canUndo(),s.disabled=!e.history.canRedo()},this.history.onChange()}if(this.options&&this.options.modes&&this.options.modes.length){var n=this;this.modeSwitcher=new l(this.menu,this.options.modes,this.options.mode,function(e){n.modeSwitcher.destroy(),n.setMode(e),n.modeSwitcher.focus()})}this.options.search&&(this.searchBox=new o(this,this.menu))},_onUndo:function(){this.history&&(this.history.undo(),this._onChange())},_onRedo:function(){this.history&&(this.history.redo(),this._onChange())},_onEvent:function(e){"keydown"==e.type&&this._onKeyDown(e),"focus"==e.type&&(this.focusTarget=e.target),"mousedown"==e.type&&this._startDragDistance(e),"mousemove"!=e.type&&"mouseup"!=e.type&&"click"!=e.type||this._updateDragDistance(e);var t=n.getNodeFromTarget(e.target);if(t&&t.selected){if("click"==e.type){if(e.target==t.dom.menu)return void this.showContextMenu(e.target);e.hasMoved||this.deselect()}"mousedown"==e.type&&n.onDragStart(this.multiselection.nodes,e)}else"mousedown"==e.type&&(this.deselect(),t&&e.target==t.dom.drag?n.onDragStart(t,e):(!t||e.target!=t.dom.field&&e.target!=t.dom.value&&e.target!=t.dom.select)&&this._onMultiSelectStart(e));t&&t.onEvent(e)},_startDragDistance:function(e){this.dragDistanceEvent={initialTarget:e.target,initialPageX:e.pageX,initialPageY:e.pageY,dragDistance:0,hasMoved:!1}},_updateDragDistance:function(e){this.dragDistanceEvent||this._startDragDistance(e);var t=e.pageX-this.dragDistanceEvent.initialPageX,r=e.pageY-this.dragDistanceEvent.initialPageY;return this.dragDistanceEvent.dragDistance=Math.sqrt(t*t+r*r),this.dragDistanceEvent.hasMoved=this.dragDistanceEvent.hasMoved||this.dragDistanceEvent.dragDistance>10,e.dragDistance=this.dragDistanceEvent.dragDistance,e.hasMoved=this.dragDistanceEvent.hasMoved,e.dragDistance},_onMultiSelectStart:function(e){var t=n.getNodeFromTarget(e.target);if("tree"===this.options.mode&&void 0===this.options.onEditable){this.multiselection={start:t||null,end:null,nodes:[]},this._startDragDistance(e);var r=this;this.mousemove||(this.mousemove=h.addEventListener(window,"mousemove",function(e){r._onMultiSelect(e)})),this.mouseup||(this.mouseup=h.addEventListener(window,"mouseup",function(e){r._onMultiSelectEnd(e)}))}},_onMultiSelect:function(e){if(e.preventDefault(),this._updateDragDistance(e),e.hasMoved){var t=n.getNodeFromTarget(e.target);t&&(null==this.multiselection.start&&(this.multiselection.start=t),this.multiselection.end=t),this.deselect();var r=this.multiselection.start,a=this.multiselection.end||this.multiselection.start;r&&a&&(this.multiselection.nodes=this._findTopLevelNodes(r,a),this.select(this.multiselection.nodes))}},_onMultiSelectEnd:function(e){this.multiselection.nodes[0]&&this.multiselection.nodes[0].dom.menu.focus(),this.multiselection.start=null,this.multiselection.end=null,this.mousemove&&(h.removeEventListener(window,"mousemove",this.mousemove),delete this.mousemove),this.mouseup&&(h.removeEventListener(window,"mouseup",this.mouseup),delete this.mouseup)},deselect:function(e){this.multiselection.nodes.forEach(function(e){e.setSelected(!1)}),this.multiselection.nodes=[],e&&(this.multiselection.start=null,this.multiselection.end=null)},select:function(e){if(!Array.isArray(e))return this.select([e]);if(e){this.deselect(),this.multiselection.nodes=e.slice(0);var t=e[0];e.forEach(function(e){e.setSelected(!0,e===t)})}},_findTopLevelNodes:function(e,t){for(var r=e.getNodePath(),a=t.getNodePath(),i=0;i<r.length&&r[i]===a[i];)i++;var o=r[i-1],s=r[i],n=a[i];if(s&&n||(o.parent?(s=o,n=o,o=o.parent):(s=o.childs[0],n=o.childs[o.childs.length-1])),o&&s&&n){var l=o.childs.indexOf(s),h=o.childs.indexOf(n),c=Math.min(l,h),d=Math.max(l,h);return o.childs.slice(c,d+1)}return[]},_onKeyDown:function(e){var t=e.which||e.keyCode,r=e.ctrlKey,a=e.shiftKey,i=!1;if(9==t){var o=this;setTimeout(function(){h.selectContentEditable(o.focusTarget)},0)}if(this.searchBox)if(r&&70==t)this.searchBox.dom.search.focus(),this.searchBox.dom.search.select(),i=!0;else if(114==t||r&&71==t){a?this.searchBox.previous(!0):this.searchBox.next(!0),i=!0}this.history&&(r&&!a&&90==t?(this._onUndo(),i=!0):r&&a&&90==t&&(this._onRedo(),i=!0)),i&&(e.preventDefault(),e.stopPropagation())},_createTable:function(){var e,t=document.createElement("div");t.className="jsoneditor-outer",this.contentOuter=t,this.content=document.createElement("div"),this.content.className="jsoneditor-tree",t.appendChild(this.content),this.table=document.createElement("table"),this.table.className="jsoneditor-tree",this.content.appendChild(this.table),this.colgroupContent=document.createElement("colgroup"),"tree"===this.options.mode&&((e=document.createElement("col")).width="24px",this.colgroupContent.appendChild(e)),(e=document.createElement("col")).width="24px",this.colgroupContent.appendChild(e),e=document.createElement("col"),this.colgroupContent.appendChild(e),this.table.appendChild(this.colgroupContent),this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.frame.appendChild(t)},showContextMenu:function(e,t){var r=[],a=this;r.push({text:"Dupliquer",title:"Dupliquer les champs (Ctrl+D)",className:"jsoneditor-duplicate",click:function(){n.onDuplicate(a.multiselection.nodes)}}),r.push({text:"Supprimer",title:"Supprimer les champs (Ctrl+Del)",className:"jsoneditor-remove",click:function(){n.onRemove(a.multiselection.nodes)}}),new s(r,{close:t}).show(e,this.content)}};t.exports=[{mode:"tree",mixin:c,data:"json"},{mode:"view",mixin:c,data:"json"},{mode:"form",mixin:c,data:"json"}]},{"./ContextMenu":55,"./Highlighter":56,"./History":57,"./ModeSwitcher":59,"./Node":60,"./SearchBox":61,"./util":68}],68:[function(e,t,r){"use strict";var a=e("./assets/jsonlint/jsonlint");r.parse=function(e){try{return JSON.parse(e)}catch(t){throw r.validate(e),t}},r.sanitize=function(e){var t=[],r=0,a=e.match(/^\s*(\/\*(.|[\r\n])*?\*\/)?\s*[\da-zA-Z_$]+\s*\(([\s\S]*)\)\s*;?\s*$/);function i(){return e.charAt(r)}function o(){return e.charAt(r+1)}function s(){for(var e=t.length-1;e>=0;){var r=t[e];if(" "!==r&&"\n"!==r&&"\r"!==r&&"\t"!==r)return r;e--}return""}function n(){for(r+=2;r<e.length&&("*"!==i()||"/"!==o());)r++;r+=2}function l(){for(r+=2;r<e.length&&"\n"!==i();)r++}function h(a){t.push('"'),r++;for(var o=i();r<e.length&&o!==a;)'"'===o&&"\\"!==e.charAt(r-1)&&t.push("\\"),"\\"===o&&(r++,"'"!==(o=i())&&t.push("\\")),t.push(o),r++,o=i();o===a&&(t.push('"'),r++)}function c(){for(var e="",a=i(),o=/[a-zA-Z_$\d]/;o.test(a);)e+=a,r++,a=i();-1===["null","true","false"].indexOf(e)?t.push('"'+e+'"'):t.push(e)}for(a&&(e=a[3]);r<e.length;){var d=i();"/"===d&&"*"===o()?n():"/"===d&&"/"===o()?l():"'"===d||'"'===d?h(d):/[a-zA-Z_$]/.test(d)&&-1!==["{",","].indexOf(s())?c():(t.push(d),r++)}return t.join("")},r.escapeUnicodeChars=function(e){return e.replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})},r.validate=function(e){void 0!==a?a.parse(e):JSON.parse(e)},r.extend=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},r.clear=function(e){for(var t in e)e.hasOwnProperty(t)&&delete e[t];return e},r.type=function(e){return null===e?"null":void 0===e?"undefined":e instanceof Number||"number"==typeof e?"number":e instanceof String||"string"==typeof e?"string":e instanceof Boolean||"boolean"==typeof e?"boolean":e instanceof RegExp||"regexp"==typeof e?"regexp":r.isArray(e)?"array":"object"};var i=/^https?:\/\/\S+$/;r.isUrl=function(e){return("string"==typeof e||e instanceof String)&&i.test(e)},r.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},r.getAbsoluteLeft=function(e){return e.getBoundingClientRect().left+window.pageXOffset||document.scrollLeft||0},r.getAbsoluteTop=function(e){return e.getBoundingClientRect().top+window.pageYOffset||document.scrollTop||0},r.addClassName=function(e,t){var r=e.className.split(" ");-1==r.indexOf(t)&&(r.push(t),e.className=r.join(" "))},r.removeClassName=function(e,t){var r=e.className.split(" "),a=r.indexOf(t);-1!=a&&(r.splice(a,1),e.className=r.join(" "))},r.stripFormatting=function(e){for(var t=e.childNodes,a=0,i=t.length;a<i;a++){var o=t[a];o.style&&o.removeAttribute("style");var s=o.attributes;if(s)for(var n=s.length-1;n>=0;n--){var l=s[n];!0===l.specified&&o.removeAttribute(l.name)}r.stripFormatting(o)}},r.setEndOfContentEditable=function(e){var t,r;document.createRange&&((t=document.createRange()).selectNodeContents(e),t.collapse(!1),(r=window.getSelection()).removeAllRanges(),r.addRange(t))},r.selectContentEditable=function(e){var t,r;e&&"DIV"==e.nodeName&&(window.getSelection&&document.createRange&&((r=document.createRange()).selectNodeContents(e),(t=window.getSelection()).removeAllRanges(),t.addRange(r)))},r.getSelection=function(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}return null},r.setSelection=function(e){if(e&&window.getSelection){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}},r.getSelectionOffset=function(){var e=r.getSelection();return e&&"startOffset"in e&&"endOffset"in e&&e.startContainer&&e.startContainer==e.endContainer?{startOffset:e.startOffset,endOffset:e.endOffset,container:e.startContainer.parentNode}:null},r.setSelectionOffset=function(e){if(document.createRange&&window.getSelection&&window.getSelection()){var t=document.createRange();e.container.firstChild||e.container.appendChild(document.createTextNode("")),t.setStart(e.container.firstChild,e.startOffset),t.setEnd(e.container.firstChild,e.endOffset),r.setSelection(t)}},r.getInnerText=function(e,t){if(void 0==t&&(t={text:"",flush:function(){var e=this.text;return this.text="",e},set:function(e){this.text=e}}),e.nodeValue)return t.flush()+e.nodeValue;if(e.hasChildNodes()){for(var a=e.childNodes,i="",o=0,s=a.length;o<s;o++){var n=a[o];if("DIV"==n.nodeName||"P"==n.nodeName){var l=a[o-1],h=l?l.nodeName:void 0;h&&"DIV"!=h&&"P"!=h&&"BR"!=h&&(i+="\n",t.flush()),i+=r.getInnerText(n,t),t.set("\n")}else"BR"==n.nodeName?(i+=t.flush(),t.set("\n")):i+=r.getInnerText(n,t)}return i}return"P"==e.nodeName&&-1!=r.getInternetExplorerVersion()?t.flush():""},r.getInternetExplorerVersion=function(){if(-1==o){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}o=e}return o},r.isFirefox=function(){return-1!=navigator.userAgent.indexOf("Firefox")};var o=-1;r.addEventListener=function(e,t,a,i){if(e.addEventListener)return void 0===i&&(i=!1),"mousewheel"===t&&r.isFirefox()&&(t="DOMMouseScroll"),e.addEventListener(t,a,i),a;if(e.attachEvent){var o=function(){return a.call(e,window.event)};return e.attachEvent("on"+t,o),o}},r.removeEventListener=function(e,t,a,i){e.removeEventListener?(void 0===i&&(i=!1),"mousewheel"===t&&r.isFirefox()&&(t="DOMMouseScroll"),e.removeEventListener(t,a,i)):e.detachEvent&&e.detachEvent("on"+t,a)},r.parsePath=function e(t){var r,a;if(0===t.length)return[];var i=t.match(/^\.(\w+)/);if(i)r=i[1],a=t.substr(r.length+1);else{if("["!==t[0])throw new SyntaxError("Failed to parse path");var o=t.indexOf("]");if(-1===o)throw new SyntaxError("Character ] expected in path");if(1===o)throw new SyntaxError("Index expected after [");var s=t.substring(1,o);"'"===s[0]&&(s='"'+s.substring(1,s.length-1)+'"'),r="*"===s?s:JSON.parse(s),a=t.substr(o+1)}return[r].concat(e(a))},r.improveSchemaError=function(e){if("enum"===e.keyword&&Array.isArray(e.schema)){var t=e.schema;if(t){if((t=t.map(function(e){return JSON.stringify(e)})).length>5){var r=["("+(t.length-5)+" more...)"];(t=t.slice(0,5)).push(r)}e.message="should be equal to one of: "+t.join(", ")}}return"additionalProperties"===e.keyword&&(e.message="should NOT have additional property: "+e.params.additionalProperty),e},r.insideRect=function(e,t,r){var a=void 0!==r?r:0;return t.left-a>=e.left&&t.right+a<=e.right&&t.top-a>=e.top&&t.bottom+a<=e.bottom},r.debounce=function(e,t,r){var a;return function(){var i=this,o=arguments,s=r&&!a;clearTimeout(a),a=setTimeout(function(){a=null,r||e.apply(i,o)},t),s&&e.apply(i,o)}},r.textDiff=function(e,t){for(var r=t.length,a=0,i=e.length,o=t.length;t.charAt(a)===e.charAt(a)&&a<r;)a++;for(;t.charAt(o-1)===e.charAt(i-1)&&o>a&&i>0;)o--,i--;return{start:a,end:o}}},{"./assets/jsonlint/jsonlint":65}]},{},[7])(7)});